  [1m[36m (146.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS hstore[0m
  [1m[35mSQL (0.5ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "hstore"[0m
  [1m[35m (51.7ms)[0m  CREATE TABLE "active_admin_comments" ("id" serial primary key, "resource_id" character varying(255) NOT NULL, "resource_type" character varying(255) NOT NULL, "author_id" integer, "author_type" character varying(255), "body" text, "created_at" timestamp, "updated_at" timestamp, "namespace" character varying(255)) 
  [1m[36m (2.5ms)[0m  [1mCREATE  INDEX  "index_active_admin_comments_on_author_type_and_author_id" ON "active_admin_comments" USING btree ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_active_admin_comments_on_namespace" ON "active_admin_comments" USING btree ("namespace")
  [1m[36m (2.8ms)[0m  [1mCREATE  INDEX  "index_admin_notes_on_resource_type_and_resource_id" ON "active_admin_comments" USING btree ("resource_type", "resource_id")[0m
  [1m[35m (4.6ms)[0m  CREATE TABLE "announcement_dismissals" ("id" serial primary key, "announcement_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (3.3ms)[0m  [1mCREATE  INDEX  "index_announcement_dismissals_on_announcement_id" ON "announcement_dismissals" USING btree ("announcement_id")[0m
  [1m[35m (2.3ms)[0m  CREATE  INDEX  "index_announcement_dismissals_on_user_id" ON "announcement_dismissals" USING btree ("user_id")
  [1m[36m (9.6ms)[0m  [1mCREATE TABLE "announcements" ("id" serial primary key, "message" text NOT NULL, "locale" character varying(255) DEFAULT 'en' NOT NULL, "starts_at" timestamp NOT NULL, "ends_at" timestamp NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (8.1ms)[0m  CREATE TABLE "attachments" ("id" serial primary key, "user_id" integer, "filename" character varying(255), "location" text, "comment_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "filesize" integer) 
  [1m[36m (2.5ms)[0m  [1mCREATE  INDEX  "index_attachments_on_comment_id" ON "attachments" USING btree ("comment_id")[0m
  [1m[35m (7.2ms)[0m  CREATE TABLE "campaigns" ("id" serial primary key, "showcase_url" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "name" character varying(255) NOT NULL, "manager_email" character varying(255) NOT NULL) 
  [1m[36m (22.4ms)[0m  [1mCREATE TABLE "categories" ("id" serial primary key, "name" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "position" integer DEFAULT 0 NOT NULL) [0m
  [1m[35m (4.4ms)[0m  CREATE TABLE "comment_votes" ("id" serial primary key, "comment_id" integer, "user_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.3ms)[0m  [1mCREATE  INDEX  "index_comment_votes_on_comment_id" ON "comment_votes" USING btree ("comment_id")[0m
  [1m[35m (2.4ms)[0m  CREATE  INDEX  "index_comment_votes_on_user_id" ON "comment_votes" USING btree ("user_id")
  [1m[36m (7.4ms)[0m  [1mCREATE TABLE "comments" ("id" serial primary key, "discussion_id" integer DEFAULT 0, "body" text DEFAULT '', "subject" character varying(255) DEFAULT '', "user_id" integer DEFAULT 0 NOT NULL, "parent_id" integer, "created_at" timestamp, "updated_at" timestamp, "uses_markdown" boolean DEFAULT 'f' NOT NULL, "comment_votes_count" integer DEFAULT 0 NOT NULL, "attachments_count" integer DEFAULT 0 NOT NULL, "liker_ids_and_names" text, "edited_at" timestamp) [0m
  [1m[35m (2.4ms)[0m  CREATE  INDEX  "index_comments_on_commentable_id" ON "comments" USING btree ("discussion_id")
  [1m[36m (2.5ms)[0m  [1mCREATE  INDEX  "index_comments_on_discussion_id" ON "comments" USING btree ("discussion_id")[0m
  [1m[35m (2.5ms)[0m  CREATE  INDEX  "index_comments_on_parent_id" ON "comments" USING btree ("parent_id")
  [1m[36m (2.4ms)[0m  [1mCREATE  INDEX  "index_comments_on_user_id" ON "comments" USING btree ("user_id")[0m
  [1m[35m (8.8ms)[0m  CREATE TABLE "contact_messages" ("id" serial primary key, "name" character varying(255), "user_id" integer, "email" character varying(255), "message" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "destination" character varying(255) DEFAULT 'contact@loomio.org') 
  [1m[36m (6.8ms)[0m  [1mCREATE TABLE "contacts" ("id" serial primary key, "user_id" integer, "name" character varying(255), "email" character varying(255), "source" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.8ms)[0m  CREATE  INDEX  "index_contacts_on_user_id" ON "contacts" USING btree ("user_id")
  [1m[36m (8.0ms)[0m  [1mCREATE TABLE "delayed_jobs" ("id" serial primary key, "priority" integer DEFAULT 0, "attempts" integer DEFAULT 0, "handler" text, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying(255), "queue" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (3.3ms)[0m  CREATE  INDEX  "delayed_jobs_priority" ON "delayed_jobs" USING btree ("priority", "run_at")
  [1m[36m (4.5ms)[0m  [1mCREATE TABLE "did_not_votes" ("id" serial primary key, "user_id" integer, "motion_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_did_not_votes_on_motion_id" ON "did_not_votes" USING btree ("motion_id")
  [1m[36m (2.4ms)[0m  [1mCREATE  INDEX  "index_did_not_votes_on_user_id" ON "did_not_votes" USING btree ("user_id")[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "discussion_readers" ("id" serial primary key, "user_id" integer, "created_at" timestamp, "updated_at" timestamp, "discussion_id" integer, "last_read_at" timestamp, "read_comments_count" integer, "read_items_count" integer DEFAULT 0 NOT NULL, "following" boolean) 
  [1m[36m (2.2ms)[0m  [1mCREATE  INDEX  "index_motion_read_logs_on_discussion_id" ON "discussion_readers" USING btree ("discussion_id")[0m
  [1m[35m (3.4ms)[0m  CREATE  INDEX  "index_discussion_read_logs_on_user_id_and_discussion_id" ON "discussion_readers" USING btree ("user_id", "discussion_id")
  [1m[36m (3.5ms)[0m  [1mCREATE  INDEX  "index_motion_read_logs_on_user_id" ON "discussion_readers" USING btree ("user_id")[0m
  [1m[35m (9.3ms)[0m  CREATE TABLE "discussions" ("id" serial primary key, "group_id" integer, "author_id" integer, "created_at" timestamp, "updated_at" timestamp, "title" character varying(255), "last_comment_at" timestamp, "description" text, "uses_markdown" boolean DEFAULT 't' NOT NULL, "total_views" integer DEFAULT 0 NOT NULL, "is_deleted" boolean DEFAULT 'f' NOT NULL, "comments_count" integer DEFAULT 0 NOT NULL, "items_count" integer DEFAULT 0 NOT NULL, "archived_at" timestamp, "private" boolean, "key" character varying(255), "iframe_src" character varying(255), "last_activity_at" timestamp, "motions_count" integer DEFAULT 0) 
  [1m[36m (3.3ms)[0m  [1mCREATE  INDEX  "index_discussions_on_author_id" ON "discussions" USING btree ("author_id")[0m
  [1m[35m (3.5ms)[0m  CREATE  INDEX  "index_discussions_on_group_id" ON "discussions" USING btree ("group_id")
  [1m[36m (27.8ms)[0m  [1mCREATE  INDEX  "index_discussions_on_is_deleted_and_group_id" ON "discussions" USING btree ("is_deleted", "group_id")[0m
  [1m[35m (7.7ms)[0m  CREATE  INDEX  "index_discussions_on_is_deleted_and_id" ON "discussions" USING btree ("is_deleted", "id")
  [1m[36m (3.5ms)[0m  [1mCREATE  INDEX  "index_discussions_on_is_deleted" ON "discussions" USING btree ("is_deleted")[0m
  [1m[35m (2.9ms)[0m  CREATE UNIQUE INDEX  "index_discussions_on_key" ON "discussions" USING btree ("key")
  [1m[36m (7.6ms)[0m  [1mCREATE TABLE "events" ("id" serial primary key, "kind" character varying(255), "created_at" timestamp, "updated_at" timestamp, "eventable_id" integer, "eventable_type" character varying(255), "user_id" integer, "discussion_id" integer, "sequence_id" integer) [0m
  [1m[35m (2.3ms)[0m  CREATE  INDEX  "index_events_on_created_at" ON "events" USING btree ("created_at")
  [1m[36m (2.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_events_on_discussion_id_and_sequence_id" ON "events" USING btree ("discussion_id", "sequence_id")[0m
  [1m[35m (10.8ms)[0m  CREATE  INDEX  "index_events_on_discussion_id" ON "events" USING btree ("discussion_id")
  [1m[36m (2.4ms)[0m  [1mCREATE  INDEX  "index_events_on_eventable_type_and_eventable_id" ON "events" USING btree ("eventable_type", "eventable_id")[0m
  [1m[35m (1.9ms)[0m  CREATE TABLE "group_hierarchies" ("ancestor_id" integer NOT NULL, "descendant_id" integer NOT NULL, "generations" integer NOT NULL) 
  [1m[36m (3.7ms)[0m  [1mCREATE UNIQUE INDEX  "group_anc_desc_udx" ON "group_hierarchies" USING btree ("ancestor_id", "descendant_id", "generations")[0m
  [1m[35m (2.5ms)[0m  CREATE  INDEX  "group_desc_idx" ON "group_hierarchies" USING btree ("descendant_id")
  [1m[36m (8.2ms)[0m  [1mCREATE TABLE "group_requests" ("id" serial primary key, "name" character varying(255), "description" text, "admin_email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying(255), "group_id" integer, "cannot_contribute" boolean, "expected_size" character varying(255), "max_size" integer DEFAULT 300, "robot_trap" character varying(255), "distribution_metric" integer, "sectors" character varying(255), "other_sector" character varying(255), "token" character varying(255), "admin_name" character varying(255), "country_name" character varying(255), "high_touch" boolean DEFAULT 'f' NOT NULL, "approved_at" timestamp, "defered_until" timestamp, "approved_by_id" integer, "why_do_you_want" text, "group_core_purpose" text, "admin_notes" text, "is_commercial" boolean) [0m
  [1m[35m (5.6ms)[0m  CREATE  INDEX  "index_group_requests_on_group_id" ON "group_requests" USING btree ("group_id")
  [1m[36m (13.8ms)[0m  [1mCREATE TABLE "group_setups" ("id" serial primary key, "group_id" integer, "group_name" character varying(255), "group_description" text, "viewable_by" character varying(255) DEFAULT 'members', "members_invitable_by" character varying(255) DEFAULT 'admins', "discussion_title" character varying(255), "discussion_description" text, "motion_title" character varying(255), "motion_description" text, "close_at_date" date, "close_at_time_zone" character varying(255), "close_at_time" character varying(255), "admin_email" character varying(255), "recipients" text, "message_subject" character varying(255), "message_body" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (12.3ms)[0m  CREATE TABLE "groups" ("id" serial primary key, "name" character varying(255), "created_at" timestamp, "updated_at" timestamp, "privacy" character varying(255) DEFAULT 'private', "members_invitable_by" character varying(255), "parent_id" integer, "hide_members" boolean DEFAULT 'f', "description" text, "memberships_count" integer DEFAULT 0 NOT NULL, "archived_at" timestamp, "max_size" integer DEFAULT 1000 NOT NULL, "cannot_contribute" boolean DEFAULT 'f', "distribution_metric" integer, "sectors" character varying(255), "other_sector" character varying(255), "discussions_count" integer DEFAULT 0 NOT NULL, "country_name" character varying(255), "setup_completed_at" timestamp, "next_steps_completed" boolean DEFAULT 'f' NOT NULL, "full_name" character varying(255), "payment_plan" character varying(255) DEFAULT 'undetermined', "parent_members_can_see_discussions" boolean DEFAULT 'f' NOT NULL, "key" character varying(255), "can_start_group" boolean DEFAULT 't', "category_id" integer, "enabled_beta_features" text, "subdomain" character varying(255), "theme_id" integer, "is_visible_to_public" boolean DEFAULT 'f' NOT NULL, "is_visible_to_parent_members" boolean DEFAULT 'f' NOT NULL, "discussion_privacy_options" character varying(255) NOT NULL, "members_can_add_members" boolean DEFAULT 'f' NOT NULL, "membership_granted_upon" character varying(255) NOT NULL, "members_can_edit_discussions" boolean DEFAULT 't' NOT NULL, "motions_can_be_edited" boolean DEFAULT 'f' NOT NULL, "cover_photo_file_name" character varying(255), "cover_photo_content_type" character varying(255), "cover_photo_file_size" integer, "cover_photo_updated_at" timestamp, "logo_file_name" character varying(255), "logo_content_type" character varying(255), "logo_file_size" integer, "logo_updated_at" timestamp, "members_can_edit_comments" boolean DEFAULT 't', "members_can_raise_motions" boolean DEFAULT 't' NOT NULL, "members_can_vote" boolean DEFAULT 't' NOT NULL, "members_can_start_discussions" boolean DEFAULT 't' NOT NULL, "members_can_create_subgroups" boolean DEFAULT 't' NOT NULL) 
  [1m[36m (4.9ms)[0m  [1mCREATE  INDEX  "index_groups_on_archived_at_and_id" ON "groups" USING btree ("archived_at", "id")[0m
  [1m[35m (2.9ms)[0m  CREATE  INDEX  "index_groups_on_category_id" ON "groups" USING btree ("category_id")
  [1m[36m (2.4ms)[0m  [1mCREATE  INDEX  "index_groups_on_full_name" ON "groups" USING btree ("full_name")[0m
  [1m[35m (3.1ms)[0m  CREATE  INDEX  "index_groups_on_is_visible_to_public" ON "groups" USING btree ("is_visible_to_public")
  [1m[36m (2.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_groups_on_key" ON "groups" USING btree ("key")[0m
  [1m[35m (2.3ms)[0m  CREATE  INDEX  "index_groups_on_name" ON "groups" USING btree ("name")
  [1m[36m (34.0ms)[0m  [1mCREATE  INDEX  "index_groups_on_parent_id" ON "groups" USING btree ("parent_id")[0m
  [1m[35m (6.8ms)[0m  CREATE TABLE "invitations" ("id" serial primary key, "recipient_email" character varying(255) NOT NULL, "inviter_id" integer NOT NULL, "to_be_admin" boolean DEFAULT 'f' NOT NULL, "token" character varying(255) NOT NULL, "accepted_by_id" integer, "accepted_at" timestamp, "intent" character varying(255), "canceller_id" integer, "cancelled_at" timestamp, "recipient_name" character varying(255), "invitable_id" integer, "invitable_type" character varying(255)) 
  [1m[36m (3.1ms)[0m  [1mCREATE  INDEX  "index_invitations_on_token" ON "invitations" USING btree ("token")[0m
  [1m[35m (7.0ms)[0m  CREATE TABLE "membership_requests" ("id" serial primary key, "name" character varying(255), "email" character varying(255), "introduction" text, "group_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "requestor_id" integer, "responder_id" integer, "response" character varying(255), "responded_at" timestamp) 
  [1m[36m (2.9ms)[0m  [1mCREATE  INDEX  "index_membership_requests_on_email" ON "membership_requests" USING btree ("email")[0m
  [1m[35m (2.5ms)[0m  CREATE  INDEX  "index_membership_requests_on_group_id_and_response" ON "membership_requests" USING btree ("group_id", "response")
  [1m[36m (4.4ms)[0m  [1mCREATE  INDEX  "index_membership_requests_on_group_id" ON "membership_requests" USING btree ("group_id")[0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_membership_requests_on_name" ON "membership_requests" USING btree ("name")
  [1m[36m (2.3ms)[0m  [1mCREATE  INDEX  "index_membership_requests_on_requestor_id" ON "membership_requests" USING btree ("requestor_id")[0m
  [1m[35m (9.1ms)[0m  CREATE  INDEX  "index_membership_requests_on_responder_id" ON "membership_requests" USING btree ("responder_id")
  [1m[36m (2.4ms)[0m  [1mCREATE  INDEX  "index_membership_requests_on_response" ON "membership_requests" USING btree ("response")[0m
  [1m[35m (6.4ms)[0m  CREATE TABLE "memberships" ("id" serial primary key, "group_id" integer, "user_id" integer, "created_at" timestamp, "updated_at" timestamp, "inviter_id" integer, "email_new_discussions_and_proposals" boolean DEFAULT 't', "archived_at" timestamp, "inbox_position" integer DEFAULT 0, "admin" boolean DEFAULT 'f' NOT NULL, "is_suspended" boolean DEFAULT 'f' NOT NULL, "following_by_default" boolean DEFAULT 'f' NOT NULL) 
  [1m[36m (2.3ms)[0m  [1mCREATE  INDEX  "index_memberships_on_group_id" ON "memberships" USING btree ("group_id")[0m
  [1m[35m (2.5ms)[0m  CREATE  INDEX  "index_memberships_on_inviter_id" ON "memberships" USING btree ("inviter_id")
  [1m[36m (3.5ms)[0m  [1mCREATE  INDEX  "index_memberships_on_user_id" ON "memberships" USING btree ("user_id")[0m
  [1m[35m (7.4ms)[0m  CREATE TABLE "motion_readers" ("id" serial primary key, "motion_id" integer, "user_id" integer, "created_at" timestamp, "updated_at" timestamp, "last_read_at" timestamp, "read_votes_count" integer DEFAULT 0 NOT NULL, "read_activity_count" integer DEFAULT 0 NOT NULL) 
  [1m[36m (2.8ms)[0m  [1mCREATE  INDEX  "index_motion_readers_on_user_id_and_motion_id" ON "motion_readers" USING btree ("user_id", "motion_id")[0m
  [1m[35m (8.0ms)[0m  CREATE TABLE "motions" ("id" serial primary key, "name" character varying(255), "description" text, "author_id" integer, "created_at" timestamp, "updated_at" timestamp, "closed_at" timestamp, "discussion_id" integer, "outcome" text, "last_vote_at" timestamp, "uses_markdown" boolean DEFAULT 't' NOT NULL, "yes_votes_count" integer DEFAULT 0 NOT NULL, "no_votes_count" integer DEFAULT 0 NOT NULL, "abstain_votes_count" integer DEFAULT 0 NOT NULL, "block_votes_count" integer DEFAULT 0 NOT NULL, "closing_at" timestamp, "did_not_votes_count" integer, "votes_count" integer DEFAULT 0 NOT NULL, "outcome_author_id" integer, "key" character varying(255)) 
  [1m[36m (2.5ms)[0m  [1mCREATE  INDEX  "index_motions_on_author_id" ON "motions" USING btree ("author_id")[0m
  [1m[35m (2.5ms)[0m  CREATE  INDEX  "index_motions_on_discussion_id_and_closed_at" ON "motions" USING btree ("discussion_id", "closed_at" DESC)
  [1m[36m (2.6ms)[0m  [1mCREATE  INDEX  "index_motions_on_discussion_id" ON "motions" USING btree ("discussion_id")[0m
  [1m[35m (2.6ms)[0m  CREATE UNIQUE INDEX  "index_motions_on_key" ON "motions" USING btree ("key")
  [1m[36m (8.2ms)[0m  [1mCREATE TABLE "notifications" ("id" serial primary key, "user_id" integer, "created_at" timestamp, "updated_at" timestamp, "event_id" integer, "viewed_at" timestamp) [0m
  [1m[35m (2.4ms)[0m  CREATE  INDEX  "index_notifications_on_event_id_and_user_id" ON "notifications" USING btree ("event_id", "user_id")
  [1m[36m (2.7ms)[0m  [1mCREATE  INDEX  "index_notifications_on_event_id" ON "notifications" USING btree ("event_id")[0m
  [1m[35m (2.5ms)[0m  CREATE  INDEX  "index_notifications_on_user_id" ON "notifications" USING btree ("user_id")
  [1m[36m (2.3ms)[0m  [1mCREATE  INDEX  "index_notifications_on_viewed_at" ON "notifications" USING btree ("viewed_at")[0m
  [1m[35m (7.1ms)[0m  CREATE TABLE "omniauth_identities" ("id" serial primary key, "user_id" integer, "email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "provider" character varying(255), "uid" character varying(255), "name" character varying(255)) 
  [1m[36m (2.8ms)[0m  [1mCREATE  INDEX  "index_personas_on_email" ON "omniauth_identities" USING btree ("email")[0m
  [1m[35m (31.4ms)[0m  CREATE  INDEX  "index_omniauth_identities_on_provider_and_uid" ON "omniauth_identities" USING btree ("provider", "uid")
  [1m[36m (2.6ms)[0m  [1mCREATE  INDEX  "index_personas_on_user_id" ON "omniauth_identities" USING btree ("user_id")[0m
  [1m[35m (4.6ms)[0m  CREATE TABLE "subscriptions" ("id" serial primary key, "group_id" integer, "amount" decimal(8,2), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "profile_id" character varying(255)) 
  [1m[36m (2.4ms)[0m  [1mCREATE  INDEX  "index_subscriptions_on_group_id" ON "subscriptions" USING btree ("group_id")[0m
  [1m[35m (7.9ms)[0m  CREATE TABLE "themes" ("id" serial primary key, "style" text, "name" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "pages_logo_file_name" character varying(255), "pages_logo_content_type" character varying(255), "pages_logo_file_size" integer, "pages_logo_updated_at" timestamp, "app_logo_file_name" character varying(255), "app_logo_content_type" character varying(255), "app_logo_file_size" integer, "app_logo_updated_at" timestamp, "javascript" text) 
  [1m[36m (9.6ms)[0m  [1mCREATE TABLE "translations" ("id" serial primary key, "translatable_id" integer, "translatable_type" character varying(255), "fields" hstore, "language" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.7ms)[0m  CREATE  INDEX  "translations_gin_fields" ON "translations" USING gin ("fields")
  [1m[36m (14.4ms)[0m  [1mCREATE TABLE "user_deactivation_responses" ("id" serial primary key, "user_id" integer, "body" text) [0m
  [1m[35m (2.7ms)[0m  CREATE  INDEX  "index_user_deactivation_responses_on_user_id" ON "user_deactivation_responses" USING btree ("user_id")
  [1m[36m (8.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying(255) DEFAULT '' NOT NULL, "encrypted_password" character varying(128) DEFAULT '', "reset_password_token" character varying(255), "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp, "updated_at" timestamp, "name" character varying(255), "deactivated_at" timestamp, "is_admin" boolean DEFAULT 'f', "avatar_kind" character varying(255) DEFAULT 'initials' NOT NULL, "uploaded_avatar_file_name" character varying(255), "uploaded_avatar_content_type" character varying(255), "uploaded_avatar_file_size" integer, "uploaded_avatar_updated_at" timestamp, "avatar_initials" character varying(255), "username" character varying(255), "email_followed_threads" boolean DEFAULT 't' NOT NULL, "email_when_proposal_closing_soon" boolean DEFAULT 't' NOT NULL, "authentication_token" character varying(255), "unsubscribe_token" character varying(255), "memberships_count" integer DEFAULT 0 NOT NULL, "uses_markdown" boolean DEFAULT 'f', "selected_locale" character varying(255), "time_zone" character varying(255), "key" character varying(255), "detected_locale" character varying(255), "email_missed_yesterday" boolean DEFAULT 't' NOT NULL, "email_api_key" character varying(255), "email_new_discussions_and_proposals" boolean DEFAULT 't' NOT NULL, "email_when_mentioned" boolean DEFAULT 't' NOT NULL) [0m
  [1m[35m (4.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (3.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_key" ON "users" USING btree ("key")[0m
  [1m[35m (3.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_unsubscribe_token" ON "users" USING btree ("unsubscribe_token")[0m
  [1m[35m (8.6ms)[0m  CREATE TABLE "versions" ("id" serial primary key, "item_type" character varying(255) NOT NULL, "item_id" integer NOT NULL, "event" character varying(255) NOT NULL, "whodunnit" character varying(255), "object" text, "created_at" timestamp) 
  [1m[36m (2.6ms)[0m  [1mCREATE  INDEX  "index_versions_on_item_type_and_item_id" ON "versions" USING btree ("item_type", "item_id")[0m
  [1m[35m (8.0ms)[0m  CREATE TABLE "votes" ("id" serial primary key, "motion_id" integer, "user_id" integer, "position" character varying(255), "created_at" timestamp, "updated_at" timestamp, "statement" character varying(255), "age" integer DEFAULT 0 NOT NULL, "previous_vote_id" integer) 
  [1m[36m (2.7ms)[0m  [1mCREATE UNIQUE INDEX  "vote_age_per_user_per_motion" ON "votes" USING btree ("motion_id", "user_id", "age")[0m
  [1m[35m (4.3ms)[0m  CREATE  INDEX  "index_votes_on_motion_id_and_user_id" ON "votes" USING btree ("motion_id", "user_id")
  [1m[36m (3.1ms)[0m  [1mCREATE  INDEX  "index_votes_on_motion_id" ON "votes" USING btree ("motion_id")[0m
  [1m[35m (27.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) 
  [1m[36m (2.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20141006011358')[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111115062002')
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111123003406')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111123003428')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111123023759')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111123063453')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111124031053')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111124033529')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111124044949')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111128013131')
  [1m[36m (0.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111130020030')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111201065901')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111202014855')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111202021955')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111202023133')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111202031656')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111202042857')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20111209202848')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20111212061150')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120124225553')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120205233251')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120307190505')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120321232109')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120322094916')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120323030039')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120326022356')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120326091356')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120401221608')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120407070001')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120407071132')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120408015359')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120410011009')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120410030955')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120411031907')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120412035426')[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120418072318')
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120418082423')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120424221314')
  [1m[36m (2.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120501012131')[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120501012737')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120501031029')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120502005624')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120502010636')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120503000000')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120503072748')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120508233738')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120510004528')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120510021123')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120510035625')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120510041044')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120510131407')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120516044553')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120521041044')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120601035604')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120607070103')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120607190000')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120611230708')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120611231344')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120611231807')[0m
  [1m[35m (1.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120611232101')
  [1m[36m (0.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120611232248')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120611233010')
  [1m[36m (0.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120614034800')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120614054726')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120621042529')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120622014537')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120625002216')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120625002902')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120625024753')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120627063734')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120628053029')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120704081327')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120707012532')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120709031235')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120710011556')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120710230035')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120712140754')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120713210802')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120714011447')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120715235737')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120717044425')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120718141208')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120718141209')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120718141210')
  [1m[36m (0.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120718141211')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120719062306')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120724025144')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120805234121')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120805234312')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120805234436')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120807050655')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120808011822')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120808042420')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120810053246')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120811064555')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120818230136')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120821031839')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120904050454')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120905023144')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120911042744')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120913002847')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120919050300')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120924032713')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120925023410')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120925213600')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120926024558')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120927030804')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120927034448')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120927092327')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120930010534')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20120930014241')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20120930022453')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121003033500')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121008002211')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121008010612')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121010214955')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121011042721')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121025050748')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121025235642')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121030014815')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121102220704')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121107025313')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121112023734')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121112031644')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121112221643')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121115004125')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121115012701')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121120010642')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121120042440')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121122024353')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121122052241')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121123012028')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121123033808')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121123040721')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121127010116')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121127012059')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121127024737')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121127094030')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121203003047')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121204033009')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121204065707')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121210210130')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121214034713')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121214041654')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121214083311')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20121217032530')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20121219081051')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130107033705')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130108003731')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130108003954')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130108004432')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130108004633')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130114223848')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130124064259')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130225025640')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130227021540')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130227021541')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130227030124')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130227032440')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130301060610')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130304011436')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130304020700')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130304033510')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130304040051')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130306223703')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130312231315')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130312231316')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130313005149')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130313050030')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130314013601')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130318031103')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130318033458')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130321035625')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130323063336')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130326013603')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130326220507')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130327015318')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130327031958')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130402220904')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130403112049')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130408002137')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130409020408')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130416040312')[0m
  [1m[35m (27.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130418032816')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130418033925')[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130422023906')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130422085712')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130502031855')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130503040358')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130508035344')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130508041523')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130515041437')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130515104233')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130515104453')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130515105626')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130515123316')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130520091855')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130524022254')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130527015722')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130527055324')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130530054142')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130601065139')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130605041615')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130606025423')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130606034416')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130606044045')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130609224221')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130610001906')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130610051804')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130611033610')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130614041232')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130615071859')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130617033220')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130617091617')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130617220238')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130617220500')
  [1m[36m (1.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130619014643')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130619093833')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130620233232')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130621014915')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130624043440')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130625050817')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130626233929')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130627002717')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130629085841')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130629092802')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130704051611')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130712000446')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130712035504')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130721234605')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130724015029')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130724024039')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130728044913')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130728054759')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130730000000')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130730093311')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130731045757')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130807015437')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130807015738')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130815040255')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130816001412')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130820022915')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130822023741')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130825225809')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130825230635')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130826012641')
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130827014218')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130828193943')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130903214957')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130909075025')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130909081731')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130910015626')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130910045838')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130910070551')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130919003502')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130925002533')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130927023058')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130930094813')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131001055333')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131003032211')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131010011150')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131010025113')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131024030111')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131029013350')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131121001637')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131125232607')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131127213528')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131128014456')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131202050646')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131204223341')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131205020955')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131209004408')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131209011631')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131209035746')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140106020130')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140107211331')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140206023957')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140207033248')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140211233243')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140213024300')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140214222713')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140214223622')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140214224038')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140215042942')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140220222310')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140222070435')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140222223848')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140222234734')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140227000252')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140306061922')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140317012855')[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140318020202')
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140318020304')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140318051339')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140325024625')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140327010054')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140406041115')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140517010701')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140520021918')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140605024255')
  [1m[36m (1.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140605032336')[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140605225017')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140608052627')[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140609012258')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140611021032')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140611041907')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140611071451')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140611100737')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140616012702')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140616022958')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140616234758')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140617001229')
  [1m[36m (1.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140617021219')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140622232955')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140701005906')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140702205123')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140708053114')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140714230729')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140715215610')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140716050819')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140719042918')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140731225137')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140731225442')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140807012527')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140810033902')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140813223218')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140814014535')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140814022929')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140819225011')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140819225704')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140902023416')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140909003024')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140911010851')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140911225702')
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m


Started GET "/" for 127.0.0.1 at 2014-10-22 12:04:30 +0300
Processing by MarketingController#index as HTML
  Rendered application/_social_metadata.html.haml (27.8ms)
  Rendered application/_flash_messages.html.haml (3.3ms)
  Rendered application/_heap_analytics.html.haml (3.8ms)
  Rendered marketing/index.html.haml (13330.6ms)
Completed 200 OK in 13592ms (Views: 13409.5ms | ActiveRecord: 0.0ms)


Started GET "/detect_locale?locale=en" for 127.0.0.1 at 2014-10-22 12:04:46 +0300
Processing by DetectLocaleController#show as HTML
  Parameters: {"locale"=>"en"}
Completed 200 OK in 31ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-10-22 12:07:30 +0300
Processing by Users::SessionsController#new as HTML
  Rendered devise/shared/_omniauth_buttons.html.haml (5.8ms)
  Rendered devise/sessions/_form.html.haml (152.9ms)
  Rendered devise/sessions/new.html.haml within layouts/pages (170.5ms)
  Rendered application/_social_metadata.html.haml (17.7ms)
  Rendered application/_flash_messages.html.haml (2.0ms)
  Rendered application/_footer_links.html.haml (3.7ms)
  Rendered application/_footer.html.haml (51.4ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 18817ms (Views: 18757.3ms | ActiveRecord: 9.9ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-10-22 12:07:59 +0300
Processing by Users::RegistrationsController#new as HTML
  Rendered devise/shared/_omniauth_buttons.html.haml (2.1ms)
  Rendered devise/registrations/_form.html.haml (33.5ms)
  Rendered devise/registrations/new.html.haml within layouts/pages (49.6ms)
  Rendered application/_social_metadata.html.haml (6.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (61.9ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1186ms (Views: 1180.3ms | ActiveRecord: 0.0ms)


Started POST "/users" for 127.0.0.1 at 2014-10-22 12:08:19 +0300
Processing by Users::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "user"=>{"name"=>"vladimir", "email"=>"teamco@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "honeypot"=>""}, "commit"=>"Create account"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.8ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."key" = 'wbZrEWYv' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."key" = 'wbZrEWYv' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."email" = 'teamco@gmail.com' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."unsubscribe_token" = 'RqVyZE8Awv8J_VEPQipQ' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users"  WHERE (username = 'vladimir')
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "users" ("avatar_initials", "avatar_kind", "created_at", "email", "email_api_key", "encrypted_password", "key", "name", "unsubscribe_token", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["avatar_initials", "V"], ["avatar_kind", "gravatar"], ["created_at", "2014-10-22 09:08:19.268480"], ["email", "teamco@gmail.com"], ["email_api_key", "9f8ec14535972e77a9c6c2e0eaa4b6fb"], ["encrypted_password", "$2a$10$VV0vJkBRviwj3/yU49vu9uHrfrM8e9INITClMknnSITxxySTGEd32"], ["key", "wbZrEWYv"], ["name", "vladimir"], ["unsubscribe_token", "RqVyZE8Awv8J_VEPQipQ"], ["updated_at", "2014-10-22 09:08:19.268480"], ["username", "vladimir"]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "users" SET "current_sign_in_at" = $1, "current_sign_in_ip" = $2, "last_sign_in_at" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = 1  [["current_sign_in_at", "2014-10-22 09:08:19.877950"], ["current_sign_in_ip", "127.0.0.1"], ["last_sign_in_at", "2014-10-22 09:08:19.877950"], ["last_sign_in_ip", "127.0.0.1"], ["sign_in_count", 1], ["updated_at", "2014-10-22 09:08:19.879968"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "detected_locale" = $1, "updated_at" = $2 WHERE "users"."id" = 1[0m  [["detected_locale", "en"], ["updated_at", "2014-10-22 09:08:19.888740"]]
  [1m[35m (0.7ms)[0m  COMMIT
Redirected to http://localhost:3000/dashboard
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "time_zone" = $1, "updated_at" = $2 WHERE "users"."id" = 1  [["time_zone", "Asia/Damascus"], ["updated_at", "2014-10-22 09:08:19.939359"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Completed 302 Found in 875ms (ActiveRecord: 11.1ms)


Started GET "/dashboard" for 127.0.0.1 at 2014-10-22 12:08:19 +0300
Processing by DashboardController#show as HTML
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35m (1.8ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (3.1ms)[0m  SELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (NULL)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (NULL))))  ORDER BY motions.closing_at ASC, last_comment_at DESC LIMIT 20 OFFSET 0
  [1m[36mDiscussionReader Load (1.0ms)[0m  [1mSELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND 1=0[0m
  [1m[35mMotionReader Load (0.8ms)[0m  SELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND 1=0
  [1m[36mVote Load (1.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 1 AND 1=0[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id IS NULL)  ORDER BY LOWER(name)  [["user_id", 1]]
  Rendered dashboard/show.html.haml within layouts/application (13.6ms)
  Rendered application/_social_metadata.html.haml (6.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (5.6ms)
  Rendered application/_search.html.haml (8.3ms)
  Rendered base/_avatar.html.haml (3.2ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (11.4ms)
  Rendered application/_header.html.haml (103.5ms)
  [1m[36mAnnouncement Load (0.8ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 09:08:20.454112' and ends_at > '2014-10-22 09:08:20.454112')[0m
  Rendered application/_announcements.html.haml (3.9ms)
  Rendered application/_flash_messages.html.haml (1.9ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (9.0ms)
  Rendered application/_intercom_tracker.html.haml (2.0ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
Completed 200 OK in 1969ms (Views: 1303.8ms | ActiveRecord: 54.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 12:08:22 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (25.7ms)
Completed 200 OK in 103ms (Views: 48.8ms | ActiveRecord: 4.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 12:08:22 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (NULL))[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (116.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (252.2ms)
Completed 200 OK in 307ms (Views: 267.2ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:08:23 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (2.1ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (NULL)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (NULL)))) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 133ms (Views: 39.9ms | ActiveRecord: 5.4ms)


Started GET "/g/new" for 127.0.0.1 at 2014-10-22 12:08:37 +0300
Processing by GroupsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mCategory Load (0.7ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered groups/_form.html.haml (204.8ms)
  Rendered groups/new.html.haml within layouts/application (242.2ms)
  Rendered application/_social_metadata.html.haml (6.6ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (1.1ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (13.9ms)
  Rendered application/_header.html.haml (46.5ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 09:08:37.710556' and ends_at > '2014-10-22 09:08:37.710556')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.2ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1613ms (Views: 1487.9ms | ActiveRecord: 5.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 12:08:40 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (3.1ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.2ms)
Completed 200 OK in 41ms (Views: 15.7ms | ActiveRecord: 4.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 12:08:40 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (NULL))  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (28.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (34.9ms)
Completed 200 OK in 58ms (Views: 42.7ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:08:40 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (NULL)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (NULL)))) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 135ms (Views: 1.0ms | ActiveRecord: 5.0ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-10-22 12:08:47 +0300
Processing by Users::RegistrationsController#new as HTML
  Rendered devise/shared/_omniauth_buttons.html.haml (3.8ms)
  Rendered devise/registrations/_form.html.haml (20.3ms)
  Rendered devise/registrations/new.html.haml within layouts/pages (78.3ms)
  Rendered application/_social_metadata.html.haml (13.1ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (56.4ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1424ms (Views: 1418.8ms | ActiveRecord: 0.0ms)


Started POST "/g" for 127.0.0.1 at 2014-10-22 12:08:53 +0300
Processing by GroupsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "group"=>{"name"=>"test", "description"=>"", "category_id"=>"", "visible_to"=>"members", "membership_granted_upon"=>"invitation", "discussion_privacy_options"=>"private_only", "members_can_add_members"=>"0", "members_can_create_subgroups"=>"1", "members_can_start_discussions"=>"1", "members_can_edit_discussions"=>"1", "members_can_edit_comments"=>"1", "members_can_raise_motions"=>"1", "members_can_vote"=>"1", "parent_id"=>""}, "commit"=>"Start group!"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mGroup Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "groups"  WHERE "groups"."key" = 'yGs3VIU9' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM "groups"  WHERE "groups"."key" = 'yGs3VIU9' LIMIT 1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "groups" ("created_at", "description", "discussion_privacy_options", "enabled_beta_features", "full_name", "key", "membership_granted_upon", "name", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["created_at", "2014-10-22 09:08:53.375567"], ["description", ""], ["discussion_privacy_options", "private_only"], ["enabled_beta_features", "--- []\n"], ["full_name", "test"], ["key", "yGs3VIU9"], ["membership_granted_upon", "invitation"], ["name", "test"], ["updated_at", "2014-10-22 09:08:53.375567"]]
  [1m[35m (0.5ms)[0m  SELECT pg_try_advisory_lock(2085799232,0) AS td045a2cf15f916d56af05d34798e9978
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "group_hierarchies" ("ancestor_id", "descendant_id", "generations") VALUES ($1, $2, $3)[0m  [["ancestor_id", 1], ["descendant_id", 1], ["generations", 0]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1  [["parent_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT pg_advisory_unlock(2085799232,0) AS tc1ce16a73ec8fa9c784d358d527ad71d[0m
  [1m[35m (59.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "groups" SET "enabled_beta_features" = $1, "setup_completed_at" = $2, "updated_at" = $3 WHERE "groups"."id" = 1  [["enabled_beta_features", "--- []\n"], ["setup_completed_at", "2014-10-22 09:08:53.577517"], ["updated_at", "2014-10-22 09:08:53.578664"]]
  [1m[36m (175.3ms)[0m  [1mCOMMIT[0m
  [1m[35mMembership Load (0.4ms)[0m  SELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "memberships"."user_id" = 1  ORDER BY "memberships"."id" ASC LIMIT 1  [["group_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMembership Exists (0.5ms)[0m  SELECT  1 AS one FROM "memberships"  WHERE ("memberships"."user_id" = 1 AND "memberships"."group_id" = 1) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "memberships" ("created_at", "group_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 09:08:53.788301"], ["group_id", 1], ["updated_at", "2014-10-22 09:08:53.788301"], ["user_id", 1]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "groups" SET "memberships_count" = COALESCE("memberships_count", 0) + 1 WHERE "groups"."id" = 1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "users" SET "memberships_count" = COALESCE("memberships_count", 0) + 1 WHERE "users"."id" = 1[0m
  [1m[35m (139.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "memberships" SET "admin" = $1, "updated_at" = $2 WHERE "memberships"."id" = 1  [["admin", "t"], ["updated_at", "2014-10-22 09:08:53.935862"]]
  [1m[36m (101.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/g/yGs3VIU9/test
Completed 302 Found in 734ms (ActiveRecord: 493.1ms)


Started GET "/g/yGs3VIU9/test" for 127.0.0.1 at 2014-10-22 12:08:54 +0300
Processing by GroupsController#show as HTML
  Parameters: {"id"=>"yGs3VIU9", "slug"=>"test"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."archived_at" IS NULL AND "groups"."key" = 'yGs3VIU9' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."admin" = 't' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["parent_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (1.9ms)[0m  SELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY motions.closing_at ASC, last_activity_at DESC LIMIT 20 OFFSET 0
  [1m[36mDiscussionReader Load (0.4ms)[0m  [1mSELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND 1=0[0m
  [1m[35mMotionReader Load (0.4ms)[0m  SELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND 1=0
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 1 AND 1=0[0m
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered groups/_privacy_dropdown.html.haml (4.3ms)
  Rendered application/_filter_discussions_buttons.html.haml (8.1ms)
  Rendered discussions/_discussion_list.html.haml (9.9ms)
  [1m[35mGroup Load (0.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered groups/_invite_button.html.haml (3.8ms)
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mMembership Load (0.5ms)[0m  SELECT  "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "memberships"."group_id" = 1  ORDER BY "memberships"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "memberships"  WHERE "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f') AND "memberships"."group_id" = 1  [["user_id", 1]]
  Rendered groups/_setup_next_steps.html.haml (5.0ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (group_id = 1 AND user_id = 1)  ORDER BY "memberships"."id" ASC LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_follow.html.haml (9.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["parent_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_subgroups.html.haml (8.0ms)
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))
  [1m[36mMembershipRequest Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "membership_requests"  WHERE "membership_requests"."group_id" = $1 AND "membership_requests"."response" IS NULL LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_membership_requests.html.haml (16.9ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "users"."id" ASC LIMIT 15[0m  [["group_id", 1]]
  Rendered base/_avatar.html.haml (3.5ms)
  Rendered base/_linked_avatar.html.haml (12.9ms)
  Rendered groups/_members.html.haml (50.5ms)
  Rendered groups/show.html.haml within layouts/application (513.3ms)
  Rendered application/_social_metadata.html.haml (6.7ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (6.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.2ms)
  Rendered application/_header.html.haml (37.0ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 09:08:54.205755' and ends_at > '2014-10-22 09:08:54.205755')
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (9.2ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 2258ms (Views: 2086.0ms | ActiveRecord: 21.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 12:08:57 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 21ms (Views: 7.7ms | ActiveRecord: 1.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 12:08:57 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (107.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (117.6ms)
Completed 200 OK in 201ms (Views: 133.4ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:08:57 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (2.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 4.5ms)


Started GET "/d/new?group_id=1" for 127.0.0.1 at 2014-10-22 12:09:07 +0300
Processing by DiscussionsController#new as HTML
  Parameters: {"group_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = 1 LIMIT 1[0m
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (8.1ms)
  Rendered discussions/_markdown_setting.html.haml (5.2ms)
  Rendered application/_hint.html.haml (6.1ms)
  Rendered discussions/_form.html.haml (216.0ms)
  Rendered discussions/new.html.haml within layouts/application (280.1ms)
  Rendered application/_social_metadata.html.haml (9.6ms)
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.2ms)
  Rendered application/_header.html.haml (59.0ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 09:09:07.628195' and ends_at > '2014-10-22 09:09:07.628195')
  Rendered application/_announcements.html.haml (2.0ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1898ms (Views: 1856.9ms | ActiveRecord: 4.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 12:09:10 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.5ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (4.1ms)
Completed 200 OK in 132ms (Views: 12.9ms | ActiveRecord: 2.2ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 12:09:10 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (28.8ms)
  Rendered notifications/groups_tree_dropdown.html.haml (35.2ms)
Completed 200 OK in 54ms (Views: 37.0ms | ActiveRecord: 4.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:09:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.1ms)
Completed 200 OK in 31ms (Views: 0.9ms | ActiveRecord: 3.9ms)


Started POST "/d" for 127.0.0.1 at 2014-10-22 12:09:18 +0300
Processing by DiscussionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "discussion"=>{"group_id"=>"1", "title"=>"title", "description"=>"", "private"=>"true", "uses_markdown"=>"false"}, "commit"=>"Start discussion"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mDiscussion Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussions"  WHERE "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM "discussions"  WHERE "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.1ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.9ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "discussions"  WHERE "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "discussions" ("author_id", "created_at", "description", "group_id", "key", "last_activity_at", "last_comment_at", "private", "title", "updated_at", "uses_markdown") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["author_id", 1], ["created_at", "2014-10-22 09:09:18.413694"], ["description", ""], ["group_id", 1], ["key", "YPUgfENW"], ["last_activity_at", "2014-10-22 09:09:18.414216"], ["last_comment_at", "2014-10-22 09:09:18.414298"], ["private", "t"], ["title", "title"], ["updated_at", "2014-10-22 09:09:18.413694"], ["uses_markdown", "f"]]
  [1m[36mSQL (33.0ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "whodunnit") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2014-10-22 09:09:18.460991"], ["event", "create"], ["item_id", 1], ["item_type", "Discussion"], ["whodunnit", 1]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "groups" SET "discussions_count" = COALESCE("discussions_count", 0) + 1 WHERE "groups"."id" = 1
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mEvent Load (33.9ms)[0m  SELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 1 AND "events"."discussion_id" = 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["created_at", "2014-10-22 09:09:18.626263"], ["discussion_id", 1], ["eventable_id", 1], ["eventable_type", "Discussion"], ["kind", "new_discussion"], ["sequence_id", 1], ["updated_at", "2014-10-22 09:09:18.626263"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1  [["last_activity_at", "2014-10-22 09:09:18.626263"], ["updated_at", "2014-10-22 09:09:18.631849"]]
  [1m[36m (16.0ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "discussion_readers" ("created_at", "discussion_id", "following", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 09:09:18.683030"], ["discussion_id", 1], ["following", "t"], ["updated_at", "2014-10-22 09:09:18.683030"], ["user_id", 1]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.7ms)[0m  SELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id != 1) AND "users"."email_followed_threads" = 't'
  [1m[36mUser Load (2.5ms)[0m  [1mSELECT DISTINCT "users".* FROM "users" INNER JOIN "memberships" ON "memberships"."user_id" = "users"."id" AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id != 1) AND "users"."email_followed_threads" = 'f' AND (memberships.group_id = 1) AND (users.email_new_discussions_and_proposals = 't') AND (memberships.email_new_discussions_and_proposals = 't')[0m
  [1m[35m (1.0ms)[0m  SELECT "users"."id" FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE))
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT DISTINCT "users".* FROM "users" INNER JOIN "memberships" "memberships_users" ON "memberships_users"."user_id" = "users"."id" AND "memberships_users"."is_suspended" = 'f' AND "memberships_users"."archived_at" IS NULL INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."deactivated_at" IS NULL AND (users.id NOT IN (1)) AND (memberships.group_id = 1) AND (users.email_new_discussions_and_proposals = 't') AND (memberships.email_new_discussions_and_proposals = 't')[0m  [["group_id", 1]]
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 302 Found in 371ms (ActiveRecord: 114.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 12:09:18 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mGroup Load (24.7ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (6.2ms)
  [1m[36mMembership Load (0.7ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (12.3ms)
  Rendered discussions/_privacy_icon.html.haml (3.4ms)
  Rendered discussions/_title.html.haml (22.7ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.6ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (16.1ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.6ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered discussions/_activity.html.haml (19.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (3.2ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (26.1ms)
  Rendered discussions/show.html.haml within layouts/application (164.7ms)
  Rendered application/_social_metadata.html.haml (5.5ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.1ms)
  Rendered application/_header.html.haml (33.3ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 09:09:18.753291' and ends_at > '2014-10-22 09:09:18.753291')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (7.9ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (20.9ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 09:09:18.626263')  [["discussion_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 09:09:18.626263')[0m  [["discussion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_comments_count" = $2, "read_items_count" = $3, "updated_at" = $4 WHERE "discussion_readers"."id" = 1  [["last_read_at", "2014-10-22 09:09:18.626263"], ["read_comments_count", 0], ["read_items_count", 1], ["updated_at", "2014-10-22 09:09:20.138662"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1400ms (Views: 1254.8ms | ActiveRecord: 62.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 12:09:21 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.5ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 90ms (Views: 10.5ms | ActiveRecord: 1.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 12:09:21 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (25.1ms)
Completed 200 OK in 40ms (Views: 27.1ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:09:21 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.1ms)
Completed 200 OK in 69ms (Views: 0.8ms | ActiveRecord: 3.7ms)


Started GET "/d/YPUgfENW/new_proposal" for 127.0.0.1 at 2014-10-22 12:09:23 +0300
Processing by DiscussionsController#new_proposal as HTML
  Parameters: {"id"=>"YPUgfENW"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (6.6ms)
  Rendered motions/_form.html.haml (25.4ms)
  Rendered application/_hint.html.haml (0.5ms)
  Rendered motions/new.html.haml within layouts/application (40.3ms)
  Rendered application/_social_metadata.html.haml (5.3ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (34.2ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 09:09:23.286818' and ends_at > '2014-10-22 09:09:23.286818')[0m
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (7.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1245ms (Views: 1209.5ms | ActiveRecord: 5.3ms)


Started GET "/localisation/datetime_input_translations?authenticity_token=L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI%3D" for 127.0.0.1 at 2014-10-22 12:09:25 +0300
Processing by LocalisationController#datetime_input_translations as JS
  Parameters: {"authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI="}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  Rendered localisation/datetime_input_translations.js.erb (4.4ms)
Completed 200 OK in 38ms (Views: 27.6ms | ActiveRecord: 0.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 12:09:25 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (4.1ms)
Completed 200 OK in 158ms (Views: 13.8ms | ActiveRecord: 1.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 12:09:25 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (29.9ms)
Completed 200 OK in 66ms (Views: 44.6ms | ActiveRecord: 4.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:09:26 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 1.1ms | ActiveRecord: 4.4ms)


Started POST "/m" for 127.0.0.1 at 2014-10-22 12:09:33 +0300
Processing by MotionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "motion"=>{"name"=>"course", "closing_at"=>"2014-10-25 11:00", "description"=>"", "discussion_id"=>"1"}, "commit"=>"Create proposal"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (5.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotion Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu' LIMIT 1[0m
  [1m[35mCACHE (0.1ms)[0m  SELECT  1 AS one FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "motions" ("author_id", "closing_at", "created_at", "description", "discussion_id", "key", "name", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_id", 1], ["closing_at", "2014-10-25 09:00:00.000000"], ["created_at", "2014-10-22 09:09:33.435995"], ["description", ""], ["discussion_id", 1], ["key", "fd2q7DSu"], ["name", "course"], ["updated_at", "2014-10-22 09:09:33.435995"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "motions_count" = COALESCE("motions_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "whodunnit") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2014-10-22 09:09:33.445229"], ["event", "create"], ["item_id", 1], ["item_type", "Motion"], ["whodunnit", 1]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 2 AND "events"."discussion_id" = 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 09:09:33.464745"], ["discussion_id", 1], ["eventable_id", 1], ["eventable_type", "Motion"], ["kind", "new_motion"], ["sequence_id", 2], ["updated_at", "2014-10-22 09:09:33.464745"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_activity_at", "2014-10-22 09:09:33.464745"], ["updated_at", "2014-10-22 09:09:33.477650"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id != 1) AND "users"."email_followed_threads" = 't'
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT DISTINCT "users".* FROM "users" INNER JOIN "memberships" ON "memberships"."user_id" = "users"."id" AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id != 1) AND "users"."email_followed_threads" = 'f' AND (memberships.group_id = 1) AND (users.email_new_discussions_and_proposals = 't') AND (memberships.email_new_discussions_and_proposals = 't')[0m
  [1m[35m (1.0ms)[0m  SELECT "users"."id" FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE))
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT DISTINCT "users".* FROM "users" INNER JOIN "memberships" "memberships_users" ON "memberships_users"."user_id" = "users"."id" AND "memberships_users"."is_suspended" = 'f' AND "memberships_users"."archived_at" IS NULL INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."deactivated_at" IS NULL AND (users.id NOT IN (1)) AND (memberships.group_id = 1) AND (users.email_new_discussions_and_proposals = 't') AND (memberships.email_new_discussions_and_proposals = 't')[0m  [["group_id", 1]]
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 302 Found in 141ms (ActiveRecord: 28.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 12:09:33 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.6ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.4ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.2ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (3.8ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.1ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (9.9ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.5ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.6ms)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  Rendered motions/_vote_button.html.haml (37.8ms)
  Rendered motions/_vote_button.html.haml (7.7ms)
  Rendered motions/_vote_button.html.haml (6.3ms)
  Rendered motions/_vote_button.html.haml (32.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (5.0ms)
  Rendered motions/_motion.html.haml (183.8ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (6.9ms)
  Rendered discussions/_activity.html.haml (57.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (16.3ms)
  Rendered discussions/show.html.haml within layouts/application (310.2ms)
  Rendered application/_social_metadata.html.haml (5.3ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (31.2ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 09:09:33.549862' and ends_at > '2014-10-22 09:09:33.549862')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (9.0ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 09:09:33.464745')  [["discussion_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 09:09:33.464745')[0m  [["discussion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_items_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 1  [["last_read_at", "2014-10-22 09:09:33.464745"], ["read_items_count", 2], ["updated_at", "2014-10-22 09:09:35.054381"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 09:09:35.057239')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "motion_readers" ("created_at", "last_read_at", "motion_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 09:09:35.070952"], ["last_read_at", "2014-10-22 09:09:35.057239"], ["motion_id", 1], ["updated_at", "2014-10-22 09:09:35.070952"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1537ms (Views: 1433.7ms | ActiveRecord: 27.2ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 12:09:36 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (2.1ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (1.5ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (31.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (39.8ms)
Completed 200 OK in 130ms (Views: 71.4ms | ActiveRecord: 6.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:09:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 12:09:36 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 22ms (Views: 8.1ms | ActiveRecord: 2.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:10:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.7ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 12:12:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 1.0ms | ActiveRecord: 3.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:03:59 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (101.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 147ms (Views: 0.8ms | ActiveRecord: 104.8ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:06:00 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.6ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.7ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (6.2ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (8.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (14.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.5ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.4ms)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  Rendered motions/_vote_button.html.haml (1.6ms)
  Rendered motions/_vote_button.html.haml (1.7ms)
  Rendered motions/_vote_button.html.haml (1.3ms)
  Rendered motions/_vote_button.html.haml (1.3ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (65.5ms)
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mUser Load (3.2ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.2ms)
  Rendered discussions/_activity.html.haml (42.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (53.1ms)
  Rendered discussions/show.html.haml within layouts/application (283.6ms)
  Rendered application/_social_metadata.html.haml (8.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.6ms)
  Rendered application/_search.html.haml (121.8ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (8.6ms)
  Rendered application/_header.html.haml (232.8ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:06:00.461375' and ends_at > '2014-10-22 10:06:00.461375')
  Rendered application/_announcements.html.haml (2.2ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (2.7ms)
  Rendered application/_footer.html.haml (15.2ms)
  Rendered application/_intercom_tracker.html.haml (0.7ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:06:03.396043')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:06:03.396043"], ["updated_at", "2014-10-22 10:06:03.410775"]]
  [1m[35m (0.7ms)[0m  COMMIT
Completed 200 OK in 2967ms (Views: 2848.3ms | ActiveRecord: 42.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:06:07 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (3.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.6ms)
Completed 200 OK in 59ms (Views: 39.7ms | ActiveRecord: 4.1ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:06:07 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (42.7ms)
Completed 200 OK in 167ms (Views: 141.2ms | ActiveRecord: 4.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:06:08 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 1.5ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:07:08 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:09:08 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:12:08 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 380ms (Views: 1.3ms | ActiveRecord: 22.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:13:14 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:13:16.276535' and ends_at > '2014-10-22 10:13:16.276535')[0m
Completed 500 Internal Server Error in 112ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NameError - undefined local variable or method `action' for #<DiscussionsController:0x007fad6e88be90>:
   () Users/teamco/Sites/loomio/app/controllers/discussions_controller.rb:233:in `we_dont_serve_images_here_google_bot'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:160:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:160:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/ed060da0f6604a9a/variables" for 127.0.0.1 at 2014-10-22 13:13:16 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:18:59 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (2.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (5.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (2.8ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.7ms)
  Rendered groups/_title.html.haml (14.5ms)
  [1m[35mMembership Load (0.7ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.5ms)
  Rendered discussions/_privacy_icon.html.haml (1.2ms)
  Rendered discussions/_title.html.haml (15.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.7ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (21.6ms)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  Rendered motions/_vote_button.html.haml (1.8ms)
  Rendered motions/_vote_button.html.haml (1.6ms)
  Rendered motions/_vote_button.html.haml (1.1ms)
  Rendered motions/_vote_button.html.haml (5.0ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (70.1ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (3.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (5.0ms)
  Rendered discussions/_activity.html.haml (94.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered discussions/_markdown_setting.html.haml (1.1ms)
  Rendered discussions/_add_comment.html.haml (85.2ms)
  Rendered discussions/show.html.haml within layouts/application (394.1ms)
  Rendered application/_social_metadata.html.haml (8.8ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (7.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.3ms)
  Rendered application/_user_dropdown.html.haml (5.8ms)
  Rendered application/_header.html.haml (61.7ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:19:02.252870' and ends_at > '2014-10-22 10:19:02.252870')
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.7ms)
  Rendered application/_footer.html.haml (12.2ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (20.5ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:19:05.576014')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:19:05.576014"], ["updated_at", "2014-10-22 10:19:05.605715"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 3509ms (Views: 2660.4ms | ActiveRecord: 86.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:19:08 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (53.6ms)
Completed 200 OK in 150ms (Views: 89.3ms | ActiveRecord: 4.2ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:19:10 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (34.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (42.4ms)
Completed 200 OK in 58ms (Views: 46.9ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:19:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (2.2ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.2ms)
Completed 200 OK in 46ms (Views: 5.3ms | ActiveRecord: 3.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:20:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 36ms (Views: 0.6ms | ActiveRecord: 3.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:22:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:25:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:29:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.2ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'



ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:34:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 72ms (Views: 0.6ms | ActiveRecord: 3.4ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:34:41 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (55.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.8ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.2ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (13.7ms)
  Rendered discussions/_privacy_icon.html.haml (3.0ms)
  Rendered discussions/_title.html.haml (21.1ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (15.0ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.6ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  Rendered motions/_vote_button.html.haml (1.5ms)
  Rendered motions/_vote_button.html.haml (1.4ms)
  Rendered motions/_vote_button.html.haml (1.0ms)
  Rendered motions/_vote_button.html.haml (0.9ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (42.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.5ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.3ms)
  Rendered discussions/_activity.html.haml (16.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (1.2ms)
  Rendered discussions/_add_comment.html.haml (18.3ms)
  Rendered discussions/show.html.haml within layouts/application (159.0ms)
  Rendered application/_social_metadata.html.haml (6.3ms)
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.6ms)
  Rendered application/_search.html.haml (14.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.8ms)
  Rendered application/_header.html.haml (63.4ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:34:41.165858' and ends_at > '2014-10-22 10:34:41.165858')[0m
  Rendered application/_announcements.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (9.2ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (34.0ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:34:42.798855')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 10:34:42.798855"], ["updated_at", "2014-10-22 10:34:42.811189"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1731ms (Views: 1534.4ms | ActiveRecord: 109.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:34:46 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (3.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (5.7ms)
Completed 200 OK in 118ms (Views: 93.3ms | ActiveRecord: 4.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:34:46 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (24.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (56.6ms)
Completed 200 OK in 132ms (Views: 106.7ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:34:46 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (4.2ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 32ms (Views: 1.3ms | ActiveRecord: 7.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:35:46 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 1.3ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:37:46 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:39:16 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.1ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (12.6ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.7ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (10.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (16.9ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  Rendered motions/_vote_button.html.haml (1.4ms)
  Rendered motions/_vote_button.html.haml (1.0ms)
  Rendered motions/_vote_button.html.haml (1.1ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (49.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered discussions/_activity.html.haml (38.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (16.7ms)
  Rendered discussions/show.html.haml within layouts/application (198.6ms)
  Rendered application/_social_metadata.html.haml (5.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.3ms)
  Rendered application/_search.html.haml (6.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.0ms)
  Rendered application/_header.html.haml (37.9ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:39:19.367164' and ends_at > '2014-10-22 10:39:19.367164')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.5ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:39:21.260294')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:39:21.260294"], ["updated_at", "2014-10-22 10:39:21.281581"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 1981ms (Views: 1534.3ms | ActiveRecord: 61.9ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:39:23 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 44ms (Views: 13.9ms | ActiveRecord: 3.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:39:24 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (34.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (44.0ms)
Completed 200 OK in 71ms (Views: 58.1ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:39:24 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 31ms (Views: 1.1ms | ActiveRecord: 4.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:40:24 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 3.1ms)


Started POST "/d/YPUgfENW/add_comment" for 127.0.0.1 at 2014-10-22 13:41:29 +0300
Processing by DiscussionsController#add_comment as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "comment"=>"this is a discussion1", "uses_markdown"=>"false", "commit"=>"Post comment", "id"=>"YPUgfENW"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
>>>>>>>>>>>>>>>> add_comment
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (14.9ms)[0m  INSERT INTO "comments" ("body", "created_at", "discussion_id", "liker_ids_and_names", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["body", "this is a discussion1"], ["created_at", "2014-10-22 10:41:29.836406"], ["discussion_id", 1], ["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 10:41:29.836406"], ["user_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "whodunnit") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2014-10-22 10:41:29.857136"], ["event", "create"], ["item_id", 1], ["item_type", "Comment"], ["whodunnit", 1]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "discussions" SET "comments_count" = COALESCE("comments_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "discussions" SET "last_comment_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_comment_at", "2014-10-22 10:41:29.836406"], ["updated_at", "2014-10-22 10:41:29.865316"]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:41:29.836406')[0m  [["discussion_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:41:29.836406')  [["discussion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "discussion_readers" SET "last_read_at" = $1, "read_comments_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:41:29.836406"], ["read_comments_count", 1], ["updated_at", "2014-10-22 10:41:29.886418"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mEvent Load (0.5ms)[0m  SELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 3 AND "events"."discussion_id" = 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["created_at", "2014-10-22 10:41:29.836406"], ["discussion_id", 1], ["eventable_id", 1], ["eventable_type", "Comment"], ["kind", "new_comment"], ["sequence_id", 3], ["updated_at", "2014-10-22 10:41:29.904166"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1  [["last_activity_at", "2014-10-22 10:41:29.836406"], ["updated_at", "2014-10-22 10:41:29.915340"]]
  [1m[36m (15.2ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)  [["group_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "users"."id" FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)[0m  [["group_id", 1]]
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id NOT IN (1)) AND "users"."email_followed_threads" = 't'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  Rendered base/_avatar.html.haml (3.9ms)
  Rendered base/_linked_avatar.html.haml (16.7ms)
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  Rendered comments/_comment_likes.html.haml (6.6ms)
  Rendered comments/_comment.html.haml (129.4ms)
  Rendered discussions/add_comment.js.erb (147.0ms)
Completed 200 OK in 382ms (Views: 175.5ms | ActiveRecord: 56.2ms)


Started POST "/d/YPUgfENW/add_comment" for 127.0.0.1 at 2014-10-22 13:41:48 +0300
Processing by DiscussionsController#add_comment as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "comment"=>"discussion2", "uses_markdown"=>"false", "commit"=>"Post comment", "id"=>"YPUgfENW"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (1.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
>>>>>>>>>>>>>>>> add_comment
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "comments" ("body", "created_at", "discussion_id", "liker_ids_and_names", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["body", "discussion2"], ["created_at", "2014-10-22 10:41:48.721515"], ["discussion_id", 1], ["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 10:41:48.721515"], ["user_id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "whodunnit") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 10:41:48.726077"], ["event", "create"], ["item_id", 2], ["item_type", "Comment"], ["whodunnit", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "discussions" SET "comments_count" = COALESCE("comments_count", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "discussions" SET "last_comment_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1  [["last_comment_at", "2014-10-22 10:41:48.721515"], ["updated_at", "2014-10-22 10:41:48.732890"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.7ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:41:48.721515')  [["discussion_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:41:48.721515')[0m  [["discussion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_comments_count" = $2, "read_items_count" = $3, "updated_at" = $4 WHERE "discussion_readers"."id" = 1  [["last_read_at", "2014-10-22 10:41:48.721515"], ["read_comments_count", 2], ["read_items_count", 3], ["updated_at", "2014-10-22 10:41:48.754214"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mEvent Load (0.7ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 4 AND "events"."discussion_id" = 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 10:41:48.721515"], ["discussion_id", 1], ["eventable_id", 2], ["eventable_type", "Comment"], ["kind", "new_comment"], ["sequence_id", 4], ["updated_at", "2014-10-22 10:41:48.764989"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_activity_at", "2014-10-22 10:41:48.721515"], ["updated_at", "2014-10-22 10:41:48.768973"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)[0m  [["group_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "users"."id" FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)  [["group_id", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id NOT IN (1)) AND "users"."email_followed_threads" = 't'[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (10.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (70.1ms)
  Rendered discussions/add_comment.js.erb (72.0ms)
Completed 200 OK in 187ms (Views: 83.6ms | ActiveRecord: 22.8ms)


Started GET "/g/yGs3VIU9/test" for 127.0.0.1 at 2014-10-22 13:42:00 +0300
Processing by GroupsController#show as HTML
  Parameters: {"id"=>"yGs3VIU9", "slug"=>"test"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."archived_at" IS NULL AND "groups"."key" = 'yGs3VIU9' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."admin" = 't' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["parent_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (1.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY motions.closing_at ASC, last_activity_at DESC LIMIT 20 OFFSET 0[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE (motions.closed_at IS NULL) AND "motions"."discussion_id" IN (1)  ORDER BY motions.closed_at ASC
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."id" IN (1)[0m
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" IN (1)
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 1 AND "votes"."motion_id" IN (1)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered application/_filter_discussions_buttons.html.haml (3.8ms)
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_preview.html.haml (28.9ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))[0m
  Rendered discussions/_discussion_list.html.haml (38.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered groups/_invite_button.html.haml (0.9ms)
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mMembership Load (0.5ms)[0m  SELECT  "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "memberships"."group_id" = 1  ORDER BY "memberships"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "memberships"  WHERE "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f') AND "memberships"."group_id" = 1  [["user_id", 1]]
  Rendered groups/_setup_next_steps.html.haml (0.8ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (group_id = 1 AND user_id = 1)  ORDER BY "memberships"."id" ASC LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_follow.html.haml (4.8ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["parent_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_subgroups.html.haml (4.6ms)
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))
  [1m[36mMotion Load (1.6ms)[0m  [1mSELECT  "motions".* FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY closed_at desc LIMIT 3[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMembershipRequest Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "membership_requests"  WHERE "membership_requests"."group_id" = $1 AND "membership_requests"."response" IS NULL LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_membership_requests.html.haml (13.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "users"."id" ASC LIMIT 15[0m  [["group_id", 1]]
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (13.8ms)
  Rendered groups/_members.html.haml (65.2ms)
  Rendered groups/show.html.haml within layouts/application (208.6ms)
  Rendered application/_social_metadata.html.haml (6.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (1.0ms)
  Rendered application/_user_profile_options.html.haml (1.4ms)
  Rendered application/_user_dropdown.html.haml (5.4ms)
  Rendered application/_header.html.haml (33.7ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:42:00.507518' and ends_at > '2014-10-22 10:42:00.507518')
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (10.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1554ms (Views: 1407.1ms | ActiveRecord: 22.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:42:04 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (2.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 51ms (Views: 10.4ms | ActiveRecord: 2.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:42:04 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (31.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (43.4ms)
Completed 200 OK in 73ms (Views: 58.0ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:42:04 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 41ms (Views: 1.0ms | ActiveRecord: 2.9ms)


Started GET "/g/yGs3VIU9/invitations/new" for 127.0.0.1 at 2014-10-22 13:42:06 +0300
Processing by InvitationsController#new as HTML
  Parameters: {"group_id"=>"yGs3VIU9"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."key" = 'yGs3VIU9' LIMIT 1
  [1m[36m (18.2ms)[0m  [1mSELECT COUNT(*) FROM "invitations"  WHERE "invitations"."invitable_id" = $1 AND "invitations"."invitable_type" = $2 AND "invitations"."accepted_at" IS NULL AND "invitations"."cancelled_at" IS NULL[0m  [["invitable_id", 1], ["invitable_type", "Group"]]
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered invitations/_title.html.haml (8.7ms)
  Rendered invitations/_invite_users.html.haml (13.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "invitations"  WHERE "invitations"."invitable_id" = $1 AND "invitations"."invitable_type" = $2 AND "invitations"."accepted_at" IS NULL AND "invitations"."cancelled_at" IS NULL  [["invitable_id", 1], ["invitable_type", "Group"]]
  Rendered application/_hint.html.haml (0.6ms)
  Rendered invitations/new.html.haml within layouts/application (47.7ms)
  Rendered application/_social_metadata.html.haml (5.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (0.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (21.2ms)
  Rendered application/_announcements.html.haml (0.2ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (4.7ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
Completed 200 OK in 1312ms (Views: 1263.2ms | ActiveRecord: 23.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:42:09 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 128ms (Views: 7.9ms | ActiveRecord: 1.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:42:09 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (22.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (27.9ms)
Completed 200 OK in 48ms (Views: 31.8ms | ActiveRecord: 2.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:42:09 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 3.6ms)


Started GET "/autocomplete_contacts?q=gor" for 127.0.0.1 at 2014-10-22 13:42:16 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"gor"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (10.5ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%gor%' or email ilike '%gor%')  [["user_id", 1]]
Completed 200 OK in 50ms (Views: 0.3ms | ActiveRecord: 12.2ms)


Started GET "/autocomplete_contacts?q=goro" for 127.0.0.1 at 2014-10-22 13:42:16 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"goro"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (0.3ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%goro%' or email ilike '%goro%')  [["user_id", 1]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/autocomplete_contacts?q=goroh" for 127.0.0.1 at 2014-10-22 13:42:16 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"goroh"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (0.4ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%goroh%' or email ilike '%goroh%')  [["user_id", 1]]
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 1.2ms)


Started GET "/autocomplete_contacts?q=goroha" for 127.0.0.1 at 2014-10-22 13:42:17 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"goroha"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (0.4ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%goroha%' or email ilike '%goroha%')  [["user_id", 1]]
Completed 200 OK in 50ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/autocomplete_contacts?q=gorohada" for 127.0.0.1 at 2014-10-22 13:42:17 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"gorohada"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (0.3ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%gorohada%' or email ilike '%gorohada%')  [["user_id", 1]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/autocomplete_contacts?q=gorohada" for 127.0.0.1 at 2014-10-22 13:42:17 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"gorohada"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (0.4ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%gorohada%' or email ilike '%gorohada%')  [["user_id", 1]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/autocomplete_contacts?q=gorohadar" for 127.0.0.1 at 2014-10-22 13:42:17 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"gorohadar"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (0.3ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%gorohadar%' or email ilike '%gorohadar%')  [["user_id", 1]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started POST "/invitations" for 127.0.0.1 at 2014-10-22 13:42:26 +0300
Processing by InvitationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "group_id"=>"yGs3VIU9", "invitees"=>"gorohadar@gmail.com", "invite_people_form"=>{"recipients"=>"gorohadar@gmail.com", "message_body"=>"Hey there, come make decisions with us! We're using a collaborative decision-making tool called Loomio.\r\n"}, "commit"=>"Invite people"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (9.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."key" = 'yGs3VIU9' LIMIT 1
  [1m[36m (3.0ms)[0m  [1mSELECT COUNT(*) FROM "invitations"  WHERE "invitations"."invitable_id" = $1 AND "invitations"."invitable_type" = $2 AND "invitations"."accepted_at" IS NULL AND "invitations"."cancelled_at" IS NULL[0m  [["invitable_id", 1], ["invitable_type", "Group"]]
  [1m[35m (0.8ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('gorohadar@gmail.com')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('gorohadar@gmail.com')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mInvitation Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "invitations"  WHERE "invitations"."token" = '9f42eeb03a5001f3f8af' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "invitations" ("intent", "invitable_id", "invitable_type", "inviter_id", "recipient_email", "token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["intent", "join_group"], ["invitable_id", 1], ["invitable_type", "Group"], ["inviter_id", 1], ["recipient_email", "gorohadar@gmail.com"], ["token", "9f42eeb03a5001f3f8af"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (26.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 10:42:26.382100"], ["handler", "--- !ruby/object:Delayed::PerformableMailer\nobject: !ruby/class 'InvitePeopleMailer'\nmethod_name: :to_join_group\nargs:\n- !ruby/ActiveRecord:Invitation\n  attributes:\n    id: 1\n    recipient_email: gorohadar@gmail.com\n    inviter_id: 1\n    to_be_admin: false\n    token: 9f42eeb03a5001f3f8af\n    accepted_by_id: \n    accepted_at: \n    intent: join_group\n    canceller_id: \n    cancelled_at: \n    recipient_name: \n    invitable_id: 1\n    invitable_type: Group\n- !ruby/ActiveRecord:User\n  attributes:\n    id: 1\n    email: teamco@gmail.com\n    encrypted_password: \"$2a$10$VV0vJkBRviwj3/yU49vu9uHrfrM8e9INITClMknnSITxxySTGEd32\"\n    reset_password_token: \n    reset_password_sent_at: \n    remember_created_at: \n    sign_in_count: 1\n    current_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n    last_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n    current_sign_in_ip: 127.0.0.1\n    last_sign_in_ip: 127.0.0.1\n    created_at: 2014-10-22 09:08:19.268480000 Z\n    updated_at: 2014-10-22 09:08:19.939359000 Z\n    name: vladimir\n    deactivated_at: \n    is_admin: false\n    avatar_kind: gravatar\n    uploaded_avatar_file_name: \n    uploaded_avatar_content_type: \n    uploaded_avatar_file_size: \n    uploaded_avatar_updated_at: \n    avatar_initials: V\n    username: vladimir\n    email_followed_threads: true\n    email_when_proposal_closing_soon: true\n    authentication_token: \n    unsubscribe_token: RqVyZE8Awv8J_VEPQipQ\n    memberships_count: 1\n    uses_markdown: false\n    selected_locale: \n    time_zone: Asia/Damascus\n    key: wbZrEWYv\n    detected_locale: en\n    email_missed_yesterday: true\n    email_api_key: 9f8ec14535972e77a9c6c2e0eaa4b6fb\n    email_new_discussions_and_proposals: true\n    email_when_mentioned: true\n- \"Hey there, come make decisions with us! We're using a collaborative decision-making\n  tool called Loomio.\\r\\n\"\n"], ["run_at", "2014-10-22 10:42:26.381935"], ["updated_at", "2014-10-22 10:42:26.382100"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."email" IN ('gorohadar@gmail.com')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IS NULL
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."email" IN ('gorohadar@gmail.com')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IS NULL
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."email" IN ('gorohadar@gmail.com')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IS NULL
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."email" IN ('gorohadar@gmail.com')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IS NULL
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."email" IN ('gorohadar@gmail.com')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IS NULL
Redirected to http://localhost:3000/g/yGs3VIU9/test
Completed 302 Found in 252ms (ActiveRecord: 51.9ms)


Started GET "/g/yGs3VIU9/test" for 127.0.0.1 at 2014-10-22 13:42:26 +0300
Processing by GroupsController#show as HTML
  Parameters: {"id"=>"yGs3VIU9", "slug"=>"test"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."archived_at" IS NULL AND "groups"."key" = 'yGs3VIU9' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."admin" = 't' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["parent_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (1.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY motions.closing_at ASC, last_activity_at DESC LIMIT 20 OFFSET 0[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE (motions.closed_at IS NULL) AND "motions"."discussion_id" IN (1)  ORDER BY motions.closed_at ASC
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."id" IN (1)[0m
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" IN (1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotionReader Load (0.4ms)[0m  SELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 1 AND "votes"."motion_id" IN (1)
  Rendered application/_flash_messages.html.haml (0.4ms)
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered application/_filter_discussions_buttons.html.haml (3.4ms)
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_preview.html.haml (9.1ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))[0m
  Rendered discussions/_discussion_list.html.haml (17.0ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered groups/_invite_button.html.haml (0.9ms)
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mMembership Load (0.5ms)[0m  SELECT  "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "memberships"."group_id" = 1  ORDER BY "memberships"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "memberships"  WHERE "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f') AND "memberships"."group_id" = 1  [["user_id", 1]]
  Rendered groups/_setup_next_steps.html.haml (1.0ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (group_id = 1 AND user_id = 1)  ORDER BY "memberships"."id" ASC LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_follow.html.haml (4.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["parent_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_subgroups.html.haml (4.9ms)
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))
  [1m[36mMotion Load (1.7ms)[0m  [1mSELECT  "motions".* FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY closed_at desc LIMIT 3[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMembershipRequest Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "membership_requests"  WHERE "membership_requests"."group_id" = $1 AND "membership_requests"."response" IS NULL LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_membership_requests.html.haml (2.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "users"."id" ASC LIMIT 15[0m  [["group_id", 1]]
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (10.7ms)
  Rendered groups/_members.html.haml (23.3ms)
  Rendered groups/show.html.haml within layouts/application (125.0ms)
  Rendered application/_social_metadata.html.haml (6.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.4ms)
  Rendered application/_search.html.haml (4.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (33.5ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:42:26.465974' and ends_at > '2014-10-22 10:42:26.465974')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (8.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1363ms (Views: 1288.0ms | ActiveRecord: 20.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:42:29 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 51ms (Views: 35.8ms | ActiveRecord: 1.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:42:29 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (11.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (18.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (33.0ms)
Completed 200 OK in 216ms (Views: 36.4ms | ActiveRecord: 14.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:42:30 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 3.3ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:42:33 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (3.9ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (7.7ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (13.0ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.5ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  Rendered motions/_vote_button.html.haml (1.4ms)
  Rendered motions/_vote_button.html.haml (1.1ms)
  Rendered motions/_vote_button.html.haml (1.2ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (34.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.7ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2)[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (25.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (9.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (5.6ms)
  Rendered comments/_comment.html.haml (34.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered discussions/_activity.html.haml (126.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.4ms)
  Rendered discussions/show.html.haml within layouts/application (263.2ms)
  Rendered application/_social_metadata.html.haml (5.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (35.2ms)
  [1m[35mAnnouncement Load (0.6ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:42:33.313651' and ends_at > '2014-10-22 10:42:33.313651')
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (9.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (2.1ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:42:34.994428')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:42:34.994428"], ["updated_at", "2014-10-22 10:42:35.007181"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 1716ms (Views: 1602.7ms | ActiveRecord: 47.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:42:37 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.2ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (11.2ms)
Completed 200 OK in 87ms (Views: 60.9ms | ActiveRecord: 3.0ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:42:38 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (11.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (41.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (60.5ms)
Completed 200 OK in 99ms (Views: 72.8ms | ActiveRecord: 14.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:42:38 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (3.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 32ms (Views: 0.8ms | ActiveRecord: 5.5ms)


Started GET "/m/fd2q7DSu/votes/new?position=abstain" for 127.0.0.1 at 2014-10-22 13:42:39 +0300
Processing by VotesController#new as HTML
  Parameters: {"position"=>"abstain", "motion_id"=>"fd2q7DSu"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1  ORDER BY "votes"."id" DESC LIMIT 1  [["motion_id", 1]]
  Rendered application/_hint.html.haml (0.2ms)
  Rendered votes/_form.html.haml (58.1ms)
  Rendered votes/new.html.haml within layouts/application (66.2ms)
  Rendered application/_social_metadata.html.haml (6.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.7ms)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.6ms)
  Rendered application/_header.html.haml (30.0ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:42:39.983893' and ends_at > '2014-10-22 10:42:39.983893')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.8ms)
  Rendered application/_footer.html.haml (7.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1819ms (Views: 1782.3ms | ActiveRecord: 4.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:42:44 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (5.6ms)
Completed 200 OK in 236ms (Views: 22.9ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:42:44 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (2.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (21.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (40.5ms)
Completed 200 OK in 62ms (Views: 46.4ms | ActiveRecord: 4.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:42:44 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 29ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started POST "/m/fd2q7DSu/votes" for 127.0.0.1 at 2014-10-22 13:42:47 +0300
Processing by VotesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "vote"=>{"position"=>"abstain", "statement"=>""}, "commit"=>"Submit position", "motion_id"=>"fd2q7DSu"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mMotion Load (2.0ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "votes" SET age = age + 1 WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 1  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mSQL (16.8ms)[0m  INSERT INTO "votes" ("created_at", "motion_id", "position", "statement", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", "2014-10-22 10:42:48.016623"], ["motion_id", 1], ["position", "abstain"], ["statement", ""], ["updated_at", "2014-10-22 10:42:48.016623"], ["user_id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "motions" SET "votes_count" = COALESCE("votes_count", 0) + 1 WHERE "motions"."id" = 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "motions" SET "updated_at" = '2014-10-22 10:42:48.043068', "last_vote_at" = '2014-10-22 10:42:48.043068' WHERE "motions"."id" = 1
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mMotion Exists (0.5ms)[0m  SELECT  1 AS one FROM "motions"  WHERE ("motions"."key" = 'fd2q7DSu' AND "motions"."id" != 1) LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "motions" SET "abstain_votes_count" = $1, "updated_at" = $2 WHERE "motions"."id" = 1  [["abstain_votes_count", 1], ["updated_at", "2014-10-22 10:42:48.061604"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mEvent Load (0.7ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 5 AND "events"."discussion_id" = 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 10:42:48.016623"], ["discussion_id", 1], ["eventable_id", 1], ["eventable_type", "Vote"], ["kind", "new_vote"], ["sequence_id", 5], ["updated_at", "2014-10-22 10:42:48.074581"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_activity_at", "2014-10-22 10:42:48.016623"], ["updated_at", "2014-10-22 10:42:48.084969"]]
  [1m[35m (15.0ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id != 1) AND "users"."email_followed_threads" = 't'
Redirected to http://localhost:3000/m/fd2q7DSu/course
Completed 302 Found in 177ms (ActiveRecord: 48.9ms)


Started GET "/m/fd2q7DSu/course" for 127.0.0.1 at 2014-10-22 13:42:48 +0300
Processing by MotionsController#show as HTML
  Parameters: {"id"=>"fd2q7DSu", "slug"=>"course"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu' LIMIT 1[0m
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 302 Found in 22ms (ActiveRecord: 2.4ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:42:48 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.1ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (4.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (8.9ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.2ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (7.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (42.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.7ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.8ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (1.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.8ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (5.0ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (22.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.9ms)
  Rendered discussions/_discussion_item.html.haml (2.9ms)
  Rendered discussions/_activity.html.haml (105.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (16.9ms)
  Rendered discussions/show.html.haml within layouts/application (221.3ms)
  Rendered application/_social_metadata.html.haml (6.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (4.7ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (5.7ms)
  Rendered application/_header.html.haml (72.9ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:42:48.262864' and ends_at > '2014-10-22 10:42:48.262864')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.4ms)
  Rendered application/_footer_links.html.haml (1.7ms)
  Rendered application/_footer.html.haml (9.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:42:48.016623')  [["discussion_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:42:48.016623')[0m  [["discussion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_items_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 1  [["last_read_at", "2014-10-22 10:42:48.016623"], ["read_items_count", 5], ["updated_at", "2014-10-22 10:42:49.769471"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:42:49.772107')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "read_activity_count" = $2, "read_votes_count" = $3, "updated_at" = $4 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:42:49.772107"], ["read_activity_count", 1], ["read_votes_count", 1], ["updated_at", "2014-10-22 10:42:49.791214"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 1542ms (Views: 1447.1ms | ActiveRecord: 24.3ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:42:53 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 45ms (Views: 27.0ms | ActiveRecord: 1.2ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:42:53 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (52.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (87.5ms)
Completed 200 OK in 109ms (Views: 91.4ms | ActiveRecord: 3.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:42:53 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 25ms (Views: 1.0ms | ActiveRecord: 2.9ms)


Started POST "/comments/2/like?like=true" for 127.0.0.1 at 2014-10-22 13:42:54 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"true", "id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCommentVote Exists (16.1ms)[0m  SELECT  1 AS one FROM "comment_votes"  WHERE ("comment_votes"."user_id" = 1 AND "comment_votes"."comment_id" = 2) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "comment_votes" ("comment_id", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["comment_id", 2], ["created_at", "2014-10-22 10:42:54.981361"], ["updated_at", "2014-10-22 10:42:54.981361"], ["user_id", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) + 1 WHERE "comments"."id" = 2
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 2[0m  [["liker_ids_and_names", "---\n1: vladimir\n"], ["updated_at", "2014-10-22 10:42:54.989198"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", "2014-10-22 10:42:54.996411"], ["event", "update"], ["item_id", 2], ["item_type", "Comment"], ["object", "---\nid: 2\ndiscussion_id: 1\nbody: discussion2\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:41:48.721515000 Z\nupdated_at: 2014-10-22 10:41:48.721515000 Z\nuses_markdown: false\ncomment_votes_count: 0\nattachments_count: 0\nliker_ids_and_names: |\n  ---\n  1: vladimir\nedited_at: \n"], ["whodunnit", 1]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "eventable_id", "eventable_type", "kind", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 10:42:55.007993"], ["eventable_id", 1], ["eventable_type", "CommentVote"], ["kind", "comment_liked"], ["updated_at", "2014-10-22 10:42:55.007993"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 10:42:55.021486"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Events::CommentLiked\n  attributes:\n    id: 6\n    kind: comment_liked\n    created_at: &1 2014-10-22 10:42:55.007993000 Z\n    updated_at: *1\n    eventable_id: 1\n    eventable_type: CommentVote\n    user_id: \n    discussion_id: \n    sequence_id: \nmethod_name: :notify_users_without_delay!\nargs: []\n"], ["run_at", "2014-10-22 10:42:55.021337"], ["updated_at", "2014-10-22 10:42:55.021486"]]
  [1m[35m (16.0ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (7.5ms)
  Rendered comments/comment_likes.js.erb (17.6ms)
Completed 200 OK in 192ms (Views: 44.2ms | ActiveRecord: 44.1ms)


Started POST "/d/YPUgfENW/add_comment" for 127.0.0.1 at 2014-10-22 13:43:07 +0300
Processing by DiscussionsController#add_comment as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "comment"=>"discussion3", "uses_markdown"=>"false", "commit"=>"Post comment", "id"=>"YPUgfENW"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.8ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
>>>>>>>>>>>>>>>> add_comment
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "comments" ("body", "created_at", "discussion_id", "liker_ids_and_names", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["body", "discussion3"], ["created_at", "2014-10-22 10:43:07.302927"], ["discussion_id", 1], ["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 10:43:07.302927"], ["user_id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "whodunnit") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2014-10-22 10:43:07.308455"], ["event", "create"], ["item_id", 3], ["item_type", "Comment"], ["whodunnit", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "comments_count" = COALESCE("comments_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "discussions" SET "last_comment_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_comment_at", "2014-10-22 10:43:07.302927"], ["updated_at", "2014-10-22 10:43:07.314776"]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (1.0ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.2ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:43:07.302927')[0m  [["discussion_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:43:07.302927')  [["discussion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "discussion_readers" SET "last_read_at" = $1, "read_comments_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:43:07.302927"], ["read_comments_count", 3], ["updated_at", "2014-10-22 10:43:07.335810"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mEvent Load (0.5ms)[0m  SELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 6 AND "events"."discussion_id" = 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["created_at", "2014-10-22 10:43:07.302927"], ["discussion_id", 1], ["eventable_id", 3], ["eventable_type", "Comment"], ["kind", "new_comment"], ["sequence_id", 6], ["updated_at", "2014-10-22 10:43:07.345071"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1  [["last_activity_at", "2014-10-22 10:43:07.302927"], ["updated_at", "2014-10-22 10:43:07.348763"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)  [["group_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT "users"."id" FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)[0m  [["group_id", 1]]
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id NOT IN (1)) AND "users"."email_followed_threads" = 't'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (15.2ms)
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (37.5ms)
  Rendered discussions/add_comment.js.erb (48.0ms)
Completed 200 OK in 170ms (Views: 65.3ms | ActiveRecord: 22.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:43:53 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 3.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:45:53 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:48:53 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 239ms (Views: 1.2ms | ActiveRecord: 12.7ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:48:59 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.8ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.4ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (12.1ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.9ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (17.2ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.6ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.5ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (82.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.6ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (16.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (34.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.6ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.9ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (10.3ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (23.4ms)
  Rendered discussions/_activity.html.haml (232.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (1.2ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (16.8ms)
  Rendered discussions/show.html.haml within layouts/application (423.9ms)
  Rendered application/_social_metadata.html.haml (7.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (7.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (42.6ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:48:59.819847' and ends_at > '2014-10-22 10:48:59.819847')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (10.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (31.8ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:49:02.030321')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 10:49:02.030321"], ["updated_at", "2014-10-22 10:49:02.053410"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 2265ms (Views: 1933.9ms | ActiveRecord: 74.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:49:04 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.7ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (6.3ms)
Completed 200 OK in 72ms (Views: 19.8ms | ActiveRecord: 4.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:49:04 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (27.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (33.7ms)
Completed 200 OK in 50ms (Views: 37.4ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:49:04 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 83ms (Views: 0.8ms | ActiveRecord: 2.9ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:50:05 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 27ms (Views: 0.6ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:52:05 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 3.2ms)


Started GET "/" for 10.182.234.126 at 2014-10-22 13:53:49 +0300
Processing by MarketingController#index as HTML
  Rendered application/_social_metadata.html.haml (6.6ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
  Rendered marketing/index.html.haml (243.5ms)
Completed 200 OK in 272ms (Views: 254.0ms | ActiveRecord: 0.0ms)


Started GET "/detect_locale?locale=en" for 10.182.234.126 at 2014-10-22 13:53:51 +0300
Processing by DetectLocaleController#show as HTML
  Parameters: {"locale"=>"en"}
Completed 200 OK in 9ms (ActiveRecord: 0.0ms)


Started GET "/m/fd2q7DSu/votes/new" for 127.0.0.1 at 2014-10-22 13:53:52 +0300
Processing by VotesController#new as HTML
  Parameters: {"motion_id"=>"fd2q7DSu"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mMotion Load (0.6ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1  ORDER BY "votes"."id" DESC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered application/_hint.html.haml (0.6ms)
  Rendered votes/_form.html.haml (21.5ms)
  Rendered votes/new.html.haml within layouts/application (28.1ms)
  Rendered application/_social_metadata.html.haml (7.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (5.7ms)
  Rendered application/_header.html.haml (37.3ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:53:52.166156' and ends_at > '2014-10-22 10:53:52.166156')[0m
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.7ms)
  Rendered application/_footer.html.haml (7.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1362ms (Views: 1325.6ms | ActiveRecord: 5.5ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:53:56 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.4ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.8ms)
Completed 200 OK in 55ms (Views: 35.1ms | ActiveRecord: 1.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:53:56 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (1.3ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (27.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (122.9ms)
Completed 200 OK in 151ms (Views: 133.3ms | ActiveRecord: 4.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:53:56 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 39ms (Views: 1.1ms | ActiveRecord: 2.9ms)


Started GET "/users/sign_in" for 10.182.234.126 at 2014-10-22 13:53:58 +0300
Processing by Users::SessionsController#new as HTML
  Rendered devise/shared/_omniauth_buttons.html.haml (2.4ms)
  Rendered devise/sessions/_form.html.haml (57.7ms)
  Rendered devise/sessions/new.html.haml within layouts/pages (72.5ms)
  Rendered application/_social_metadata.html.haml (14.0ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (45.9ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1524ms (Views: 1508.2ms | ActiveRecord: 0.0ms)


Started GET "/users/auth/browser_id" for 10.182.234.126 at 2014-10-22 13:54:07 +0300


Started PATCH "/m/fd2q7DSu/votes/1" for 127.0.0.1 at 2014-10-22 13:54:11 +0300
Processing by VotesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "vote"=>{"position"=>"no", "statement"=>"this is a bad idea!!!"}, "commit"=>"Submit position", "motion_id"=>"fd2q7DSu", "id"=>"1"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mMotion Load (0.6ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "votes" SET age = age + 1 WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1  [["motion_id", 1]]
  [1m[36mVote Load (0.8ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 1  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "votes" ("created_at", "motion_id", "position", "previous_vote_id", "statement", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 10:54:11.256125"], ["motion_id", 1], ["position", "no"], ["previous_vote_id", 1], ["statement", "this is a bad idea!!!"], ["updated_at", "2014-10-22 10:54:11.256125"], ["user_id", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "motions" SET "votes_count" = COALESCE("votes_count", 0) + 1 WHERE "motions"."id" = 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "motions" SET "updated_at" = '2014-10-22 10:54:11.269121', "last_vote_at" = '2014-10-22 10:54:11.269121' WHERE "motions"."id" = 1[0m
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mMotion Exists (0.7ms)[0m  SELECT  1 AS one FROM "motions"  WHERE ("motions"."key" = 'fd2q7DSu' AND "motions"."id" != 1) LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "motions" SET "abstain_votes_count" = $1, "no_votes_count" = $2, "updated_at" = $3 WHERE "motions"."id" = 1  [["abstain_votes_count", 0], ["no_votes_count", 1], ["updated_at", "2014-10-22 10:54:11.290629"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 7 AND "events"."discussion_id" = 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 10:54:11.256125"], ["discussion_id", 1], ["eventable_id", 2], ["eventable_type", "Vote"], ["kind", "new_vote"], ["sequence_id", 7], ["updated_at", "2014-10-22 10:54:11.309123"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_activity_at", "2014-10-22 10:54:11.256125"], ["updated_at", "2014-10-22 10:54:11.321510"]]
  [1m[35m (16.1ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id != 1) AND "users"."email_followed_threads" = 't'
Redirected to http://localhost:3000/m/fd2q7DSu/course
Completed 302 Found in 197ms (ActiveRecord: 33.3ms)


Started GET "/m/fd2q7DSu/course" for 127.0.0.1 at 2014-10-22 13:54:11 +0300
Processing by MotionsController#show as HTML
  Parameters: {"id"=>"fd2q7DSu", "slug"=>"course"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mMotion Load (1.9ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu' LIMIT 1[0m
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 302 Found in 23ms (ActiveRecord: 3.5ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:54:11 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (1.0ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.7ms)
  Rendered groups/_title.html.haml (14.5ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (11.2ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (46.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (22.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.3ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.8ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_activity.html.haml (101.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.2ms)
  Rendered discussions/show.html.haml within layouts/application (238.5ms)
  Rendered application/_social_metadata.html.haml (5.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.3ms)
  Rendered application/_header.html.haml (32.4ms)
  [1m[35mAnnouncement Load (0.6ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:54:11.497683' and ends_at > '2014-10-22 10:54:11.497683')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.5ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (8.4ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:54:11.256125')  [["discussion_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:54:11.256125')[0m  [["discussion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_items_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 1  [["last_read_at", "2014-10-22 10:54:11.256125"], ["read_items_count", 7], ["updated_at", "2014-10-22 10:54:12.992017"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:54:12.994920')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "read_activity_count" = $2, "updated_at" = $3 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 10:54:12.994920"], ["read_activity_count", 2], ["updated_at", "2014-10-22 10:54:13.012229"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1528ms (Views: 1435.8ms | ActiveRecord: 23.9ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:54:15 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 24ms (Views: 9.3ms | ActiveRecord: 1.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:54:15 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (25.2ms)
Completed 200 OK in 41ms (Views: 29.3ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:54:15 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.9ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 25ms (Views: 1.1ms | ActiveRecord: 4.8ms)


Started POST "/users/sign_in" for 10.182.234.126 at 2014-10-22 13:54:32 +0300
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ddtO6a5lRJ/W9odsMLZ8GF8GVbq+W6lNn/Tp124fVUE=", "user"=>{"email"=>"adi.erteschik@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'adi.erteschik@gmail.com'  ORDER BY "users"."id" ASC LIMIT 1
Completed 401 Unauthorized in 45ms
Processing by Users::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ddtO6a5lRJ/W9odsMLZ8GF8GVbq+W6lNn/Tp124fVUE=", "user"=>{"email"=>"adi.erteschik@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  Rendered devise/shared/_omniauth_buttons.html.haml (2.2ms)
  Rendered devise/sessions/_form.html.haml (13.3ms)
  Rendered devise/sessions/new.html.haml within layouts/pages (21.3ms)
  Rendered application/_social_metadata.html.haml (7.0ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (32.0ms)
  Rendered application/_heap_analytics.html.haml (0.4ms)
Completed 200 OK in 1369ms (Views: 1269.7ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up" for 10.182.234.126 at 2014-10-22 13:54:49 +0300
Processing by Users::RegistrationsController#new as HTML
  Rendered devise/shared/_omniauth_buttons.html.haml (2.1ms)
  Rendered devise/registrations/_form.html.haml (50.8ms)
  Rendered devise/registrations/new.html.haml within layouts/pages (59.4ms)
  Rendered application/_social_metadata.html.haml (5.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (36.6ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1140ms (Views: 1134.5ms | ActiveRecord: 0.0ms)


Started POST "/users" for 10.182.234.126 at 2014-10-22 13:55:10 +0300
Processing by Users::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ddtO6a5lRJ/W9odsMLZ8GF8GVbq+W6lNn/Tp124fVUE=", "user"=>{"name"=>"Adi Erteschik", "email"=>"adi.erteschik@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "honeypot"=>""}, "commit"=>"Create account"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."key" = 'oJSuA17y' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."key" = 'oJSuA17y' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."email" = 'adi.erteschik@gmail.com' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."unsubscribe_token" = 'yuKZK7-3QAfu3RjvHRrq' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"  WHERE (username = 'adierteschik')
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("avatar_initials", "created_at", "email", "email_api_key", "encrypted_password", "key", "name", "unsubscribe_token", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["avatar_initials", "AE"], ["created_at", "2014-10-22 10:55:10.237761"], ["email", "adi.erteschik@gmail.com"], ["email_api_key", "c62ff8a3f777aa135eff58275199ba10"], ["encrypted_password", "$2a$10$Lf3VSXWNpT.EZsZi.GnvY.c2KdxhUwMrwDJ8rM07dpL7wvmLXHj6i"], ["key", "oJSuA17y"], ["name", "Adi Erteschik"], ["unsubscribe_token", "yuKZK7-3QAfu3RjvHRrq"], ["updated_at", "2014-10-22 10:55:10.237761"], ["username", "adierteschik"]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "current_sign_in_at" = $1, "current_sign_in_ip" = $2, "last_sign_in_at" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = 2  [["current_sign_in_at", "2014-10-22 10:55:10.615097"], ["current_sign_in_ip", "10.182.234.126"], ["last_sign_in_at", "2014-10-22 10:55:10.615097"], ["last_sign_in_ip", "10.182.234.126"], ["sign_in_count", 1], ["updated_at", "2014-10-22 10:55:10.616265"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "detected_locale" = $1, "updated_at" = $2 WHERE "users"."id" = 2[0m  [["detected_locale", "en"], ["updated_at", "2014-10-22 10:55:10.623394"]]
  [1m[35m (0.8ms)[0m  COMMIT
Redirected to http://10.182.238.106:3000/users/sign_in
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "time_zone" = $1, "updated_at" = $2 WHERE "users"."id" = 2  [["time_zone", "Asia/Jerusalem"], ["updated_at", "2014-10-22 10:55:10.637444"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 302 Found in 512ms (ActiveRecord: 8.3ms)


Started GET "/users/sign_in" for 10.182.234.126 at 2014-10-22 13:55:10 +0300
Processing by Users::SessionsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "detected_locale" = $1, "updated_at" = $2 WHERE "users"."id" = 2  [["detected_locale", "en"], ["updated_at", "2014-10-22 10:55:10.686448"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Redirected to http://10.182.238.106:3000/dashboard
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 2.3ms)


Started GET "/dashboard" for 10.182.234.126 at 2014-10-22 13:55:10 +0300
Processing by DashboardController#show as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mDiscussion Load (1.5ms)[0m  SELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (NULL)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (NULL))))  ORDER BY motions.closing_at ASC, last_comment_at DESC LIMIT 20 OFFSET 0
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND 1=0[0m
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 2 AND 1=0
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 2 AND 1=0[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id IS NULL)  ORDER BY LOWER(name)  [["user_id", 2]]
  Rendered dashboard/show.html.haml within layouts/application (5.1ms)
  Rendered application/_social_metadata.html.haml (7.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 2]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.5ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (35.4ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:55:10.787678' and ends_at > '2014-10-22 10:55:10.787678')[0m
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (10.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1216ms (Views: 1140.8ms | ActiveRecord: 7.2ms)


Started GET "/notifications/dropdown_items" for 10.182.234.126 at 2014-10-22 13:55:12 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 2]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 2]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 2]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 19ms (Views: 7.6ms | ActiveRecord: 1.2ms)


Started GET "/notifications/groups_tree_dropdown" for 10.182.234.126 at 2014-10-22 13:55:12 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 2]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (NULL))[0m  [["user_id", 2]]
  Rendered application/_groups_tree.html.haml (8.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (13.4ms)
Completed 200 OK in 26ms (Views: 17.5ms | ActiveRecord: 2.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 13:55:12 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (NULL)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (NULL)))) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 4.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:55:15 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/g/new" for 127.0.0.1 at 2014-10-22 13:55:22 +0300
Processing by GroupsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mCategory Load (0.5ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered groups/_form.html.haml (74.1ms)
  Rendered groups/new.html.haml within layouts/application (77.2ms)
  Rendered application/_social_metadata.html.haml (8.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.4ms)
  Rendered application/_user_dropdown.html.haml (4.6ms)
  Rendered application/_header.html.haml (38.3ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:55:22.608070' and ends_at > '2014-10-22 10:55:22.608070')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (9.0ms)
  Rendered application/_intercom_tracker.html.haml (0.7ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1402ms (Views: 1363.0ms | ActiveRecord: 3.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:55:26 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (23.6ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (7.0ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 98ms (Views: 39.4ms | ActiveRecord: 31.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:55:26 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (23.4ms)
Completed 200 OK in 40ms (Views: 26.9ms | ActiveRecord: 4.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:55:26 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 2.9ms)


Started GET "/g/yGs3VIU9/test" for 127.0.0.1 at 2014-10-22 13:55:37 +0300
Processing by GroupsController#show as HTML
  Parameters: {"id"=>"yGs3VIU9", "slug"=>"test"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."archived_at" IS NULL AND "groups"."key" = 'yGs3VIU9' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."admin" = 't' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["parent_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (2.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY motions.closing_at ASC, last_activity_at DESC LIMIT 20 OFFSET 0[0m
  [1m[35mMotion Load (0.7ms)[0m  SELECT "motions".* FROM "motions"  WHERE (motions.closed_at IS NULL) AND "motions"."discussion_id" IN (1)  ORDER BY motions.closed_at ASC
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."id" IN (1)[0m
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" IN (1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mVote Load (0.7ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 1 AND "votes"."motion_id" IN (1)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered application/_filter_discussions_buttons.html.haml (3.1ms)
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_preview.html.haml (7.0ms)
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))
  Rendered discussions/_discussion_list.html.haml (14.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered groups/_invite_button.html.haml (0.9ms)
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1  [["group_id", 1]]
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT  "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "memberships"."group_id" = 1  ORDER BY "memberships"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "memberships"  WHERE "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f') AND "memberships"."group_id" = 1[0m  [["user_id", 1]]
  Rendered groups/_setup_next_steps.html.haml (1.0ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (group_id = 1 AND user_id = 1)  ORDER BY "memberships"."id" ASC LIMIT 1  [["group_id", 1]]
  Rendered groups/_follow.html.haml (4.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["parent_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1  [["group_id", 1]]
  Rendered groups/_subgroups.html.haml (3.8ms)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))[0m
  [1m[35mMotion Load (1.8ms)[0m  SELECT  "motions".* FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY closed_at desc LIMIT 3
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMembershipRequest Exists (0.4ms)[0m  SELECT  1 AS one FROM "membership_requests"  WHERE "membership_requests"."group_id" = $1 AND "membership_requests"."response" IS NULL LIMIT 1  [["group_id", 1]]
  Rendered groups/_membership_requests.html.haml (13.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "users"."id" ASC LIMIT 15  [["group_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered groups/_members.html.haml (20.2ms)
  Rendered groups/show.html.haml within layouts/application (134.4ms)
  Rendered application/_social_metadata.html.haml (6.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (4.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (34.5ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:55:37.683096' and ends_at > '2014-10-22 10:55:37.683096')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.1ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1524ms (Views: 1404.2ms | ActiveRecord: 24.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:55:41 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 23ms (Views: 8.1ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:55:41 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (65.4ms)
Completed 200 OK in 119ms (Views: 103.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:55:41 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 25ms (Views: 0.8ms | ActiveRecord: 3.6ms)


Started GET "/g/yGs3VIU9/invitations/new" for 127.0.0.1 at 2014-10-22 13:55:43 +0300
Processing by InvitationsController#new as HTML
  Parameters: {"group_id"=>"yGs3VIU9"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."key" = 'yGs3VIU9' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "invitations"  WHERE "invitations"."invitable_id" = $1 AND "invitations"."invitable_type" = $2 AND "invitations"."accepted_at" IS NULL AND "invitations"."cancelled_at" IS NULL  [["invitable_id", 1], ["invitable_type", "Group"]]
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered invitations/_title.html.haml (4.8ms)
  Rendered invitations/_invite_users.html.haml (10.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "invitations"  WHERE "invitations"."invitable_id" = $1 AND "invitations"."invitable_type" = $2 AND "invitations"."accepted_at" IS NULL AND "invitations"."cancelled_at" IS NULL[0m  [["invitable_id", 1], ["invitable_type", "Group"]]
  Rendered application/_hint.html.haml (0.6ms)
  Rendered invitations/new.html.haml within layouts/application (45.4ms)
  Rendered application/_social_metadata.html.haml (9.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (0.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.1ms)
  Rendered application/_header.html.haml (21.0ms)
  Rendered application/_announcements.html.haml (0.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (4.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1312ms (Views: 1286.5ms | ActiveRecord: 4.8ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:55:47 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (6.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 213ms (Views: 149.9ms | ActiveRecord: 7.0ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:55:47 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (46.4ms)
Completed 200 OK in 69ms (Views: 49.7ms | ActiveRecord: 3.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:55:47 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (2.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 34ms (Views: 0.8ms | ActiveRecord: 5.2ms)


Started GET "/autocomplete_contacts?q=adi" for 127.0.0.1 at 2014-10-22 13:55:58 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adi"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.3ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adi%' or email ilike '%adi%')[0m  [["user_id", 1]]
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 2.1ms)


Started GET "/autocomplete_contacts?q=adih" for 127.0.0.1 at 2014-10-22 13:56:01 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adih"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.3ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adih%' or email ilike '%adih%')[0m  [["user_id", 1]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started GET "/autocomplete_contacts?q=adihe" for 127.0.0.1 at 2014-10-22 13:56:01 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adihe"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.3ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adihe%' or email ilike '%adihe%')[0m  [["user_id", 1]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/autocomplete_contacts?q=adiher" for 127.0.0.1 at 2014-10-22 13:56:02 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adiher"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.3ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adiher%' or email ilike '%adiher%')[0m  [["user_id", 1]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started GET "/autocomplete_contacts?q=adihert" for 127.0.0.1 at 2014-10-22 13:56:02 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adihert"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.3ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adihert%' or email ilike '%adihert%')[0m  [["user_id", 1]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/autocomplete_contacts?q=adiherts" for 127.0.0.1 at 2014-10-22 13:56:03 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adiherts"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.3ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adiherts%' or email ilike '%adiherts%')[0m  [["user_id", 1]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/autocomplete_contacts?q=adihert" for 127.0.0.1 at 2014-10-22 13:56:04 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adihert"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.5ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adihert%' or email ilike '%adihert%')[0m  [["user_id", 1]]
Completed 200 OK in 12ms (Views: 0.5ms | ActiveRecord: 1.2ms)


Started GET "/autocomplete_contacts?q=adihe" for 127.0.0.1 at 2014-10-22 13:56:06 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adihe"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.4ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adihe%' or email ilike '%adihe%')[0m  [["user_id", 1]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.1ms)


Started GET "/autocomplete_contacts?q=adi" for 127.0.0.1 at 2014-10-22 13:56:09 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adi"}
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mContact Load (0.4ms)[0m  [1mSELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adi%' or email ilike '%adi%')[0m  [["user_id", 1]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 13:56:12 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (NULL)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (NULL)))) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.6ms | ActiveRecord: 3.1ms)


Started GET "/autocomplete_contacts?q=adi" for 127.0.0.1 at 2014-10-22 13:56:12 +0300
Processing by Users::ContactsController#autocomplete as JSON
  Parameters: {"q"=>"adi"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mContact Load (0.4ms)[0m  SELECT "contacts".* FROM "contacts"  WHERE "contacts"."user_id" = $1 AND (name ilike '%adi%' or email ilike '%adi%')  [["user_id", 1]]
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started POST "/invitations" for 127.0.0.1 at 2014-10-22 13:56:29 +0300
Processing by InvitationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "group_id"=>"yGs3VIU9", "invitees"=>"adi.erteschik@gmail.com", "invite_people_form"=>{"recipients"=>"adi.erteschik@gmail.com", "message_body"=>"Hey there, come make decisions with us! We're using a collaborative decision-making tool called Loomio.\r\n"}, "commit"=>"Invite people"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."key" = 'yGs3VIU9' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "invitations"  WHERE "invitations"."invitable_id" = $1 AND "invitations"."invitable_type" = $2 AND "invitations"."accepted_at" IS NULL AND "invitations"."cancelled_at" IS NULL[0m  [["invitable_id", 1], ["invitable_type", "Group"]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('adi.erteschik@gmail.com')
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35mMembership Load (0.4ms)[0m  SELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "memberships"."user_id" = 2  ORDER BY "memberships"."id" ASC LIMIT 1  [["group_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMembership Exists (0.5ms)[0m  SELECT  1 AS one FROM "memberships"  WHERE ("memberships"."user_id" = 2 AND "memberships"."group_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "memberships" ("created_at", "group_id", "inviter_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2014-10-22 10:56:29.985744"], ["group_id", 1], ["inviter_id", 1], ["updated_at", "2014-10-22 10:56:29.985744"], ["user_id", 2]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "groups" SET "memberships_count" = COALESCE("memberships_count", 0) + 1 WHERE "groups"."id" = 1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "users" SET "memberships_count" = COALESCE("memberships_count", 0) + 1 WHERE "users"."id" = 2[0m
  [1m[35m (28.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "eventable_id", "eventable_type", "kind", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", "2014-10-22 10:56:30.027761"], ["eventable_id", 2], ["eventable_type", "Membership"], ["kind", "user_added_to_group"], ["updated_at", "2014-10-22 10:56:30.027761"], ["user_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 10:56:30.040385"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Events::UserAddedToGroup\n  attributes:\n    id: 9\n    kind: user_added_to_group\n    created_at: &1 2014-10-22 10:56:30.027761000 Z\n    updated_at: *1\n    eventable_id: 2\n    eventable_type: Membership\n    user_id: 1\n    discussion_id: \n    sequence_id: \nmethod_name: :notify_users_without_delay!\nargs: []\n"], ["run_at", "2014-10-22 10:56:30.040252"], ["updated_at", "2014-10-22 10:56:30.040385"]]
  [1m[35m (16.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2014-10-22 10:56:30.926061"], ["handler", "--- !ruby/object:Delayed::PerformableMailer\nobject: !ruby/class 'UserMailer'\nmethod_name: :added_to_group\nargs:\n- :user: !ruby/ActiveRecord:User\n    attributes:\n      id: 2\n      email: adi.erteschik@gmail.com\n      encrypted_password: \"$2a$10$Lf3VSXWNpT.EZsZi.GnvY.c2KdxhUwMrwDJ8rM07dpL7wvmLXHj6i\"\n      reset_password_token: \n      reset_password_sent_at: \n      remember_created_at: \n      sign_in_count: 1\n      current_sign_in_at: 2014-10-22 10:55:10.615097000 Z\n      last_sign_in_at: 2014-10-22 10:55:10.615097000 Z\n      current_sign_in_ip: 10.182.234.126\n      last_sign_in_ip: 10.182.234.126\n      created_at: 2014-10-22 10:55:10.237761000 Z\n      updated_at: 2014-10-22 10:55:10.686448000 Z\n      name: Adi Erteschik\n      deactivated_at: \n      is_admin: false\n      avatar_kind: initials\n      uploaded_avatar_file_name: \n      uploaded_avatar_content_type: \n      uploaded_avatar_file_size: \n      uploaded_avatar_updated_at: \n      avatar_initials: AE\n      username: adierteschik\n      email_followed_threads: true\n      email_when_proposal_closing_soon: true\n      authentication_token: \n      unsubscribe_token: yuKZK7-3QAfu3RjvHRrq\n      memberships_count: 0\n      uses_markdown: false\n      selected_locale: \n      time_zone: Asia/Jerusalem\n      key: oJSuA17y\n      detected_locale: en\n      email_missed_yesterday: true\n      email_api_key: c62ff8a3f777aa135eff58275199ba10\n      email_new_discussions_and_proposals: true\n      email_when_mentioned: true\n  :inviter: !ruby/ActiveRecord:User\n    attributes:\n      id: 1\n      email: teamco@gmail.com\n      encrypted_password: \"$2a$10$VV0vJkBRviwj3/yU49vu9uHrfrM8e9INITClMknnSITxxySTGEd32\"\n      reset_password_token: \n      reset_password_sent_at: \n      remember_created_at: \n      sign_in_count: 1\n      current_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n      last_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n      current_sign_in_ip: 127.0.0.1\n      last_sign_in_ip: 127.0.0.1\n      created_at: 2014-10-22 09:08:19.268480000 Z\n      updated_at: 2014-10-22 09:08:19.939359000 Z\n      name: vladimir\n      deactivated_at: \n      is_admin: false\n      avatar_kind: gravatar\n      uploaded_avatar_file_name: \n      uploaded_avatar_content_type: \n      uploaded_avatar_file_size: \n      uploaded_avatar_updated_at: \n      avatar_initials: V\n      username: vladimir\n      email_followed_threads: true\n      email_when_proposal_closing_soon: true\n      authentication_token: \n      unsubscribe_token: RqVyZE8Awv8J_VEPQipQ\n      memberships_count: 1\n      uses_markdown: false\n      selected_locale: \n      time_zone: Asia/Damascus\n      key: wbZrEWYv\n      detected_locale: en\n      email_missed_yesterday: true\n      email_api_key: 9f8ec14535972e77a9c6c2e0eaa4b6fb\n      email_new_discussions_and_proposals: true\n      email_when_mentioned: true\n  :group: !ruby/ActiveRecord:Group\n    attributes:\n      id: 1\n      name: test\n      created_at: 2014-10-22 09:08:53.375567000 Z\n      updated_at: 2014-10-22 09:08:53.578664000 Z\n      privacy: private\n      members_invitable_by: \n      parent_id: \n      hide_members: false\n      description: ''\n      memberships_count: 1\n      archived_at: \n      max_size: 1000\n      cannot_contribute: false\n      distribution_metric: \n      sectors: \n      other_sector: \n      discussions_count: 1\n      country_name: \n      setup_completed_at: 2014-10-22 09:08:53.577517000 Z\n      next_steps_completed: false\n      full_name: test\n      payment_plan: undetermined\n      parent_members_can_see_discussions: false\n      key: yGs3VIU9\n      can_start_group: true\n      category_id: \n      enabled_beta_features: |\n        --- []\n      subdomain: \n      theme_id: \n      is_visible_to_public: false\n      is_visible_to_parent_members: false\n      discussion_privacy_options: private_only\n      members_can_add_members: false\n      membership_granted_upon: invitation\n      members_can_edit_discussions: true\n      motions_can_be_edited: false\n      cover_photo_file_name: \n      cover_photo_content_type: \n      cover_photo_file_size: \n      cover_photo_updated_at: \n      logo_file_name: \n      logo_content_type: \n      logo_file_size: \n      logo_updated_at: \n      members_can_edit_comments: true\n      members_can_raise_motions: true\n      members_can_vote: true\n      members_can_start_discussions: true\n      members_can_create_subgroups: true\n  :message: \"Hey there, come make decisions with us! We're using a collaborative decision-making\n    tool called Loomio.\\r\\n\"\n"], ["run_at", "2014-10-22 10:56:30.925879"], ["updated_at", "2014-10-22 10:56:30.926061"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('adi.erteschik@gmail.com')
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('adi.erteschik@gmail.com')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('adi.erteschik@gmail.com')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('adi.erteschik@gmail.com')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('adi.erteschik@gmail.com')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."email" IN ('adi.erteschik@gmail.com')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IS NULL[0m
Redirected to http://localhost:3000/g/yGs3VIU9/test
Completed 302 Found in 1042ms (ActiveRecord: 55.7ms)


Started GET "/g/yGs3VIU9/test" for 127.0.0.1 at 2014-10-22 13:56:30 +0300
Processing by GroupsController#show as HTML
  Parameters: {"id"=>"yGs3VIU9", "slug"=>"test"}
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."archived_at" IS NULL AND "groups"."key" = 'yGs3VIU9' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."admin" = 't' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["parent_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (1.8ms)[0m  SELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY motions.closing_at ASC, last_activity_at DESC LIMIT 20 OFFSET 0
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE (motions.closed_at IS NULL) AND "motions"."discussion_id" IN (1)  ORDER BY motions.closed_at ASC[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."id" IN (1)
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" IN (1)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotionReader Load (0.4ms)[0m  [1mSELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" IN (1)[0m
  [1m[35mMotion Load (0.4ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 1 AND "votes"."motion_id" IN (1)[0m
  [1m[35mVote Load (0.6ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  Rendered application/_flash_messages.html.haml (0.9ms)
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered application/_filter_discussions_buttons.html.haml (2.9ms)
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_preview.html.haml (6.6ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))[0m
  Rendered discussions/_discussion_list.html.haml (28.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered groups/_invite_button.html.haml (1.0ms)
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  [1m[35mMembership Load (0.5ms)[0m  SELECT  "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "memberships"."group_id" = 1  ORDER BY "memberships"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "memberships"  WHERE "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f') AND "memberships"."group_id" = 1  [["user_id", 1]]
  Rendered groups/_setup_next_steps.html.haml (1.1ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (group_id = 1 AND user_id = 1)  ORDER BY "memberships"."id" ASC LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_follow.html.haml (4.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" = $1 AND "groups"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["parent_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 1 LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_subgroups.html.haml (4.3ms)
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))
  [1m[36mMotion Load (1.6ms)[0m  [1mSELECT  "motions".* FROM "motions" INNER JOIN "discussions" ON "discussions"."id" = "motions"."discussion_id" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motion_readers mr ON mr.motion_id = motions.id AND mr.user_id = 1 WHERE "groups"."archived_at" IS NULL AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY closed_at desc LIMIT 3[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMembershipRequest Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "membership_requests"  WHERE "membership_requests"."group_id" = $1 AND "membership_requests"."response" IS NULL LIMIT 1[0m  [["group_id", 1]]
  Rendered groups/_membership_requests.html.haml (2.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "users"."id" ASC LIMIT 15[0m  [["group_id", 1]]
  Rendered base/_avatar.html.haml (1.0ms)
  Rendered base/_linked_avatar.html.haml (8.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered groups/_members.html.haml (37.6ms)
  Rendered groups/show.html.haml within layouts/application (169.2ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (42.0ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:56:31.016312' and ends_at > '2014-10-22 10:56:31.016312')
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1462ms (Views: 1380.5ms | ActiveRecord: 21.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:56:35 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (2.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 63ms (Views: 46.8ms | ActiveRecord: 3.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:56:35 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (18.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (52.1ms)
Completed 200 OK in 69ms (Views: 57.8ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:56:35 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (3.9ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 28ms (Views: 0.8ms | ActiveRecord: 5.3ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:56:44 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (3.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (1.1ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.5ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.8ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.0ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.5ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.6ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (45.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (23.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (45.7ms)
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment.html.haml (58.3ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_activity.html.haml (142.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.8ms)
  Rendered discussions/show.html.haml within layouts/application (280.7ms)
  Rendered application/_social_metadata.html.haml (5.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.1ms)
  Rendered application/_header.html.haml (35.4ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:56:44.347179' and ends_at > '2014-10-22 10:56:44.347179')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (9.0ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.4ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:56:45.931699')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 10:56:45.931699"], ["updated_at", "2014-10-22 10:56:45.947979"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1620ms (Views: 1518.9ms | ActiveRecord: 39.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:56:48 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (1.7ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 37ms (Views: 22.5ms | ActiveRecord: 2.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:56:48 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (35.2ms)
Completed 200 OK in 52ms (Views: 39.7ms | ActiveRecord: 3.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:56:48 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.9ms | ActiveRecord: 3.7ms)


Started GET "/dashboard" for 10.182.234.126 at 2014-10-22 13:57:04 +0300
Processing by DashboardController#show as HTML
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 2]]
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36m (1.1ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mDiscussion Load (1.4ms)[0m  SELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))  ORDER BY motions.closing_at ASC, last_comment_at DESC LIMIT 20 OFFSET 0
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE (motions.closed_at IS NULL) AND "motions"."discussion_id" IN (1)  ORDER BY motions.closed_at ASC[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."id" IN (1)
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" IN (1)[0m
  [1m[35mMotionReader Load (0.3ms)[0m  SELECT "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 2 AND "motion_readers"."motion_id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."age" = 0 AND "votes"."user_id" = 2 AND "votes"."motion_id" IN (1)[0m
  [1m[35mGroup Load (32.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id IS NULL)  ORDER BY LOWER(name)  [["user_id", 2]]
  Rendered application/_filter_discussions_buttons.html.haml (2.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_preview.html.haml (13.6ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN motions ON motions.discussion_id = discussions.id AND motions.closed_at IS NULL WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1))[0m
  Rendered discussions/_discussion_list.html.haml (40.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 2]]
  Rendered application/_groups_tree.html.haml (22.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 2]]
  Rendered dashboard/_groups.html.haml (57.7ms)
  Rendered dashboard/show.html.haml within layouts/application (172.6ms)
  Rendered application/_social_metadata.html.haml (5.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 2]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.4ms)
  Rendered application/_header.html.haml (32.9ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:57:04.108815' and ends_at > '2014-10-22 10:57:04.108815')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1448ms (Views: 1325.3ms | ActiveRecord: 44.5ms)


Started GET "/notifications/dropdown_items" for 10.182.234.126 at 2014-10-22 13:57:05 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 2]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 2]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 2]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 52ms (Views: 39.8ms | ActiveRecord: 1.7ms)


Started GET "/notifications/groups_tree_dropdown" for 10.182.234.126 at 2014-10-22 13:57:06 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 2]]
  Rendered application/_groups_tree.html.haml (15.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (20.4ms)
Completed 200 OK in 34ms (Views: 24.7ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 13:57:06 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/d/YPUgfENW/title" for 10.182.234.126 at 2014-10-22 13:57:07 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 2]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 2 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.8ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 2 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (1.5ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (7.2ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  [1m[36mMembership Load (0.4ms)[0m  [1mSELECT  "memberships".* FROM "memberships"  WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (group_id = 1 AND user_id = 2)  ORDER BY "memberships"."id" ASC LIMIT 1[0m  [["group_id", 1]]
  Rendered discussions/_discussion_context.html.haml (12.5ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.5ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 2 LIMIT 1  [["motion_id", 1]]
  Rendered motions/_vote_button.html.haml (1.5ms)
  Rendered motions/_vote_button.html.haml (1.0ms)
  Rendered motions/_vote_button.html.haml (1.0ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 2 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (47.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (3.0ms)
  Rendered comments/_comment.html.haml (19.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.7ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_activity.html.haml (92.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.4ms)
  Rendered discussions/show.html.haml within layouts/application (222.5ms)
  Rendered application/_social_metadata.html.haml (5.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 2]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (5.8ms)
  Rendered application/_header.html.haml (34.2ms)
  [1m[36mAnnouncement Load (0.6ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:57:07.693167' and ends_at > '2014-10-22 10:57:07.693167')[0m
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (9.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mSQL (1.2ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:54:11.256125')[0m  [["discussion_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:54:11.256125')  [["discussion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discussion_readers" ("created_at", "discussion_id", "last_read_at", "read_comments_count", "read_items_count", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 10:57:09.180733"], ["discussion_id", 1], ["last_read_at", "2014-10-22 10:54:11.256125"], ["read_comments_count", 3], ["read_items_count", 7], ["updated_at", "2014-10-22 10:57:09.180733"], ["user_id", 2]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:57:09.184238')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (1.6ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 2 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "motion_readers" ("created_at", "last_read_at", "motion_id", "read_activity_count", "read_votes_count", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["created_at", "2014-10-22 10:57:09.193879"], ["last_read_at", "2014-10-22 10:57:09.184238"], ["motion_id", 1], ["read_activity_count", 2], ["read_votes_count", 1], ["updated_at", "2014-10-22 10:57:09.193879"], ["user_id", 2]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1514ms (Views: 1439.1ms | ActiveRecord: 21.4ms)


Started GET "/notifications/dropdown_items" for 10.182.234.126 at 2014-10-22 13:57:09 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 2]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 2]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 2]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 21ms (Views: 7.6ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 10.182.234.126 at 2014-10-22 13:57:09 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 2]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 2]]
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 2]]
  Rendered application/_groups_tree.html.haml (28.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (35.9ms)
Completed 200 OK in 62ms (Views: 50.5ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 13:57:09 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 3.8ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:57:20 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (2.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (1.0ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.7ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.8ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (3.8ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.2ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (43.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (1.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (20.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.9ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_activity.html.haml (102.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (202.4ms)
  Rendered application/_social_metadata.html.haml (7.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.4ms)
  Rendered application/_search.html.haml (5.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.6ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (37.8ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:57:20.259848' and ends_at > '2014-10-22 10:57:20.259848')
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:57:21.923846')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:57:21.923846"], ["updated_at", "2014-10-22 10:57:21.941757"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 1706ms (Views: 1606.1ms | ActiveRecord: 25.1ms)


Started GET "/m/fd2q7DSu/votes/new?position=yes" for 10.182.234.126 at 2014-10-22 13:57:21 +0300
Processing by VotesController#new as HTML
  Parameters: {"position"=>"yes", "motion_id"=>"fd2q7DSu"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 2]]
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 2  ORDER BY "votes"."id" DESC LIMIT 1  [["motion_id", 1]]
  Rendered application/_hint.html.haml (0.3ms)
  Rendered votes/_form.html.haml (23.5ms)
  Rendered votes/new.html.haml within layouts/application (27.7ms)
  Rendered application/_social_metadata.html.haml (5.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 2]]
  Rendered application/_user_profile_options.html.haml (3.0ms)
  Rendered application/_search.html.haml (4.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (1.5ms)
  Rendered application/_user_dropdown.html.haml (4.4ms)
  Rendered application/_header.html.haml (39.3ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:57:21.976415' and ends_at > '2014-10-22 10:57:21.976415')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.6ms)
  Rendered application/_footer.html.haml (6.6ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1293ms (Views: 1262.9ms | ActiveRecord: 4.6ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 13:57:23 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.2ms)
  [1m[35mMembership Load (0.7ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.7ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.7ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (42.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.5ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (20.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.7ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_activity.html.haml (97.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.5ms)
  Rendered discussions/show.html.haml within layouts/application (198.0ms)
  Rendered application/_social_metadata.html.haml (38.4ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (32.8ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:57:23.293087' and ends_at > '2014-10-22 10:57:23.293087')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.5ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:57:24.739923')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 10:57:24.739923"], ["updated_at", "2014-10-22 10:57:24.756825"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 1479ms (Views: 1397.6ms | ActiveRecord: 21.5ms)


Started GET "/notifications/dropdown_items" for 10.182.234.126 at 2014-10-22 13:57:24 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 2]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 2]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 2]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 19ms (Views: 7.8ms | ActiveRecord: 1.2ms)


Started GET "/notifications/groups_tree_dropdown" for 10.182.234.126 at 2014-10-22 13:57:24 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 2]]
  [1m[35mGroup Load (2.1ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 2]]
  Rendered application/_groups_tree.html.haml (72.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (84.6ms)
Completed 200 OK in 168ms (Views: 94.5ms | ActiveRecord: 5.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 13:57:25 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 53ms (Views: 0.9ms | ActiveRecord: 3.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 13:57:27 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.7ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 21ms (Views: 7.6ms | ActiveRecord: 1.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 13:57:27 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (21.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (29.4ms)
Completed 200 OK in 49ms (Views: 32.7ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:57:27 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 1.0ms | ActiveRecord: 2.9ms)


Started POST "/m/fd2q7DSu/votes" for 10.182.234.126 at 2014-10-22 13:58:03 +0300
Processing by VotesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ddtO6a5lRJ/W9odsMLZ8GF8GVbq+W6lNn/Tp124fVUE=", "vote"=>{"position"=>"yes", "statement"=>"I think It's a great Idea"}, "commit"=>"Submit position", "motion_id"=>"fd2q7DSu"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 2]]
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "users"."id" = 2 LIMIT 1  [["group_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "votes" SET age = age + 1 WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 2[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 2 AND "votes"."age" = 1  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "votes" ("created_at", "motion_id", "position", "statement", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2014-10-22 10:58:03.918834"], ["motion_id", 1], ["position", "yes"], ["statement", "I think It's a great Idea"], ["updated_at", "2014-10-22 10:58:03.918834"], ["user_id", 2]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "motions" SET "votes_count" = COALESCE("votes_count", 0) + 1 WHERE "motions"."id" = 1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "motions" SET "updated_at" = '2014-10-22 10:58:03.928132', "last_vote_at" = '2014-10-22 10:58:03.928132' WHERE "motions"."id" = 1[0m
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mMotion Exists (0.6ms)[0m  SELECT  1 AS one FROM "motions"  WHERE ("motions"."key" = 'fd2q7DSu' AND "motions"."id" != 1) LIMIT 1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "motions" SET "updated_at" = $1, "yes_votes_count" = $2 WHERE "motions"."id" = 1  [["updated_at", "2014-10-22 10:58:03.996619"], ["yes_votes_count", 1]]
  [1m[36m (20.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 8 AND "events"."discussion_id" = 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 10:58:03.918834"], ["discussion_id", 1], ["eventable_id", 3], ["eventable_type", "Vote"], ["kind", "new_vote"], ["sequence_id", 8], ["updated_at", "2014-10-22 10:58:04.033534"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_activity_at", "2014-10-22 10:58:03.918834"], ["updated_at", "2014-10-22 10:58:04.037903"]]
  [1m[35m (23.7ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "discussion_readers" SET "following" = $1, "updated_at" = $2 WHERE "discussion_readers"."id" = 2[0m  [["following", "t"], ["updated_at", "2014-10-22 10:58:04.068581"]]
  [1m[35m (1.5ms)[0m  COMMIT
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id != 2) AND "users"."email_followed_threads" = 't'[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 10:58:04.995637"], ["handler", "--- !ruby/object:Delayed::PerformableMailer\nobject: !ruby/class 'ThreadMailer'\nmethod_name: :new_vote\nargs:\n- !ruby/ActiveRecord:User\n  attributes:\n    id: 1\n    email: teamco@gmail.com\n    encrypted_password: \"$2a$10$VV0vJkBRviwj3/yU49vu9uHrfrM8e9INITClMknnSITxxySTGEd32\"\n    reset_password_token: \n    reset_password_sent_at: \n    remember_created_at: \n    sign_in_count: 1\n    current_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n    last_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n    current_sign_in_ip: 127.0.0.1\n    last_sign_in_ip: 127.0.0.1\n    created_at: 2014-10-22 09:08:19.268480000 Z\n    updated_at: 2014-10-22 09:08:19.939359000 Z\n    name: vladimir\n    deactivated_at: \n    is_admin: false\n    avatar_kind: gravatar\n    uploaded_avatar_file_name: \n    uploaded_avatar_content_type: \n    uploaded_avatar_file_size: \n    uploaded_avatar_updated_at: \n    avatar_initials: V\n    username: vladimir\n    email_followed_threads: true\n    email_when_proposal_closing_soon: true\n    authentication_token: \n    unsubscribe_token: RqVyZE8Awv8J_VEPQipQ\n    memberships_count: 1\n    uses_markdown: false\n    selected_locale: \n    time_zone: Asia/Damascus\n    key: wbZrEWYv\n    detected_locale: en\n    email_missed_yesterday: true\n    email_api_key: 9f8ec14535972e77a9c6c2e0eaa4b6fb\n    email_new_discussions_and_proposals: true\n    email_when_mentioned: true\n- !ruby/ActiveRecord:Events::NewVote\n  attributes:\n    id: 10\n    kind: new_vote\n    created_at: 2014-10-22 10:58:03.918834000 Z\n    updated_at: 2014-10-22 10:58:04.033534000 Z\n    eventable_id: 3\n    eventable_type: Vote\n    user_id: \n    discussion_id: 1\n    sequence_id: 8\n"], ["run_at", "2014-10-22 10:58:04.995413"], ["updated_at", "2014-10-22 10:58:04.995637"]]
  [1m[35m (2.2ms)[0m  COMMIT
Redirected to http://10.182.238.106:3000/m/fd2q7DSu/course
Completed 302 Found in 1129ms (ActiveRecord: 65.5ms)


Started GET "/m/fd2q7DSu/course" for 10.182.234.126 at 2014-10-22 13:58:05 +0300
Processing by MotionsController#show as HTML
  Parameters: {"id"=>"fd2q7DSu", "slug"=>"course"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 2]]
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu' LIMIT 1[0m
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
Redirected to http://10.182.238.106:3000/d/YPUgfENW/title
Completed 302 Found in 19ms (ActiveRecord: 2.1ms)


Started GET "/d/YPUgfENW/title" for 10.182.234.126 at 2014-10-22 13:58:05 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 2]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 2]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 2 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (5.6ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 2 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (1.2ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (5.2ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.6ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 2 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 2 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2)
  Rendered motions/_vote_row.html.haml (4.3ms)
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (47.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (1.3ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.7ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (3.2ms)
  Rendered comments/_comment.html.haml (19.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.2ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.1ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_activity.html.haml (105.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.6ms)
  Rendered discussions/show.html.haml within layouts/application (208.5ms)
  Rendered application/_social_metadata.html.haml (6.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 2]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (32.2ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 10:58:05.117059' and ends_at > '2014-10-22 10:58:05.117059')
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (9.5ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:58:03.918834')  [["discussion_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 10:58:03.918834')[0m  [["discussion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 2 AND "discussion_readers"."id" != 2 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_items_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 2  [["last_read_at", "2014-10-22 10:58:03.918834"], ["read_items_count", 8], ["updated_at", "2014-10-22 10:58:06.664609"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 10:58:06.667814')[0m  [["motion_id", 1]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 2 AND "motion_readers"."id" != 2 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "read_activity_count" = $2, "read_votes_count" = $3, "updated_at" = $4 WHERE "motion_readers"."id" = 2  [["last_read_at", "2014-10-22 10:58:06.667814"], ["read_activity_count", 3], ["read_votes_count", 2], ["updated_at", "2014-10-22 10:58:06.684589"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1583ms (Views: 1489.4ms | ActiveRecord: 26.6ms)


Started GET "/notifications/dropdown_items" for 10.182.234.126 at 2014-10-22 13:58:06 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 2]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 2]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 2]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 20ms (Views: 7.4ms | ActiveRecord: 1.2ms)


Started GET "/notifications/groups_tree_dropdown" for 10.182.234.126 at 2014-10-22 13:58:06 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 2]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 2]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 2]]
  Rendered application/_groups_tree.html.haml (16.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (23.6ms)
Completed 200 OK in 36ms (Views: 26.9ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 13:58:07 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started POST "/comments/3/like?like=true" for 10.182.234.126 at 2014-10-22 13:58:27 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"true", "id"=>"3"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3)[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mCommentVote Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "comment_votes"  WHERE ("comment_votes"."user_id" = 2 AND "comment_votes"."comment_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "comment_votes" ("comment_id", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["comment_id", 3], ["created_at", "2014-10-22 10:58:27.744584"], ["updated_at", "2014-10-22 10:58:27.744584"], ["user_id", 2]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) + 1 WHERE "comments"."id" = 3[0m
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 3  [["liker_ids_and_names", "---\n2: Adi Erteschik\n"], ["updated_at", "2014-10-22 10:58:27.752635"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2014-10-22 10:58:27.761219"], ["event", "update"], ["item_id", 3], ["item_type", "Comment"], ["object", "---\nid: 3\ndiscussion_id: 1\nbody: discussion3\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:43:07.302927000 Z\nupdated_at: 2014-10-22 10:43:07.302927000 Z\nuses_markdown: false\ncomment_votes_count: 0\nattachments_count: 0\nliker_ids_and_names: |\n  ---\n  2: Adi Erteschik\nedited_at: \n"], ["whodunnit", 2]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "events" ("created_at", "eventable_id", "eventable_type", "kind", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2014-10-22 10:58:27.772558"], ["eventable_id", 2], ["eventable_type", "CommentVote"], ["kind", "comment_liked"], ["updated_at", "2014-10-22 10:58:27.772558"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2014-10-22 10:58:27.783402"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Events::CommentLiked\n  attributes:\n    id: 11\n    kind: comment_liked\n    created_at: &1 2014-10-22 10:58:27.772558000 Z\n    updated_at: *1\n    eventable_id: 2\n    eventable_type: CommentVote\n    user_id: \n    discussion_id: \n    sequence_id: \nmethod_name: :notify_users_without_delay!\nargs: []\n"], ["run_at", "2014-10-22 10:58:27.783279"], ["updated_at", "2014-10-22 10:58:27.783402"]]
  [1m[36m (15.4ms)[0m  [1mCOMMIT[0m
  Rendered comments/_comment_likes.html.haml (2.3ms)
  Rendered comments/comment_likes.js.erb (8.4ms)
Completed 200 OK in 163ms (Views: 37.4ms | ActiveRecord: 27.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 13:58:27 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 13:59:16 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (4.2ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 27ms (Views: 0.5ms | ActiveRecord: 7.6ms)


Started POST "/d/YPUgfENW/add_comment" for 10.182.234.126 at 2014-10-22 14:00:07 +0300
Processing by DiscussionsController#add_comment as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ddtO6a5lRJ/W9odsMLZ8GF8GVbq+W6lNn/Tp124fVUE=", "comment"=>"Do you think we should add more file options?", "uses_markdown"=>"false", "commit"=>"Post comment", "id"=>"YPUgfENW"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
>>>>>>>>>>>>>>>> add_comment
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "comments" ("body", "created_at", "discussion_id", "liker_ids_and_names", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["body", "Do you think we should add more file options?"], ["created_at", "2014-10-22 11:00:07.892382"], ["discussion_id", 1], ["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 11:00:07.892382"], ["user_id", 2]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "whodunnit") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 11:00:07.897488"], ["event", "create"], ["item_id", 4], ["item_type", "Comment"], ["whodunnit", 2]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "discussions" SET "comments_count" = COALESCE("comments_count", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "last_comment_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1  [["last_comment_at", "2014-10-22 11:00:07.892382"], ["updated_at", "2014-10-22 11:00:07.904678"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 11:00:07.892382')  [["discussion_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 11:00:07.892382')[0m  [["discussion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 2 AND "discussion_readers"."id" != 2 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_comments_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 2  [["last_read_at", "2014-10-22 11:00:07.892382"], ["read_comments_count", 4], ["updated_at", "2014-10-22 11:00:07.942531"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mEvent Load (0.9ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 9 AND "events"."discussion_id" = 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2014-10-22 11:00:07.892382"], ["discussion_id", 1], ["eventable_id", 4], ["eventable_type", "Comment"], ["kind", "new_comment"], ["sequence_id", 9], ["updated_at", "2014-10-22 11:00:07.976574"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_activity_at", "2014-10-22 11:00:07.892382"], ["updated_at", "2014-10-22 11:00:08.056630"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 2 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 2)[0m  [["group_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "users"."id" FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 2)  [["group_id", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id NOT IN (2)) AND "users"."email_followed_threads" = 't'[0m
  [1m[35m (3.9ms)[0m  BEGIN
  [1m[36mSQL (17.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 11:00:08.113852"], ["handler", "--- !ruby/object:Delayed::PerformableMailer\nobject: !ruby/class 'ThreadMailer'\nmethod_name: :new_comment\nargs:\n- !ruby/ActiveRecord:User\n  attributes:\n    id: 1\n    email: teamco@gmail.com\n    encrypted_password: \"$2a$10$VV0vJkBRviwj3/yU49vu9uHrfrM8e9INITClMknnSITxxySTGEd32\"\n    reset_password_token: \n    reset_password_sent_at: \n    remember_created_at: \n    sign_in_count: 1\n    current_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n    last_sign_in_at: 2014-10-22 09:08:19.877950000 Z\n    current_sign_in_ip: 127.0.0.1\n    last_sign_in_ip: 127.0.0.1\n    created_at: 2014-10-22 09:08:19.268480000 Z\n    updated_at: 2014-10-22 09:08:19.939359000 Z\n    name: vladimir\n    deactivated_at: \n    is_admin: false\n    avatar_kind: gravatar\n    uploaded_avatar_file_name: \n    uploaded_avatar_content_type: \n    uploaded_avatar_file_size: \n    uploaded_avatar_updated_at: \n    avatar_initials: V\n    username: vladimir\n    email_followed_threads: true\n    email_when_proposal_closing_soon: true\n    authentication_token: \n    unsubscribe_token: RqVyZE8Awv8J_VEPQipQ\n    memberships_count: 1\n    uses_markdown: false\n    selected_locale: \n    time_zone: Asia/Damascus\n    key: wbZrEWYv\n    detected_locale: en\n    email_missed_yesterday: true\n    email_api_key: 9f8ec14535972e77a9c6c2e0eaa4b6fb\n    email_new_discussions_and_proposals: true\n    email_when_mentioned: true\n- !ruby/ActiveRecord:Events::NewComment\n  attributes:\n    id: 12\n    kind: new_comment\n    created_at: 2014-10-22 11:00:07.892382000 Z\n    updated_at: 2014-10-22 11:00:07.976574000 Z\n    eventable_id: 4\n    eventable_type: Comment\n    user_id: \n    discussion_id: 1\n    sequence_id: 9\n"], ["run_at", "2014-10-22 11:00:08.113658"], ["updated_at", "2014-10-22 11:00:08.113852"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'oJSuA17y' AND "users"."id" != 2) LIMIT 1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'adi.erteschik@gmail.com' AND "users"."id" != 2) LIMIT 1[0m
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'adierteschik' AND "users"."id" != 2) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (11.9ms)
  [1m[35m (13.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 2]]
  [1m[36m (2.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment.html.haml (56.7ms)
  Rendered discussions/add_comment.js.erb (58.7ms)
Completed 200 OK in 376ms (Views: 68.1ms | ActiveRecord: 63.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:00:41 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 53ms (Views: 0.8ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:01:16 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:03:41 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.1ms)
Completed 200 OK in 19ms (Views: 0.7ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:04:18 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:07:41 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:08:19 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:09:28 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.8ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (6.7ms)
  [1m[35mMembership Load (0.9ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.2ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (11.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (2.1ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (11.7ms)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.7ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.8ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (70.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (23.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.6ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.8ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (24.3ms)
  Rendered discussions/_activity.html.haml (151.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (16.0ms)
  Rendered discussions/show.html.haml within layouts/application (422.9ms)
  Rendered application/_social_metadata.html.haml (5.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (7.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (45.6ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:09:28.205912' and ends_at > '2014-10-22 11:09:28.205912')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (11.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (27.5ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 11:00:07.892382')  [["discussion_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 11:00:07.892382')[0m  [["discussion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "discussion_readers" SET "last_read_at" = $1, "read_comments_count" = $2, "read_items_count" = $3, "updated_at" = $4 WHERE "discussion_readers"."id" = 1  [["last_read_at", "2014-10-22 11:00:07.892382"], ["read_comments_count", 4], ["read_items_count", 9], ["updated_at", "2014-10-22 11:09:30.156087"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:09:30.159024')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "read_activity_count" = $2, "read_votes_count" = $3, "updated_at" = $4 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 11:09:30.159024"], ["read_activity_count", 3], ["read_votes_count", 2], ["updated_at", "2014-10-22 11:09:30.176173"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1985ms (Views: 1861.9ms | ActiveRecord: 53.4ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:09:35 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.4ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 76ms (Views: 56.7ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:09:35 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (65.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (78.3ms)
Completed 200 OK in 105ms (Views: 89.2ms | ActiveRecord: 4.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:09:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 0.9ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:10:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.5ms | ActiveRecord: 3.2ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:12:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:13:20 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:15:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:18:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.7ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:19:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (2.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 35ms (Views: 0.9ms | ActiveRecord: 6.5ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:23:28 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.2ms)
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 3.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:24:37 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:28:28 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (2.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (4.9ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 36ms (Views: 0.7ms | ActiveRecord: 10.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:29:42 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:33:29 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:34:04 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (5.4ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (7.0ms)
  Rendered discussions/_privacy_icon.html.haml (1.3ms)
  Rendered discussions/_title.html.haml (13.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (18.7ms)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.7ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (5.6ms)
  Rendered motions/_motion.html.haml (55.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment.html.haml (26.2ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (9.1ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (22.2ms)
  Rendered discussions/_discussion_item.html.haml (3.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (9.2ms)
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment.html.haml (26.1ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (12.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (32.6ms)
  Rendered discussions/_activity.html.haml (166.3ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (22.3ms)
  Rendered discussions/show.html.haml within layouts/application (390.4ms)
  Rendered application/_social_metadata.html.haml (6.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (43.0ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:34:04.513220' and ends_at > '2014-10-22 11:34:04.513220')
  Rendered application/_announcements.html.haml (1.5ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (9.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (25.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:34:06.701808')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 11:34:06.701808"], ["updated_at", "2014-10-22 11:34:06.724815"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 2228ms (Views: 2064.1ms | ActiveRecord: 48.3ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:34:09 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 109ms (Views: 93.2ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:34:09 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (108.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (128.5ms)
Completed 200 OK in 175ms (Views: 142.9ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:34:09 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 49ms (Views: 0.9ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:34:26 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (3.9ms)
  [1m[36mMembership Load (0.7ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.4ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.4ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.9ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.6ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.6ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (6.1ms)
  Rendered motions/_motion.html.haml (51.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.7ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (21.6ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (8.8ms)
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment.html.haml (21.7ms)
  Rendered discussions/_activity.html.haml (131.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.9ms)
  Rendered discussions/_add_comment.html.haml (16.4ms)
  Rendered discussions/show.html.haml within layouts/application (243.9ms)
  Rendered application/_social_metadata.html.haml (8.0ms)
  [1m[36m (3.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.2ms)
  Rendered application/_header.html.haml (49.5ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:34:26.641739' and ends_at > '2014-10-22 11:34:26.641739')[0m
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.0ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.2ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:34:28.271345')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 11:34:28.271345"], ["updated_at", "2014-10-22 11:34:28.287874"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1661ms (Views: 1572.6ms | ActiveRecord: 27.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:34:31 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 142ms (Views: 128.2ms | ActiveRecord: 1.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:34:31 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (2.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (30.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (214.7ms)
Completed 200 OK in 236ms (Views: 217.3ms | ActiveRecord: 5.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:34:31 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 35ms (Views: 0.8ms | ActiveRecord: 4.0ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:34:52 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.4ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.8ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.1ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (6.2ms)
  Rendered motions/_motion.html.haml (55.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (22.5ms)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.8ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (18.9ms)
  Rendered discussions/_activity.html.haml (128.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (1.0ms)
  Rendered discussions/_add_comment.html.haml (59.1ms)
  Rendered discussions/show.html.haml within layouts/application (285.1ms)
  Rendered application/_social_metadata.html.haml (6.5ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (34.2ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:34:52.470681' and ends_at > '2014-10-22 11:34:52.470681')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (9.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:34:54.004941')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 11:34:54.004941"], ["updated_at", "2014-10-22 11:34:54.023301"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 1568ms (Views: 1480.4ms | ActiveRecord: 22.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:34:57 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 95ms (Views: 72.4ms | ActiveRecord: 1.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:34:57 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (174.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (183.2ms)
Completed 200 OK in 215ms (Views: 189.8ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:34:57 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 38ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:35:58 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (3.3ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.6ms | ActiveRecord: 4.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:37:58 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.7ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:38:30 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (2.1ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 4.2ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:40:16 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (14.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (1.0ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (4.4ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.5ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (9.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.0ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.7ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (4.6ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (7.2ms)
  Rendered motions/_motion.html.haml (55.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.8ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (20.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.5ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered discussions/_activity.html.haml (120.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.1ms)
  Rendered discussions/show.html.haml within layouts/application (233.4ms)
  Rendered application/_social_metadata.html.haml (6.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.5ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (33.5ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:40:16.268744' and ends_at > '2014-10-22 11:40:16.268744')[0m
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.3ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.9ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:40:17.880645')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 11:40:17.880645"], ["updated_at", "2014-10-22 11:40:17.897655"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1658ms (Views: 1557.0ms | ActiveRecord: 37.6ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:40:21 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 25ms (Views: 10.9ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:40:21 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (20.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (29.7ms)
Completed 200 OK in 58ms (Views: 33.2ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:40:21 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.9ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:40:49 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (1.0ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.1ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.9ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (11.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.5ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.1ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (3.0ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (93.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (23.0ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.9ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.0ms)
  Rendered discussions/_discussion_item.html.haml (2.8ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_activity.html.haml (128.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (1.4ms)
  Rendered discussions/_add_comment.html.haml (16.4ms)
  Rendered discussions/show.html.haml within layouts/application (282.4ms)
  Rendered application/_social_metadata.html.haml (5.1ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (7.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (5.2ms)
  Rendered application/_header.html.haml (36.6ms)
  [1m[35mAnnouncement Load (0.6ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:40:49.646306' and ends_at > '2014-10-22 11:40:49.646306')
  Rendered application/_announcements.html.haml (1.5ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.2ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:40:51.206802')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 11:40:51.206802"], ["updated_at", "2014-10-22 11:40:51.223812"]]
  [1m[35m (1.2ms)[0m  COMMIT
Completed 200 OK in 1595ms (Views: 1501.7ms | ActiveRecord: 24.8ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:40:54 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (3.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.2ms)
Completed 200 OK in 27ms (Views: 9.9ms | ActiveRecord: 3.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:40:54 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (3.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (26.3ms)
Completed 200 OK in 47ms (Views: 30.2ms | ActiveRecord: 6.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:40:54 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 28ms (Views: 1.1ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:41:31 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.2ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.7ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.6ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.6ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (5.7ms)
  Rendered motions/_motion.html.haml (52.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (23.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (20.7ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.3ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment.html.haml (18.9ms)
  Rendered discussions/_activity.html.haml (131.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.9ms)
  Rendered discussions/show.html.haml within layouts/application (241.5ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (36.0ms)
  Rendered application/_search.html.haml (5.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (82.7ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:41:31.898167' and ends_at > '2014-10-22 11:41:31.898167')[0m
  Rendered application/_announcements.html.haml (1.5ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.2ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (105.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:41:33.633969')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 11:41:33.633969"], ["updated_at", "2014-10-22 11:41:33.681702"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1802ms (Views: 1569.5ms | ActiveRecord: 127.3ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:41:36 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (189.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (196.8ms)
Completed 200 OK in 230ms (Views: 200.9ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:41:37 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (12.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (11.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 196ms (Views: 0.8ms | ActiveRecord: 26.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:41:37 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (2.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (18.6ms)
Completed 200 OK in 47ms (Views: 27.5ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:42:38 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:42:43 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.8ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.9ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.4ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.4ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.7ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (11.2ms)
  [1m[36mMotion Load (0.7ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (5.6ms)
  Rendered motions/_motion.html.haml (55.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.7ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.1ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (8.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (22.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (19.1ms)
  Rendered discussions/_discussion_item.html.haml (7.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.6ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (20.0ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_activity.html.haml (134.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.5ms)
  Rendered discussions/show.html.haml within layouts/application (250.9ms)
  Rendered application/_social_metadata.html.haml (6.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (5.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (31.5ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:42:43.933665' and ends_at > '2014-10-22 11:42:43.933665')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.6ms)
  Rendered application/_footer.html.haml (9.9ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.6ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:42:45.562313')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 11:42:45.562313"], ["updated_at", "2014-10-22 11:42:45.578613"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 1660ms (Views: 1574.2ms | ActiveRecord: 23.1ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:42:49 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (2.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 39ms (Views: 8.7ms | ActiveRecord: 2.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:42:49 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (23.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (29.5ms)
Completed 200 OK in 45ms (Views: 32.8ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:42:49 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 33ms (Views: 0.9ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:43:34 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.6ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:43:35 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.1ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.9ms)
  Rendered discussions/_privacy_icon.html.haml (1.3ms)
  Rendered discussions/_title.html.haml (11.2ms)
  [1m[35mUser Load (2.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (13.3ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (5.6ms)
  Rendered motions/_motion.html.haml (53.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (2.1ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.7ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (21.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (20.5ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment.html.haml (19.7ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered discussions/_activity.html.haml (142.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered discussions/_markdown_setting.html.haml (0.9ms)
  Rendered discussions/_add_comment.html.haml (16.0ms)
  Rendered discussions/show.html.haml within layouts/application (265.6ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (31.5ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:43:35.940244' and ends_at > '2014-10-22 11:43:35.940244')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (7.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.4ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:43:37.501186')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 11:43:37.501186"], ["updated_at", "2014-10-22 11:43:37.517644"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1644ms (Views: 1492.0ms | ActiveRecord: 26.7ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:43:41 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 126ms (Views: 77.8ms | ActiveRecord: 2.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:43:41 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (2.2ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (24.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (30.2ms)
Completed 200 OK in 47ms (Views: 31.6ms | ActiveRecord: 4.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:43:41 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:48:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:48:34 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 3.6ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:48:57 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (6.1ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (48.7ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (61.7ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.9ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (5.7ms)
  Rendered motions/_motion.html.haml (77.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (1.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (1.2ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (6.8ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (15.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (3.4ms)
  Rendered comments/_comment.html.haml (35.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (22.6ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (20.1ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (21.1ms)
  Rendered discussions/_activity.html.haml (216.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.9ms)
  Rendered discussions/_add_comment.html.haml (19.6ms)
  Rendered discussions/show.html.haml within layouts/application (474.3ms)
  Rendered application/_social_metadata.html.haml (6.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (39.4ms)
  [1m[35mAnnouncement Load (0.6ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:48:57.886227' and ends_at > '2014-10-22 11:48:57.886227')
  Rendered application/_announcements.html.haml (1.8ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.5ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (32.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:49:12.357517')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (1.1ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 11:49:12.357517"], ["updated_at", "2014-10-22 11:49:12.379990"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 14508ms (Views: 14380.9ms | ActiveRecord: 57.6ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:49:18 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 72ms (Views: 49.9ms | ActiveRecord: 1.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:49:18 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (12.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (147.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (179.3ms)
Completed 200 OK in 287ms (Views: 183.1ms | ActiveRecord: 15.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:49:18 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 1.7ms | ActiveRecord: 3.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:50:00 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (1.1ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (6.7ms)
  [1m[36mMembership Load (0.7ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.8ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.3ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.6ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (5.4ms)
  Rendered motions/_motion.html.haml (50.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.4ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (20.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.6ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.2ms)
  Rendered discussions/_activity.html.haml (120.3ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.9ms)
  Rendered discussions/_add_comment.html.haml (16.4ms)
  Rendered discussions/show.html.haml within layouts/application (265.2ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (4.0ms)
  Rendered application/_header.html.haml (32.7ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:50:00.375697' and ends_at > '2014-10-22 11:50:00.375697')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.5ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:50:02.025402')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 11:50:02.025402"], ["updated_at", "2014-10-22 11:50:02.042340"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1680ms (Views: 1598.0ms | ActiveRecord: 23.3ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:50:07 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (63.1ms)
Completed 200 OK in 117ms (Views: 95.5ms | ActiveRecord: 3.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:50:07 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (3.8ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 79ms (Views: 53.1ms | ActiveRecord: 5.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:50:07 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 279ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:51:13 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:53:13 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:53:37 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:56:13 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 14:56:51 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.1ms)
  [1m[35mMembership Load (1.3ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (18.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (7.7ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.2ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.6ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (6.9ms)
  Rendered motions/_motion.html.haml (50.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.0ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (21.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.8ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.0ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (15.7ms)
  Rendered discussions/_activity.html.haml (129.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.6ms)
  Rendered discussions/_add_comment.html.haml (14.1ms)
  Rendered discussions/show.html.haml within layouts/application (283.4ms)
  Rendered application/_social_metadata.html.haml (7.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (9.0ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (40.2ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 11:56:51.371464' and ends_at > '2014-10-22 11:56:51.371464')
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (9.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (23.9ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 11:57:06.494708')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 11:57:06.494708"], ["updated_at", "2014-10-22 11:57:06.513585"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 15155ms (Views: 15048.6ms | ActiveRecord: 45.6ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:57:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (9.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (10.1ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 194ms (Views: 0.9ms | ActiveRecord: 20.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 14:57:10 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (9.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (86.8ms)
  Rendered notifications/groups_tree_dropdown.html.haml (119.7ms)
Completed 200 OK in 231ms (Views: 189.0ms | ActiveRecord: 12.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 14:57:10 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (1.5ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.8ms)
Completed 200 OK in 109ms (Views: 75.1ms | ActiveRecord: 2.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 14:58:11 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 27ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 14:58:37 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:00:11 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (4.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (2.3ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 27ms (Views: 0.5ms | ActiveRecord: 7.7ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:01:22 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.3ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.2ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (11.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.6ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (6.7ms)
  Rendered motions/_motion.html.haml (75.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.7ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (22.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (18.9ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (51.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (61.7ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (0.9ms)
  Rendered comments/_comment.html.haml (16.0ms)
  Rendered discussions/_activity.html.haml (169.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (16.2ms)
  Rendered discussions/show.html.haml within layouts/application (411.5ms)
  Rendered application/_social_metadata.html.haml (6.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (6.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (42.1ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:01:22.034230' and ends_at > '2014-10-22 12:01:22.034230')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.9ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (22.0ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:01:23.994227')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 12:01:23.994227"], ["updated_at", "2014-10-22 12:01:24.011546"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1992ms (Views: 1888.3ms | ActiveRecord: 42.6ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:01:27 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.7ms)
Completed 200 OK in 81ms (Views: 60.9ms | ActiveRecord: 1.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:01:27 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (77.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (90.9ms)
Completed 200 OK in 125ms (Views: 99.8ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:01:27 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:02:28 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:03:43 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:04:28 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.5ms | ActiveRecord: 3.4ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:05:23 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.7ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.7ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (27.7ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.2ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (57.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (1.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.4ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (16.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (32.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.5ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (19.1ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.5ms)
  Rendered discussions/_activity.html.haml (166.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.3ms)
  Rendered discussions/show.html.haml within layouts/application (400.8ms)
  Rendered application/_social_metadata.html.haml (7.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (7.0ms)
  Rendered base/_avatar.html.haml (1.5ms)
  Rendered application/_user_profile_options.html.haml (1.9ms)
  Rendered application/_user_dropdown.html.haml (17.9ms)
  Rendered application/_header.html.haml (74.7ms)
  [1m[35mAnnouncement Load (0.8ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:05:24.043458' and ends_at > '2014-10-22 12:05:24.043458')
  Rendered application/_announcements.html.haml (1.9ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.6ms)
  Rendered application/_footer.html.haml (12.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (25.0ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.7ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:05:40.273107')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 12:05:40.273107"], ["updated_at", "2014-10-22 12:05:40.294215"]]
  [1m[35m (1.1ms)[0m  COMMIT
Completed 200 OK in 16267ms (Views: 16150.0ms | ActiveRecord: 47.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:05:44 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.4ms)
Completed 200 OK in 93ms (Views: 77.1ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:05:44 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (33.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (74.8ms)
Completed 200 OK in 97ms (Views: 81.6ms | ActiveRecord: 3.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:05:44 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 81ms (Views: 0.9ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:06:45 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:08:15 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (6.4ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (15.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (20.8ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.8ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.7ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (6.9ms)
  Rendered motions/_motion.html.haml (70.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.7ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment.html.haml (53.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.1ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.7ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (8.1ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered discussions/_activity.html.haml (166.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (1.1ms)
  Rendered discussions/_add_comment.html.haml (19.6ms)
  Rendered discussions/show.html.haml within layouts/application (418.3ms)
  Rendered application/_social_metadata.html.haml (7.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (5.7ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.6ms)
  Rendered application/_header.html.haml (35.7ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:08:15.940310' and ends_at > '2014-10-22 12:08:15.940310')[0m
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (8.9ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (27.8ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:08:30.923467')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 12:08:30.923467"], ["updated_at", "2014-10-22 12:08:30.941768"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 15017ms (Views: 14902.7ms | ActiveRecord: 48.7ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:08:35 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (5.5ms)
Completed 200 OK in 310ms (Views: 275.2ms | ActiveRecord: 1.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:08:35 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (28.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (50.5ms)
Completed 200 OK in 73ms (Views: 54.5ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:08:35 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 1.0ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:08:50 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 4.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:09:21 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.8ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.7ms)
  Rendered discussions/_privacy_icon.html.haml (1.3ms)
  Rendered discussions/_title.html.haml (20.2ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.6ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.6ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (10.8ms)
  Rendered motions/_motion.html.haml (59.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.9ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.3ms)
  Rendered base/_avatar.html.haml (1.0ms)
  Rendered base/_linked_avatar.html.haml (8.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (23.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (19.2ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (2.3ms)
  Rendered comments/_comment.html.haml (20.5ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered discussions/_activity.html.haml (135.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (16.5ms)
  Rendered discussions/show.html.haml within layouts/application (282.9ms)
  Rendered application/_social_metadata.html.haml (7.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_search.html.haml (7.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.4ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (39.2ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:09:21.685425' and ends_at > '2014-10-22 12:09:21.685425')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (9.3ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:09:23.207722')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 12:09:23.207722"], ["updated_at", "2014-10-22 12:09:23.227124"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 1555ms (Views: 1467.4ms | ActiveRecord: 22.7ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:09:26 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 50ms (Views: 8.1ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:09:26 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (162.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (177.2ms)
Completed 200 OK in 199ms (Views: 182.6ms | ActiveRecord: 5.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:09:26 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:10:17 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (11.4ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (7.3ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (12.2ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.5ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.4ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.5ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (79.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (1.1ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.7ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (26.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.9ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.4ms)
  Rendered discussions/_activity.html.haml (148.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (1.1ms)
  Rendered discussions/_add_comment.html.haml (15.9ms)
  Rendered discussions/show.html.haml within layouts/application (423.1ms)
  Rendered application/_social_metadata.html.haml (7.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.3ms)
  Rendered application/_header.html.haml (35.4ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:10:17.438697' and ends_at > '2014-10-22 12:10:17.438697')[0m
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (30.7ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:10:30.945132')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 12:10:30.945132"], ["updated_at", "2014-10-22 12:10:30.963223"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 13541ms (Views: 13423.4ms | ActiveRecord: 52.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:10:30 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 234ms (Views: 1.0ms | ActiveRecord: 4.1ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:10:34 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.4ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.4ms)
Completed 200 OK in 117ms (Views: 85.3ms | ActiveRecord: 1.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:10:35 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (226.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (263.4ms)
Completed 200 OK in 303ms (Views: 288.7ms | ActiveRecord: 4.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:10:35 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 1.2ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:11:35 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:13:35 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.5ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:13:57 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 62ms (Views: 0.7ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:16:36 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.9ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 28ms (Views: 0.5ms | ActiveRecord: 4.6ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:18:02 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.7ms)
  Rendered groups/_title.html.haml (6.2ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.6ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (10.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.0ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.6ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (8.0ms)
  Rendered motions/_motion.html.haml (85.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.8ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.0ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (22.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.1ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.0ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (15.9ms)
  Rendered discussions/_activity.html.haml (178.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.8ms)
  Rendered discussions/show.html.haml within layouts/application (440.6ms)
  Rendered application/_social_metadata.html.haml (8.3ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (12.4ms)
  Rendered base/_avatar.html.haml (1.4ms)
  Rendered application/_user_profile_options.html.haml (1.5ms)
  Rendered application/_user_dropdown.html.haml (10.8ms)
  Rendered application/_header.html.haml (57.7ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:18:02.445960' and ends_at > '2014-10-22 12:18:02.445960')
  Rendered application/_announcements.html.haml (1.5ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_footer_links.html.haml (1.6ms)
  Rendered application/_footer.html.haml (10.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (30.4ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.2ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:18:17.254373')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 12:18:17.254373"], ["updated_at", "2014-10-22 12:18:17.278385"]]
  [1m[35m (15.1ms)[0m  COMMIT
Completed 200 OK in 14861ms (Views: 14719.6ms | ActiveRecord: 66.3ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:18:20 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (17.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (10.2ms)
Completed 200 OK in 122ms (Views: 73.0ms | ActiveRecord: 18.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:18:21 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (10.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (71.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (134.9ms)
Completed 200 OK in 224ms (Views: 141.6ms | ActiveRecord: 13.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:18:21 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (2.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 31ms (Views: 0.9ms | ActiveRecord: 5.6ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:19:03 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (4.2ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 29ms (Views: 0.6ms | ActiveRecord: 5.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:19:21 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:21:21 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 3.1ms)


Started POST "/comments/1/like?like=true" for 127.0.0.1 at 2014-10-22 15:22:11 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"true", "id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCommentVote Exists (0.5ms)[0m  SELECT  1 AS one FROM "comment_votes"  WHERE ("comment_votes"."user_id" = 1 AND "comment_votes"."comment_id" = 1) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "comment_votes" ("comment_id", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["comment_id", 1], ["created_at", "2014-10-22 12:22:11.578282"], ["updated_at", "2014-10-22 12:22:11.578282"], ["user_id", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) + 1 WHERE "comments"."id" = 1
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 1[0m  [["liker_ids_and_names", "---\n1: vladimir\n"], ["updated_at", "2014-10-22 12:22:11.585115"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", "2014-10-22 12:22:11.592688"], ["event", "update"], ["item_id", 1], ["item_type", "Comment"], ["object", "---\nid: 1\ndiscussion_id: 1\nbody: this is a discussion1\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:41:29.836406000 Z\nupdated_at: 2014-10-22 10:41:29.836406000 Z\nuses_markdown: false\ncomment_votes_count: 0\nattachments_count: 0\nliker_ids_and_names: |\n  ---\n  1: vladimir\nedited_at: \n"], ["whodunnit", 1]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "events" ("created_at", "eventable_id", "eventable_type", "kind", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 12:22:11.601461"], ["eventable_id", 3], ["eventable_type", "CommentVote"], ["kind", "comment_liked"], ["updated_at", "2014-10-22 12:22:11.601461"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 12:22:11.605815"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Events::CommentLiked\n  attributes:\n    id: 13\n    kind: comment_liked\n    created_at: &1 2014-10-22 12:22:11.601461000 Z\n    updated_at: *1\n    eventable_id: 3\n    eventable_type: CommentVote\n    user_id: \n    discussion_id: \n    sequence_id: \nmethod_name: :notify_users_without_delay!\nargs: []\n"], ["run_at", "2014-10-22 12:22:11.605669"], ["updated_at", "2014-10-22 12:22:11.605815"]]
  [1m[35m (1.0ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (2.8ms)
  Rendered comments/comment_likes.js.erb (11.7ms)
Completed 200 OK in 148ms (Views: 72.2ms | ActiveRecord: 11.5ms)


Started POST "/comments/1/like?like=false" for 127.0.0.1 at 2014-10-22 15:22:21 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"false", "id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCommentVote Load (0.3ms)[0m  [1mSELECT "comment_votes".* FROM "comment_votes"  WHERE "comment_votes"."comment_id" = $1 AND "comment_votes"."user_id" = 1[0m  [["comment_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) - 1 WHERE "comments"."id" = 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events"  WHERE "events"."eventable_id" = $1 AND "events"."eventable_type" = $2  [["eventable_id", 3], ["eventable_type", "CommentVote"]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT "notifications".* FROM "notifications"  WHERE "notifications"."event_id" = $1[0m  [["event_id", 13]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "events" WHERE "events"."id" = $1  [["id", 13]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "comment_votes" WHERE "comment_votes"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 1  [["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 12:22:21.407729"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2014-10-22 12:22:21.413302"], ["event", "update"], ["item_id", 1], ["item_type", "Comment"], ["object", "---\nid: 1\ndiscussion_id: 1\nbody: this is a discussion1\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:41:29.836406000 Z\nupdated_at: 2014-10-22 12:22:11.585115000 Z\nuses_markdown: false\ncomment_votes_count: 1\nattachments_count: 0\nliker_ids_and_names: |\n  --- {}\nedited_at: \n"], ["whodunnit", 1]]
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/comment_likes.js.erb (7.7ms)
Completed 200 OK in 87ms (Views: 21.2ms | ActiveRecord: 9.2ms)


Started POST "/comments/1/like?like=true" for 127.0.0.1 at 2014-10-22 15:22:22 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"true", "id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCommentVote Exists (0.5ms)[0m  SELECT  1 AS one FROM "comment_votes"  WHERE ("comment_votes"."user_id" = 1 AND "comment_votes"."comment_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "comment_votes" ("comment_id", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["comment_id", 1], ["created_at", "2014-10-22 12:22:22.094662"], ["updated_at", "2014-10-22 12:22:22.094662"], ["user_id", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) + 1 WHERE "comments"."id" = 1
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 1[0m  [["liker_ids_and_names", "---\n1: vladimir\n"], ["updated_at", "2014-10-22 12:22:22.104095"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", "2014-10-22 12:22:22.112225"], ["event", "update"], ["item_id", 1], ["item_type", "Comment"], ["object", "---\nid: 1\ndiscussion_id: 1\nbody: this is a discussion1\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:41:29.836406000 Z\nupdated_at: 2014-10-22 12:22:21.407729000 Z\nuses_markdown: false\ncomment_votes_count: 0\nattachments_count: 0\nliker_ids_and_names: |\n  ---\n  1: vladimir\nedited_at: \n"], ["whodunnit", 1]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "eventable_id", "eventable_type", "kind", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 12:22:22.122269"], ["eventable_id", 4], ["eventable_type", "CommentVote"], ["kind", "comment_liked"], ["updated_at", "2014-10-22 12:22:22.122269"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 12:22:22.126567"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Events::CommentLiked\n  attributes:\n    id: 14\n    kind: comment_liked\n    created_at: &1 2014-10-22 12:22:22.122269000 Z\n    updated_at: *1\n    eventable_id: 4\n    eventable_type: CommentVote\n    user_id: \n    discussion_id: \n    sequence_id: \nmethod_name: :notify_users_without_delay!\nargs: []\n"], ["run_at", "2014-10-22 12:22:22.126437"], ["updated_at", "2014-10-22 12:22:22.126567"]]
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (2.5ms)
  Rendered comments/comment_likes.js.erb (7.9ms)
Completed 200 OK in 105ms (Views: 21.8ms | ActiveRecord: 10.7ms)


Started POST "/comments/1/like?like=false" for 127.0.0.1 at 2014-10-22 15:22:22 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"false", "id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCommentVote Load (0.6ms)[0m  [1mSELECT "comment_votes".* FROM "comment_votes"  WHERE "comment_votes"."comment_id" = $1 AND "comment_votes"."user_id" = 1[0m  [["comment_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) - 1 WHERE "comments"."id" = 1[0m
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events"  WHERE "events"."eventable_id" = $1 AND "events"."eventable_type" = $2  [["eventable_id", 4], ["eventable_type", "CommentVote"]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT "notifications".* FROM "notifications"  WHERE "notifications"."event_id" = $1[0m  [["event_id", 14]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "events" WHERE "events"."id" = $1  [["id", 14]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "comment_votes" WHERE "comment_votes"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 1  [["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 12:22:22.860957"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2014-10-22 12:22:22.866985"], ["event", "update"], ["item_id", 1], ["item_type", "Comment"], ["object", "---\nid: 1\ndiscussion_id: 1\nbody: this is a discussion1\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:41:29.836406000 Z\nupdated_at: 2014-10-22 12:22:22.104095000 Z\nuses_markdown: false\ncomment_votes_count: 1\nattachments_count: 0\nliker_ids_and_names: |\n  --- {}\nedited_at: \n"], ["whodunnit", 1]]
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (2.0ms)
  Rendered comments/comment_likes.js.erb (7.3ms)
Completed 200 OK in 81ms (Views: 22.6ms | ActiveRecord: 8.8ms)


Started POST "/comments/1/like?like=true" for 127.0.0.1 at 2014-10-22 15:22:23 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"true", "id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCommentVote Exists (0.4ms)[0m  SELECT  1 AS one FROM "comment_votes"  WHERE ("comment_votes"."user_id" = 1 AND "comment_votes"."comment_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "comment_votes" ("comment_id", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["comment_id", 1], ["created_at", "2014-10-22 12:22:23.638446"], ["updated_at", "2014-10-22 12:22:23.638446"], ["user_id", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) + 1 WHERE "comments"."id" = 1
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 1[0m  [["liker_ids_and_names", "---\n1: vladimir\n"], ["updated_at", "2014-10-22 12:22:23.644435"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", "2014-10-22 12:22:23.650597"], ["event", "update"], ["item_id", 1], ["item_type", "Comment"], ["object", "---\nid: 1\ndiscussion_id: 1\nbody: this is a discussion1\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:41:29.836406000 Z\nupdated_at: 2014-10-22 12:22:22.860957000 Z\nuses_markdown: false\ncomment_votes_count: 0\nattachments_count: 0\nliker_ids_and_names: |\n  ---\n  1: vladimir\nedited_at: \n"], ["whodunnit", 1]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "events" ("created_at", "eventable_id", "eventable_type", "kind", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 12:22:23.659264"], ["eventable_id", 5], ["eventable_type", "CommentVote"], ["kind", "comment_liked"], ["updated_at", "2014-10-22 12:22:23.659264"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 12:22:23.663645"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Events::CommentLiked\n  attributes:\n    id: 15\n    kind: comment_liked\n    created_at: &1 2014-10-22 12:22:23.659264000 Z\n    updated_at: *1\n    eventable_id: 5\n    eventable_type: CommentVote\n    user_id: \n    discussion_id: \n    sequence_id: \nmethod_name: :notify_users_without_delay!\nargs: []\n"], ["run_at", "2014-10-22 12:22:23.663515"], ["updated_at", "2014-10-22 12:22:23.663645"]]
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (2.3ms)
  Rendered comments/comment_likes.js.erb (7.9ms)
Completed 200 OK in 93ms (Views: 22.2ms | ActiveRecord: 10.2ms)


Started POST "/comments/1/like?like=false" for 127.0.0.1 at 2014-10-22 15:22:25 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"false", "id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCommentVote Load (0.5ms)[0m  [1mSELECT "comment_votes".* FROM "comment_votes"  WHERE "comment_votes"."comment_id" = $1 AND "comment_votes"."user_id" = 1[0m  [["comment_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) - 1 WHERE "comments"."id" = 1[0m
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events"  WHERE "events"."eventable_id" = $1 AND "events"."eventable_type" = $2  [["eventable_id", 5], ["eventable_type", "CommentVote"]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT "notifications".* FROM "notifications"  WHERE "notifications"."event_id" = $1[0m  [["event_id", 15]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "events" WHERE "events"."id" = $1  [["id", 15]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "comment_votes" WHERE "comment_votes"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 1  [["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 12:22:25.409639"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2014-10-22 12:22:25.415464"], ["event", "update"], ["item_id", 1], ["item_type", "Comment"], ["object", "---\nid: 1\ndiscussion_id: 1\nbody: this is a discussion1\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 10:41:29.836406000 Z\nupdated_at: 2014-10-22 12:22:23.644435000 Z\nuses_markdown: false\ncomment_votes_count: 1\nattachments_count: 0\nliker_ids_and_names: |\n  --- {}\nedited_at: \n"], ["whodunnit", 1]]
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (2.2ms)
  Rendered comments/comment_likes.js.erb (8.4ms)
Completed 200 OK in 80ms (Views: 21.3ms | ActiveRecord: 8.6ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:24:12 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:24:22 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 3.4ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:28:22 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:29:12 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 3.0ms)
  [1m[36mComment Load (1.7ms)[0m  [1mSELECT "comments".* FROM "comments"[0m
  [1m[35mUser Load (1.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.7ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mDiscussion Load (1.1ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mComment Load (1.0ms)[0m  [1mSELECT  "comments".* FROM "comments"   ORDER BY "comments"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)[0m
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mComment Load (0.7ms)[0m  [1mSELECT  "comments".* FROM "comments"   ORDER BY "comments"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (2.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mComment Load (0.7ms)[0m  [1mSELECT  "comments".* FROM "comments"   ORDER BY "comments"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)[0m
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mComment Load (0.7ms)[0m  [1mSELECT  "comments".* FROM "comments"   ORDER BY "comments"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mComment Load (0.9ms)[0m  [1mSELECT  "comments".* FROM "comments"   ORDER BY "comments"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (6.9ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)[0m
  [1m[35mDiscussion Load (1.3ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mCommentVote Load (0.9ms)[0m  [1mSELECT "comment_votes".* FROM "comment_votes"  WHERE "comment_votes"."comment_id" = $1[0m  [["comment_id", 1]]
  [1m[35mComment Load (0.6ms)[0m  SELECT  "comments".* FROM "comments"   ORDER BY "comments"."id" DESC LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (4)
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.8ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:33:22 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.9ms)
  [1m[35mComment Load (0.7ms)[0m  SELECT  "comments".* FROM "comments"   ORDER BY "comments"."id" ASC LIMIT 1
  [1m[36mUser Load (3.4ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (1)
  [1m[36mDiscussion Load (1.9ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:34:13 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 3.2ms)
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE (comment_votes_count>0)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3)
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE (comment_votes_count>0)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (0.7ms)[0m  SELECT "comments".* FROM "comments"   ORDER BY comment_votes_count
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mAttachment Load (0.7ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (4, 1, 2, 3)
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"   ORDER BY comment_votes_count desc
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.8ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mDiscussion Load (12.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (1.2ms)[0m  SELECT "comments".* FROM "comments"   ORDER BY comment_votes_count desc
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mDiscussion Load (0.9ms)[0m  SELECT  "discussions".* FROM "discussions"   ORDER BY "discussions"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (0.9ms)[0m  [1mSELECT  "discussions".* FROM "discussions"   ORDER BY "discussions"."id" ASC LIMIT 1[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1[0m  [["discussion_id", 1]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mAttachment Load (0.6ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (4, 3, 2, 1)[0m
  [1m[35mDiscussion Load (4.3ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:38:22 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:39:20 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 2.9ms)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  [["discussion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (4, 3, 2, 1)
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count  [["discussion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (4, 1, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc  [["discussion_id", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4, 1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:43:22 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:44:21 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 2.9ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 1  [["discussion_id", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3)
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:47:15 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.8ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (6.9ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.4ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (10.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.9ms)
  [1m[35mMotion Load (0.6ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (56.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.0ms)
  Rendered motions/_vote_row.html.haml (2.0ms)
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (19.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.4ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (22.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.1ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.1ms)
  Rendered discussions/_activity.html.haml (116.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.3ms)
  Rendered discussions/show.html.haml within layouts/application (390.4ms)
  Rendered application/_social_metadata.html.haml (45.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (5.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (34.3ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:47:15.082485' and ends_at > '2014-10-22 12:47:15.082485')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:47:16.911195')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 12:47:16.911195"], ["updated_at", "2014-10-22 12:47:16.929489"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 1862ms (Views: 1756.2ms | ActiveRecord: 38.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:47:19 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (10.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.5ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 83ms (Views: 36.8ms | ActiveRecord: 11.1ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:47:19 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (15.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (38.7ms)
Completed 200 OK in 97ms (Views: 54.5ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:47:19 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:48:19 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:48:39 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (3.9ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.5ms)
  Rendered discussions/_title.html.haml (10.2ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.9ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (46.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (1.2ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.2ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (21.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.2ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.2ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.7ms)
  Rendered discussions/_activity.html.haml (127.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.7ms)
  Rendered discussions/show.html.haml within layouts/application (247.5ms)
  Rendered application/_social_metadata.html.haml (5.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (5.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (34.8ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:48:39.551659' and ends_at > '2014-10-22 12:48:39.551659')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (8.9ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:48:41.029321')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 12:48:41.029321"], ["updated_at", "2014-10-22 12:48:41.045673"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1511ms (Views: 1426.5ms | ActiveRecord: 23.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:48:43 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 22ms (Views: 7.4ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:48:43 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (18.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (25.2ms)
Completed 200 OK in 42ms (Views: 29.6ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:48:43 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 2.8ms)


Started GET "/m/fd2q7DSu/votes/new" for 127.0.0.1 at 2014-10-22 15:49:17 +0300
Processing by VotesController#new as HTML
  Parameters: {"motion_id"=>"fd2q7DSu"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mMotion Load (0.6ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1  ORDER BY "votes"."id" DESC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.8ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered application/_hint.html.haml (0.2ms)
  Rendered votes/_form.html.haml (21.3ms)
  Rendered votes/new.html.haml within layouts/application (26.1ms)
  Rendered application/_social_metadata.html.haml (5.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (5.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (5.1ms)
  Rendered application/_header.html.haml (35.4ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:49:17.428910' and ends_at > '2014-10-22 12:49:17.428910')
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (7.9ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1168ms (Views: 1130.1ms | ActiveRecord: 6.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:49:20 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.4ms)
Completed 200 OK in 29ms (Views: 9.8ms | ActiveRecord: 1.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:49:20 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (22.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (29.9ms)
Completed 200 OK in 45ms (Views: 33.1ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:49:20 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (4.7ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 33ms (Views: 0.8ms | ActiveRecord: 6.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:49:23 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 65ms (Views: 0.7ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:50:28 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.6ms | ActiveRecord: 3.1ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:52:29 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:54:24 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:55:29 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.1ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:56:53 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.7ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (6.0ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.0ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.3ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.9ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (1.0ms)
  Rendered motions/_motion.html.haml (78.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (21.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.6ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.4ms)
  Rendered discussions/_activity.html.haml (130.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (373.7ms)
  Rendered application/_social_metadata.html.haml (6.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (5.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.3ms)
  Rendered application/_user_dropdown.html.haml (5.2ms)
  Rendered application/_header.html.haml (42.2ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:56:53.068774' and ends_at > '2014-10-22 12:56:53.068774')[0m
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (9.4ms)
  Rendered application/_intercom_tracker.html.haml (0.3ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.5ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:56:54.821311')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 12:56:54.821311"], ["updated_at", "2014-10-22 12:56:54.837935"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1784ms (Views: 1672.8ms | ActiveRecord: 40.0ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:56:57 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (6.9ms)
Completed 200 OK in 79ms (Views: 40.5ms | ActiveRecord: 1.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:56:57 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (20.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (29.0ms)
Completed 200 OK in 86ms (Views: 72.4ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:56:57 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 27ms (Views: 0.8ms | ActiveRecord: 2.9ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:57:58 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.3ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:58:40 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (3.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (3.9ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.1ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (10.6ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (45.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.0ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (22.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.8ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (17.6ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.2ms)
  Rendered discussions/_activity.html.haml (119.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.3ms)
  Rendered discussions/show.html.haml within layouts/application (250.9ms)
  Rendered application/_social_metadata.html.haml (5.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (4.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (32.5ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:58:40.480176' and ends_at > '2014-10-22 12:58:40.480176')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (7.9ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:58:41.887832')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 12:58:41.887832"], ["updated_at", "2014-10-22 12:58:41.904419"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 1447ms (Views: 1356.8ms | ActiveRecord: 26.4ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:58:45 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 176ms (Views: 162.4ms | ActiveRecord: 1.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:58:45 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (24.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (7.9ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 79ms (Views: 0.8ms | ActiveRecord: 33.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:58:45 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (2.0ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (5.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (86.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (92.8ms)
Completed 200 OK in 125ms (Views: 104.3ms | ActiveRecord: 11.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 15:59:25 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.7ms | ActiveRecord: 2.8ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 15:59:37 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.9ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.7ms)
  Rendered groups/_title.html.haml (4.1ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.7ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (8.7ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (7.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (43.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.1ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.7ms)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered base/_linked_avatar.html.haml (8.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.8ms)
  Rendered comments/_comment.html.haml (26.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.1ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (19.4ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.0ms)
  Rendered discussions/_activity.html.haml (128.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (1.1ms)
  Rendered discussions/_add_comment.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (251.5ms)
  Rendered application/_social_metadata.html.haml (5.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (32.4ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 12:59:37.778631' and ends_at > '2014-10-22 12:59:37.778631')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 12:59:39.215420')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 12:59:39.215420"], ["updated_at", "2014-10-22 12:59:39.231406"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1468ms (Views: 1385.1ms | ActiveRecord: 23.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 15:59:43 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (8.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.5ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (7.4ms)
Completed 200 OK in 224ms (Views: 185.5ms | ActiveRecord: 9.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 15:59:43 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (18.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (95.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (103.3ms)
Completed 200 OK in 118ms (Views: 88.6ms | ActiveRecord: 21.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 15:59:44 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 141ms (Views: 0.9ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:00:44 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.2ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 3.6ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:01:22 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.8ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.3ms)
  [1m[35mMembership Load (0.8ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.6ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (13.2ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (10.3ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.4ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (78.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.4ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (23.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.6ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.8ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered discussions/_activity.html.haml (145.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.9ms)
  Rendered discussions/_add_comment.html.haml (18.6ms)
  Rendered discussions/show.html.haml within layouts/application (456.6ms)
  Rendered application/_social_metadata.html.haml (5.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.0ms)
  Rendered application/_header.html.haml (42.9ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:01:22.640760' and ends_at > '2014-10-22 13:01:22.640760')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (38.4ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:01:24.715794')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 13:01:24.715794"], ["updated_at", "2014-10-22 13:01:24.733287"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 2105ms (Views: 1980.5ms | ActiveRecord: 61.1ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:01:28 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 2.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:01:28 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (30.0ms)
Completed 200 OK in 93ms (Views: 80.5ms | ActiveRecord: 3.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:01:28 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.3ms)
Completed 200 OK in 23ms (Views: 8.9ms | ActiveRecord: 1.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:02:28 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 5.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:03:25 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (5.1ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.7ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (13.1ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.3ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.9ms)
  [1m[35mVote Load (1.1ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.8ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (1.6ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (67.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered motions/_comment_preview.html.haml (7.9ms)
  Rendered discussions/show.html.haml within layouts/application (241.5ms)
Completed 500 Internal Server Error in 352ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `last_position_by_user' for #<Comment:0x007fad73d092b0>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/motions/_comment_preview.html.haml:6:in `_app_views_motions__comment_preview_html_haml__3482827807113386650_70191463942520'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:59:in `block in _app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/c50ae70f96e9b000/variables" for 127.0.0.1 at 2014-10-22 16:03:26 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:03:25.841672' and ends_at > '2014-10-22 13:03:25.841672')
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (21.2ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:04:20 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.7ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.1ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (20.5ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.7ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (55.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered motions/_comment_preview.html.haml (9.3ms)
  Rendered discussions/show.html.haml within layouts/application (143.1ms)
Completed 500 Internal Server Error in 254ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `name' for #<Comment:0x007fad6f34c2f8>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/motions/_comment_preview.html.haml:10:in `_app_views_motions__comment_preview_html_haml__3482827807113386650_70191436429980'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:59:in `block in _app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/2bf23eadf3d4cc35/variables" for 127.0.0.1 at 2014-10-22 16:04:21 +0300
  [1m[35mAnnouncement Load (3.7ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:04:21.008924' and ends_at > '2014-10-22 13:04:21.008924')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.6ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (8.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (1.7ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.6ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mDiscussion Load (18.4ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.9ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:04:28 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 37ms (Views: 0.9ms | ActiveRecord: 3.6ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:04:46 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (3.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.4ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.4ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.2ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (44.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered motions/_comment_preview.html.haml (6.4ms)
  Rendered discussions/show.html.haml within layouts/application (97.6ms)
Completed 500 Internal Server Error in 182ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `name' for #<Comment:0x007fad73e82cb8>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/motions/_comment_preview.html.haml:7:in `_app_views_motions__comment_preview_html_haml__3482827807113386650_70191433235760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:59:in `block in _app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/b29cf9449217b464/variables" for 127.0.0.1 at 2014-10-22 16:04:47 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:04:47.070173' and ends_at > '2014-10-22 13:04:47.070173')[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.7ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (1.1ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (2.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:05:24 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.7ms)
  Rendered groups/_title.html.haml (553.4ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (8.1ms)
  Rendered discussions/_privacy_icon.html.haml (3.4ms)
  Rendered discussions/_title.html.haml (193.1ms)
  [1m[35mUser Load (10.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (21.8ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.4ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (754.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered motions/_comment_preview.html.haml (47.4ms)
  Rendered discussions/show.html.haml within layouts/application (2866.5ms)
Completed 500 Internal Server Error in 3340ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `name' for #<Comment:0x007fad6f4afed8>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/motions/_comment_preview.html.haml:7:in `_app_views_motions__comment_preview_html_haml__3482827807113386650_70191436868620'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:59:in `block in _app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/7078edecbbda13cd/variables" for 127.0.0.1 at 2014-10-22 16:05:36 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:05:31.868818' and ends_at > '2014-10-22 13:05:31.868818')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mDiscussion Load (3.9ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.8ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started POST "/__better_errors/7078edecbbda13cd/variables" for 127.0.0.1 at 2014-10-22 16:05:41 +0300


Started GET "/m/fd2q7DSu/votes/new" for 127.0.0.1 at 2014-10-22 16:05:47 +0300
Processing by VotesController#new as HTML
  Parameters: {"motion_id"=>"fd2q7DSu"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mMotion Load (0.6ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."key" = 'fd2q7DSu'  ORDER BY "motions"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mGroup Load (1.1ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (1.6ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1  ORDER BY "votes"."id" DESC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered application/_hint.html.haml (0.3ms)
  Rendered votes/_form.html.haml (74.0ms)
  Rendered votes/new.html.haml within layouts/application (135.8ms)
  Rendered application/_social_metadata.html.haml (6.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.9ms)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered application/_user_profile_options.html.haml (1.3ms)
  Rendered application/_user_dropdown.html.haml (80.9ms)
  Rendered application/_header.html.haml (117.4ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:05:47.885775' and ends_at > '2014-10-22 13:05:47.885775')
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (6.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 2535ms (Views: 2493.6ms | ActiveRecord: 8.2ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:05:54 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (208.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (249.2ms)
Completed 200 OK in 464ms (Views: 412.5ms | ActiveRecord: 3.5ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:05:54 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (4.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 308ms (Views: 8.1ms | ActiveRecord: 5.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:05:55 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 2.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:05:55 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.9ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.2ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.4ms)
  Rendered discussions/_title.html.haml (13.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.1ms)
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.7ms)
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (111.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered motions/_comment_preview.html.haml (2.5ms)
  Rendered discussions/show.html.haml within layouts/application (307.2ms)
Completed 500 Internal Server Error in 454ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `name' for #<Comment:0x007fad725fe3e0>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/motions/_comment_preview.html.haml:7:in `_app_views_motions__comment_preview_html_haml__3482827807113386650_70191436868620'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:59:in `block in _app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/aaa680744417f36b/variables" for 127.0.0.1 at 2014-10-22 16:05:56 +0300
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:05:55.847530' and ends_at > '2014-10-22 13:05:55.847530')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (1.2ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mDiscussion Load (2.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.9ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (2.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (8.2ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:06:54 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (30.8ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.4ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (11.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.2ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (3.0ms)
  [1m[35mVote Load (0.9ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (89.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered motions/_comment_preview.html.haml (6.8ms)
  Rendered discussions/show.html.haml within layouts/application (242.5ms)
Completed 500 Internal Server Error in 381ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `voting?' for #<Comment:0x007fad6f189df8>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/motions/_comment_preview.html.haml:9:in `_app_views_motions__comment_preview_html_haml__3482827807113386650_70191434996840'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:59:in `block in _app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191470724280'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/0bb62fbe784208d7/variables" for 127.0.0.1 at 2014-10-22 16:06:55 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:06:54.139223' and ends_at > '2014-10-22 13:06:54.139223')[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (2.1ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started POST "/__better_errors/0bb62fbe784208d7/variables" for 127.0.0.1 at 2014-10-22 16:06:58 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:07:16 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.9ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.6ms)
  [1m[36mMembership Load (1.2ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (10.5ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (7.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.6ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (1.0ms)
  Rendered motions/_motion.html.haml (145.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered motions/_comment_preview.html.haml (3.6ms)
  Rendered motions/_comment_preview.html.haml (0.3ms)
  Rendered motions/_comment_preview.html.haml (0.3ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.8ms)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered base/_linked_avatar.html.haml (15.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment.html.haml (101.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.0ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.3ms)
  Rendered discussions/_activity.html.haml (335.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (667.7ms)
  Rendered application/_social_metadata.html.haml (8.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_search.html.haml (17.5ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_user_dropdown.html.haml (5.8ms)
  Rendered application/_header.html.haml (951.2ms)
  [1m[36mAnnouncement Load (0.6ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:07:16.141262' and ends_at > '2014-10-22 13:07:16.141262')[0m
  Rendered application/_announcements.html.haml (1.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.8ms)
  Rendered application/_footer.html.haml (46.9ms)
  Rendered application/_intercom_tracker.html.haml (0.8ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (35.5ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.6ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:07:22.211309')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 13:07:22.211309"], ["updated_at", "2014-10-22 13:07:22.229278"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 6103ms (Views: 5981.0ms | ActiveRecord: 59.7ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:07:26 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (6.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 100ms (Views: 67.0ms | ActiveRecord: 7.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:07:26 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 555ms (Views: 1.2ms | ActiveRecord: 3.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:07:27 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (15.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (38.3ms)
Completed 200 OK in 73ms (Views: 60.8ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:08:27 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:08:49 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.9ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (4.9ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (18.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.1ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.6ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (6.5ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[35mVote Load (0.9ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (82.8ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (1.0ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered motions/_comment_preview.html.haml (4.0ms)
  Rendered motions/_comment_preview.html.haml (1.1ms)
  Rendered motions/_comment_preview.html.haml (0.4ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (1.0ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (2.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (2.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.7ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (6.4ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (22.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.9ms)
  Rendered discussions/_discussion_item.html.haml (10.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (23.5ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (8.5ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (22.6ms)
  Rendered discussions/_activity.html.haml (158.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.9ms)
  Rendered discussions/_add_comment.html.haml (15.6ms)
  Rendered discussions/show.html.haml within layouts/application (372.2ms)
  Rendered application/_social_metadata.html.haml (6.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (5.1ms)
  Rendered application/_header.html.haml (34.3ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:08:49.096179' and ends_at > '2014-10-22 13:08:49.096179')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (9.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.6ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:08:50.713652')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 13:08:50.713652"], ["updated_at", "2014-10-22 13:08:50.734331"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 1652ms (Views: 1541.3ms | ActiveRecord: 47.0ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:08:52 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.1ms)
Completed 200 OK in 122ms (Views: 10.4ms | ActiveRecord: 1.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:08:53 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (23.8ms)
Completed 200 OK in 41ms (Views: 27.7ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:08:53 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:09:28 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 3.2ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:09:53 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:11:50 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.8ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (18.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.9ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.1ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (55.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2, 4)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (18.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.3ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.8ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.1ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.4ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (1.8ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (15.9ms)
  Rendered discussions/_activity.html.haml (109.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.6ms)
  Rendered discussions/_add_comment.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (356.2ms)
  Rendered application/_social_metadata.html.haml (9.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (34.4ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:11:50.552157' and ends_at > '2014-10-22 13:11:50.552157')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (9.2ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.4ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:11:52.249659')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 13:11:52.249659"], ["updated_at", "2014-10-22 13:11:52.267366"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1729ms (Views: 1629.3ms | ActiveRecord: 39.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:11:54 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.5ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.9ms)
Completed 200 OK in 63ms (Views: 41.7ms | ActiveRecord: 1.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:11:54 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (16.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (34.3ms)
Completed 200 OK in 55ms (Views: 38.8ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:11:54 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 3.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:12:55 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 3.8ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:13:22 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.8ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.6ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (4.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (10.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.5ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.7ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (1.9ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (58.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
PG::DatatypeMismatch: ERROR:  argument of AND must be type boolean, not type integer
LINE 1: ...sion_id" = $1  ORDER BY comment_votes_count>0 and comment_vo...
                                                             ^
: SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count>0 and comment_votes_count desc LIMIT 3
  Rendered discussions/show.html.haml within layouts/application (175.1ms)
Completed 500 Internal Server Error in 250ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ActiveRecord::StatementInvalid - PG::DatatypeMismatch: ERROR:  argument of AND must be type boolean, not type integer
LINE 1: ...sion_id" = $1  ORDER BY comment_votes_count>0 and comment_vo...
                                                             ^
: SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count>0 and comment_votes_count desc LIMIT 3:
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:869:in `prepare'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:869:in `prepare_statement'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:826:in `exec_cache'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `exec_query'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:954:in `select'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `block in select_all'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:83:in `cache_sql'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `select_all'
  activerecord (4.1.6) lib/active_record/querying.rb:39:in `find_by_sql'
  activerecord (4.1.6) lib/active_record/relation.rb:611:in `exec_queries'
  activerecord (4.1.6) lib/active_record/association_relation.rb:19:in `exec_queries'
  activerecord (4.1.6) lib/active_record/relation.rb:493:in `load'
  activerecord (4.1.6) lib/active_record/relation.rb:238:in `to_a'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191246003400'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/18995f9ed16e6da7/variables" for 127.0.0.1 at 2014-10-22 16:13:23 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:13:22.459229' and ends_at > '2014-10-22 13:13:22.459229')[0m
  [1m[35mMotion Load (0.3ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:13:43 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.7ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.7ms)
  Rendered discussions/_privacy_icon.html.haml (1.8ms)
  Rendered discussions/_title.html.haml (9.8ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.1ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.1ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (46.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
PG::DatatypeMismatch: ERROR:  argument of AND must be type boolean, not type integer
LINE 1: ...sion_id" = $1  ORDER BY comment_votes_count>0 AND comment_vo...
                                                             ^
: SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count>0 AND comment_votes_count desc LIMIT 3
  Rendered discussions/show.html.haml within layouts/application (101.0ms)
Completed 500 Internal Server Error in 211ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ActiveRecord::StatementInvalid - PG::DatatypeMismatch: ERROR:  argument of AND must be type boolean, not type integer
LINE 1: ...sion_id" = $1  ORDER BY comment_votes_count>0 AND comment_vo...
                                                             ^
: SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1  ORDER BY comment_votes_count>0 AND comment_votes_count desc LIMIT 3:
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:869:in `prepare'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:869:in `prepare_statement'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:826:in `exec_cache'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `exec_query'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:954:in `select'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `block in select_all'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:83:in `cache_sql'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `select_all'
  activerecord (4.1.6) lib/active_record/querying.rb:39:in `find_by_sql'
  activerecord (4.1.6) lib/active_record/relation.rb:611:in `exec_queries'
  activerecord (4.1.6) lib/active_record/association_relation.rb:19:in `exec_queries'
  activerecord (4.1.6) lib/active_record/relation.rb:493:in `load'
  activerecord (4.1.6) lib/active_record/relation.rb:238:in `to_a'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:58:in `_app_views_discussions_show_html_haml__4502224442554965882_70191505579800'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/7d6a556568156a4f/variables" for 127.0.0.1 at 2014-10-22 16:13:44 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:13:43.448530' and ends_at > '2014-10-22 13:13:43.448530')
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)[0m
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:14:13 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (9.3ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.9ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.2ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (46.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND "comments"."id" = $2 LIMIT 1[0m  [["discussion_id", 1], ["id", 0]]
  Rendered discussions/show.html.haml within layouts/application (108.6ms)
  Rendered application/display_error.html.haml within layouts/application (3.1ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (4.0ms)
  Rendered application/_header.html.haml (33.7ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:14:13.559463' and ends_at > '2014-10-22 13:14:13.559463')
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1556ms (Views: 1361.3ms | ActiveRecord: 12.8ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:14:17 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.5ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 32ms (Views: 7.8ms | ActiveRecord: 1.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:14:17 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (21.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (27.8ms)
Completed 200 OK in 84ms (Views: 39.0ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:14:17 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 28ms (Views: 3.4ms | ActiveRecord: 2.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:14:24 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (16.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (4.5ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.9ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.9ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (48.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND "comments"."id" = $2 LIMIT 1  [["discussion_id", 1], ["id", 0]]
  Rendered discussions/show.html.haml within layouts/application (90.8ms)
  Rendered application/display_error.html.haml within layouts/application (0.2ms)
  Rendered application/_social_metadata.html.haml (5.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (4.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (30.3ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:14:24.346529' and ends_at > '2014-10-22 13:14:24.346529')[0m
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.1ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1106ms (Views: 947.1ms | ActiveRecord: 28.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:14:27 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.7ms)
Completed 200 OK in 28ms (Views: 10.5ms | ActiveRecord: 1.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:14:27 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (23.0ms)
Completed 200 OK in 39ms (Views: 26.3ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:14:27 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 1.1ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:14:29 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 3.8ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:15:00 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.0ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.5ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.9ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.7ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (48.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (20.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.6ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.7ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.5ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment.html.haml (28.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.5ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.5ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (0.9ms)
  Rendered comments/_comment.html.haml (17.3ms)
  Rendered discussions/_activity.html.haml (133.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.9ms)
  Rendered discussions/show.html.haml within layouts/application (322.8ms)
  Rendered application/_social_metadata.html.haml (4.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.7ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.5ms)
  Rendered application/_header.html.haml (32.0ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:15:00.241383' and ends_at > '2014-10-22 13:15:00.241383')
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.0ms)
  Rendered application/_footer.html.haml (7.8ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:15:01.745522')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 13:15:01.745522"], ["updated_at", "2014-10-22 13:15:01.760799"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 1536ms (Views: 1448.7ms | ActiveRecord: 23.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:15:04 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.5ms)
Completed 200 OK in 52ms (Views: 32.0ms | ActiveRecord: 1.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:15:04 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (20.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (54.7ms)
Completed 200 OK in 98ms (Views: 76.8ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:15:04 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (3.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 34ms (Views: 0.9ms | ActiveRecord: 4.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:16:04 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.1ms)


Started POST "/d/YPUgfENW/add_comment" for 127.0.0.1 at 2014-10-22 16:16:52 +0300
Processing by DiscussionsController#add_comment as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "comment"=>"Do you think we should add more file options?\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\n", "uses_markdown"=>"false", "commit"=>"Post comment", "id"=>"YPUgfENW"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
>>>>>>>>>>>>>>>> add_comment
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "comments" ("body", "created_at", "discussion_id", "liker_ids_and_names", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["body", "Do you think we should add more file options?\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\nDo you think we should add more file options?\r\n\r\n"], ["created_at", "2014-10-22 13:16:52.310991"], ["discussion_id", 1], ["liker_ids_and_names", "--- {}\n"], ["updated_at", "2014-10-22 13:16:52.310991"], ["user_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "whodunnit") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2014-10-22 13:16:52.315578"], ["event", "create"], ["item_id", 5], ["item_type", "Comment"], ["whodunnit", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "discussions" SET "comments_count" = COALESCE("comments_count", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "discussions" SET "last_comment_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1[0m  [["last_comment_at", "2014-10-22 13:16:52.310991"], ["updated_at", "2014-10-22 13:16:52.321709"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.0ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (created_at <= '2014-10-22 13:16:52.310991')[0m  [["discussion_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1 AND (created_at <= '2014-10-22 13:16:52.310991')  [["discussion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "discussion_readers" SET "last_read_at" = $1, "read_comments_count" = $2, "updated_at" = $3 WHERE "discussion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 13:16:52.310991"], ["read_comments_count", 5], ["updated_at", "2014-10-22 13:16:52.341467"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mEvent Load (0.6ms)[0m  SELECT  "events".* FROM "events"  WHERE (sequence_id IS NOT NULL) AND "events"."discussion_id" = 1  ORDER BY sequence_id DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."sequence_id" = 10 AND "events"."discussion_id" = 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "events" ("created_at", "discussion_id", "eventable_id", "eventable_type", "kind", "sequence_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["created_at", "2014-10-22 13:16:52.310991"], ["discussion_id", 1], ["eventable_id", 5], ["eventable_type", "Comment"], ["kind", "new_comment"], ["sequence_id", 10], ["updated_at", "2014-10-22 13:16:52.350275"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "discussions" SET "items_count" = COALESCE("items_count", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "discussions" SET "last_activity_at" = $1, "updated_at" = $2 WHERE "discussions"."id" = 1  [["last_activity_at", "2014-10-22 13:16:52.310991"], ["updated_at", "2014-10-22 13:16:52.355765"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (1.0ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)  [["group_id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT "users"."id" FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0 AND (users.id != 1)[0m  [["group_id", 1]]
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" LEFT OUTER JOIN discussion_readers dr ON (dr.user_id = users.id AND dr.discussion_id = 1) LEFT OUTER JOIN memberships m ON (m.user_id = users.id AND m.group_id = 1) WHERE "users"."deactivated_at" IS NULL AND (dr.following = TRUE OR (dr.following IS NULL AND m.following_by_default = TRUE)) AND (users.id NOT IN (1)) AND "users"."email_followed_threads" = 't'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2014-10-22 13:16:52.382946"], ["handler", "--- !ruby/object:Delayed::PerformableMailer\nobject: !ruby/class 'ThreadMailer'\nmethod_name: :new_comment\nargs:\n- !ruby/ActiveRecord:User\n  attributes:\n    id: 2\n    email: adi.erteschik@gmail.com\n    encrypted_password: \"$2a$10$Lf3VSXWNpT.EZsZi.GnvY.c2KdxhUwMrwDJ8rM07dpL7wvmLXHj6i\"\n    reset_password_token: \n    reset_password_sent_at: \n    remember_created_at: \n    sign_in_count: 1\n    current_sign_in_at: 2014-10-22 10:55:10.615097000 Z\n    last_sign_in_at: 2014-10-22 10:55:10.615097000 Z\n    current_sign_in_ip: 10.182.234.126\n    last_sign_in_ip: 10.182.234.126\n    created_at: 2014-10-22 10:55:10.237761000 Z\n    updated_at: 2014-10-22 10:55:10.686448000 Z\n    name: Adi Erteschik\n    deactivated_at: \n    is_admin: false\n    avatar_kind: initials\n    uploaded_avatar_file_name: \n    uploaded_avatar_content_type: \n    uploaded_avatar_file_size: \n    uploaded_avatar_updated_at: \n    avatar_initials: AE\n    username: adierteschik\n    email_followed_threads: true\n    email_when_proposal_closing_soon: true\n    authentication_token: \n    unsubscribe_token: yuKZK7-3QAfu3RjvHRrq\n    memberships_count: 1\n    uses_markdown: false\n    selected_locale: \n    time_zone: Asia/Jerusalem\n    key: oJSuA17y\n    detected_locale: en\n    email_missed_yesterday: true\n    email_api_key: c62ff8a3f777aa135eff58275199ba10\n    email_new_discussions_and_proposals: true\n    email_when_mentioned: true\n- !ruby/ActiveRecord:Events::NewComment\n  attributes:\n    id: 16\n    kind: new_comment\n    created_at: 2014-10-22 13:16:52.310991000 Z\n    updated_at: 2014-10-22 13:16:52.350275000 Z\n    eventable_id: 5\n    eventable_type: Comment\n    user_id: \n    discussion_id: 1\n    sequence_id: 10\n"], ["run_at", "2014-10-22 13:16:52.382794"], ["updated_at", "2014-10-22 13:16:52.382946"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (10.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (30.1ms)
  Rendered discussions/add_comment.js.erb (32.1ms)
Completed 200 OK in 161ms (Views: 54.1ms | ActiveRecord: 24.1ms)


Started POST "/comments/5/like?like=true" for 127.0.0.1 at 2014-10-22 16:16:56 +0300
Processing by CommentsController#like as JS
  Parameters: {"like"=>"true", "id"=>"5"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 5]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mCommentVote Exists (0.5ms)[0m  SELECT  1 AS one FROM "comment_votes"  WHERE ("comment_votes"."user_id" = 1 AND "comment_votes"."comment_id" = 5) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "comment_votes" ("comment_id", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["comment_id", 5], ["created_at", "2014-10-22 13:16:56.820199"], ["updated_at", "2014-10-22 13:16:56.820199"], ["user_id", 1]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "comments" SET "comment_votes_count" = COALESCE("comment_votes_count", 0) + 1 WHERE "comments"."id" = 5
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "comments" SET "liker_ids_and_names" = $1, "updated_at" = $2 WHERE "comments"."id" = 5[0m  [["liker_ids_and_names", "---\n1: vladimir\n"], ["updated_at", "2014-10-22 13:16:56.826407"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", "2014-10-22 13:16:56.832142"], ["event", "update"], ["item_id", 5], ["item_type", "Comment"], ["object", "---\nid: 5\ndiscussion_id: 1\nbody: \"Do you think we should add more file options?\\r\\nDo you think we should add\n  more file options?\\r\\n\\r\\nDo you think we should add more file options?\\r\\n\\r\\nDo\n  you think we should add more file options?\\r\\n\\r\\nDo you think we should add more\n  file options?\\r\\n\\r\\nDo you think we should add more file options?\\r\\n\\r\\nDo you\n  think we should add more file options?\\r\\n\\r\\nDo you think we should add more file\n  options?\\r\\n\\r\\nDo you think we should add more file options?\\r\\n\\r\\nDo you think\n  we should add more file options?\\r\\n\\r\\nDo you think we should add more file options?\\r\\n\\r\\nDo\n  you think we should add more file options?\\r\\n\\r\\nDo you think we should add more\n  file options?\\r\\n\\r\\n\"\nsubject: ''\nuser_id: 1\nparent_id: \ncreated_at: 2014-10-22 13:16:52.310991000 Z\nupdated_at: 2014-10-22 13:16:52.310991000 Z\nuses_markdown: false\ncomment_votes_count: 0\nattachments_count: 0\nliker_ids_and_names: |\n  ---\n  1: vladimir\nedited_at: \n"], ["whodunnit", 1]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "eventable_id", "eventable_type", "kind", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2014-10-22 13:16:56.840585"], ["eventable_id", 6], ["eventable_type", "CommentVote"], ["kind", "comment_liked"], ["updated_at", "2014-10-22 13:16:56.840585"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-22 13:16:56.844600"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Events::CommentLiked\n  attributes:\n    id: 17\n    kind: comment_liked\n    created_at: &1 2014-10-22 13:16:56.840585000 Z\n    updated_at: *1\n    eventable_id: 6\n    eventable_type: CommentVote\n    user_id: \n    discussion_id: \n    sequence_id: \nmethod_name: :notify_users_without_delay!\nargs: []\n"], ["run_at", "2014-10-22 13:16:56.844469"], ["updated_at", "2014-10-22 13:16:56.844600"]]
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered comments/_comment_likes.html.haml (2.1ms)
  Rendered comments/comment_likes.js.erb (9.9ms)
Completed 200 OK in 110ms (Views: 41.8ms | ActiveRecord: 10.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:16:59 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (1.1ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.4ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.2ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (44.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (20.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (18.8ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.9ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.7ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.8ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (20.6ms)
  Rendered discussions/_discussion_item.html.haml (5.8ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (8.2ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (21.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (23.0ms)
  Rendered discussions/_activity.html.haml (154.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.9ms)
  Rendered discussions/show.html.haml within layouts/application (331.5ms)
  Rendered application/_social_metadata.html.haml (6.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (4.1ms)
  Rendered application/_header.html.haml (32.7ms)
  [1m[36mAnnouncement Load (0.6ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:16:59.614607' and ends_at > '2014-10-22 13:16:59.614607')[0m
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:17:01.138615')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 13:17:01.138615"], ["updated_at", "2014-10-22 13:17:01.155713"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1557ms (Views: 1468.7ms | ActiveRecord: 24.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:17:03 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 67ms (Views: 51.0ms | ActiveRecord: 2.0ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:17:03 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (26.4ms)
  Rendered notifications/groups_tree_dropdown.html.haml (60.6ms)
Completed 200 OK in 136ms (Views: 120.2ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:17:03 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 1.1ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:18:04 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:19:30 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:20:04 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/comments/5/edit" for 127.0.0.1 at 2014-10-22 16:21:05 +0300
Processing by CommentsController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."id" = $1 LIMIT 1  [["id", 5]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/edit.html.haml within layouts/application (15.5ms)
  Rendered application/_social_metadata.html.haml (9.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.3ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.5ms)
  Rendered application/_header.html.haml (31.8ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:21:05.478088' and ends_at > '2014-10-22 13:21:05.478088')[0m
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.3ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (7.0ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1121ms (Views: 1081.4ms | ActiveRecord: 5.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:21:08 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.4ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 107ms (Views: 68.8ms | ActiveRecord: 3.2ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:21:08 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (22.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (49.7ms)
Completed 200 OK in 67ms (Views: 54.3ms | ActiveRecord: 2.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:21:08 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 1.4ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:21:53 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (1.0ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.7ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.8ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.8ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.6ms)
  Rendered discussions/_privacy_icon.html.haml (1.7ms)
  Rendered discussions/_title.html.haml (22.5ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.0ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (55.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.2ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment_limited.html.haml (27.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.4ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.6ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (19.5ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.1ms)
  Rendered discussions/_activity.html.haml (142.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.9ms)
  Rendered discussions/show.html.haml within layouts/application (400.7ms)
  Rendered application/_social_metadata.html.haml (7.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (40.2ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:21:53.306809' and ends_at > '2014-10-22 13:21:53.306809')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (8.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:21:54.975268')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 13:21:54.975268"], ["updated_at", "2014-10-22 13:21:54.993448"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 1702ms (Views: 1597.8ms | ActiveRecord: 39.5ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:21:57 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (8.6ms)
Completed 200 OK in 66ms (Views: 49.1ms | ActiveRecord: 1.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:21:57 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (158.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (173.7ms)
Completed 200 OK in 200ms (Views: 182.9ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:21:57 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:23:00 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:24:21 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.3ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.5ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.8ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.7ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (1.0ms)
  Rendered motions/_motion.html.haml (55.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (23.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.4ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (22.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.5ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.5ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered discussions/_activity.html.haml (137.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.9ms)
  Rendered discussions/show.html.haml within layouts/application (347.3ms)
  Rendered application/_social_metadata.html.haml (6.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.0ms)
  Rendered application/_header.html.haml (40.4ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:24:21.640362' and ends_at > '2014-10-22 13:24:21.640362')[0m
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (2.2ms)
  Rendered application/_footer.html.haml (9.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (17.0ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.8ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:24:23.277498')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 13:24:23.277498"], ["updated_at", "2014-10-22 13:24:23.296361"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1674ms (Views: 1570.1ms | ActiveRecord: 39.9ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:24:25 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.9ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 53ms (Views: 37.9ms | ActiveRecord: 2.2ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:24:25 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (16.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (28.8ms)
Completed 200 OK in 62ms (Views: 49.8ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:24:25 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:24:31 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:24:55 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.8ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (4.8ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (7.7ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (12.7ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.5ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (46.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment_limited.html.haml (24.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment_limited.html.haml (16.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (17.4ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.7ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.8ms)
  Rendered discussions/_activity.html.haml (137.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.6ms)
  Rendered discussions/_add_comment.html.haml (13.6ms)
  Rendered discussions/show.html.haml within layouts/application (315.7ms)
  Rendered application/_social_metadata.html.haml (6.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.5ms)
  Rendered application/_header.html.haml (33.5ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:24:55.319468' and ends_at > '2014-10-22 13:24:55.319468')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.3ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:24:56.780007')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 13:24:56.780007"], ["updated_at", "2014-10-22 13:24:56.797715"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 1492ms (Views: 1400.6ms | ActiveRecord: 23.9ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:24:59 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 23ms (Views: 7.6ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:24:59 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (20.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (25.7ms)
Completed 200 OK in 44ms (Views: 28.9ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:24:59 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 3.0ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:25:59 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:27:59 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (4.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (1.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 31ms (Views: 0.5ms | ActiveRecord: 8.2ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:29:32 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 2]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 3.1ms)
  [1m[35mComment Load (1.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 2]]
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2)[0m
  [1m[35mAttachment Load (1.2ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (4)
  [1m[36mDiscussion Load (0.9ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:31:01 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:31:56 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (2.0ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.8ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (1.3ms)
  Rendered groups/_title.html.haml (8.8ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (7.4ms)
  Rendered discussions/_privacy_icon.html.haml (2.9ms)
  Rendered discussions/_title.html.haml (15.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (1.7ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (13.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.1ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (55.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.6ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.7ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (9.6ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (2.1ms)
  Rendered comments/_comment_limited.html.haml (41.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.9ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.7ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.6ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (10.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (25.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.2ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.2ms)
  Rendered discussions/_discussion_item.html.haml (3.0ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (130.9ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.1ms)
  Rendered discussions/_activity.html.haml (274.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (17.7ms)
  Rendered discussions/show.html.haml within layouts/application (557.0ms)
  Rendered application/_social_metadata.html.haml (9.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.3ms)
  Rendered application/_search.html.haml (8.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (39.5ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:31:56.494746' and ends_at > '2014-10-22 13:31:56.494746')[0m
  Rendered application/_announcements.html.haml (3.3ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (9.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.6ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.9ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:31:58.510993')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 13:31:58.510993"], ["updated_at", "2014-10-22 13:31:58.534127"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 2060ms (Views: 1914.3ms | ActiveRecord: 45.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:32:00 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (13.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (11.7ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.9ms)
Completed 200 OK in 70ms (Views: 31.0ms | ActiveRecord: 25.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:32:01 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (4.3ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (31.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (74.4ms)
Completed 200 OK in 94ms (Views: 78.9ms | ActiveRecord: 6.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:32:01 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (2.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 1.6ms | ActiveRecord: 4.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:33:01 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:34:39 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:35:01 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.6ms | ActiveRecord: 4.3ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:35:51 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (44.2ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (7.1ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (11.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (55.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (9.1ms)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (51.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (17.0ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (23.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (16.8ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (16.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_activity.html.haml (148.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (1.3ms)
  Rendered discussions/_add_comment.html.haml (19.5ms)
  Rendered discussions/show.html.haml within layouts/application (480.3ms)
  Rendered application/_social_metadata.html.haml (4.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (4.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.5ms)
  Rendered application/_header.html.haml (31.3ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:35:51.970992' and ends_at > '2014-10-22 13:35:51.970992')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.1ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:35:53.652366')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 13:35:53.652366"], ["updated_at", "2014-10-22 13:35:53.667805"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 1710ms (Views: 1613.1ms | ActiveRecord: 38.9ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:35:58 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 82ms (Views: 66.8ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:35:58 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (20.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (44.4ms)
Completed 200 OK in 82ms (Views: 51.2ms | ActiveRecord: 3.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:35:58 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 30ms (Views: 0.8ms | ActiveRecord: 2.9ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'



ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:36:59 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 16:38:00 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (1.0ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.5ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.7ms)
  Rendered discussions/_privacy_icon.html.haml (1.3ms)
  Rendered discussions/_title.html.haml (24.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.0ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (78.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.7ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (9.5ms)
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (47.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (14.7ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (20.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.3ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.2ms)
  Rendered discussions/_activity.html.haml (140.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.0ms)
  Rendered discussions/show.html.haml within layouts/application (462.6ms)
  Rendered application/_social_metadata.html.haml (7.7ms)
  [1m[36m (2.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (7.4ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.3ms)
  Rendered application/_header.html.haml (336.1ms)
  [1m[36mAnnouncement Load (0.6ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 13:38:00.510678' and ends_at > '2014-10-22 13:38:00.510678')[0m
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (8.9ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.9ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 13:38:03.922142')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 13:38:03.922142"], ["updated_at", "2014-10-22 13:38:03.940763"]]
  [1m[36m (15.5ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 3459ms (Views: 3340.1ms | ActiveRecord: 57.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 16:38:08 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 59ms (Views: 46.7ms | ActiveRecord: 1.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:38:08 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 3.0ms | ActiveRecord: 3.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 16:38:08 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (29.6ms)
Completed 200 OK in 54ms (Views: 42.1ms | ActiveRecord: 3.0ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:39:08 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:39:46 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.6ms | ActiveRecord: 3.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:41:09 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.7ms | ActiveRecord: 3.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:44:09 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:44:48 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:48:09 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:49:48 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.8ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:53:09 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:54:51 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 16:58:10 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 47ms (Views: 0.6ms | ActiveRecord: 4.0ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 16:59:51 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:03:10 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 17:04:52 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:08:11 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 17:09:54 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:13:17 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 17:14:54 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:18:18 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 17:19:55 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:23:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 347ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 17:24:58 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 3.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:28:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 10.182.234.126 at 2014-10-22 17:29:58 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 2  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 2 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 2 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:33:23 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:44:11 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:49:12 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:54:17 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 17:59:18 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:04:18 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:09:19 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started GET "/pro_concs" for 127.0.0.1 at 2014-10-22 18:11:01 +0300

ActionController::RoutingError (No route matches [GET] "/pro_concs"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'


  Rendered /Users/teamco/.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/teamco/.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (34.4ms)
  Rendered /Users/teamco/.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (3.1ms)
  Rendered /Users/teamco/.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (458.3ms)


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 18:11:24 +0300
Processing by ProConsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mProCon Load (11.1ms)[0m  [1mSELECT "pro_cons".* FROM "pro_cons"[0m
PG::UndefinedTable: ERROR:  relation "pro_cons" does not exist
LINE 1: SELECT "pro_cons".* FROM "pro_cons"
                                 ^
: SELECT "pro_cons".* FROM "pro_cons"
  Rendered pro_cons/index.html.haml within layouts/application (18.9ms)
Completed 500 Internal Server Error in 109ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ActiveRecord::StatementInvalid - PG::UndefinedTable: ERROR:  relation "pro_cons" does not exist
LINE 1: SELECT "pro_cons".* FROM "pro_cons"
                                 ^
: SELECT "pro_cons".* FROM "pro_cons":
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:822:in `async_exec'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:822:in `block in exec_no_cache'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:822:in `exec_no_cache'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_query'
  activerecord (4.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:954:in `select'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `block in select_all'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:83:in `cache_sql'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `select_all'
  activerecord (4.1.6) lib/active_record/querying.rb:39:in `find_by_sql'
  activerecord (4.1.6) lib/active_record/relation.rb:611:in `exec_queries'
  activerecord (4.1.6) lib/active_record/relation.rb:493:in `load'
  activerecord (4.1.6) lib/active_record/relation.rb:238:in `to_a'
  activerecord (4.1.6) lib/active_record/relation/delegation.rb:46:in `each'
   () Users/teamco/Sites/loomio/app/views/pro_cons/index.html.haml:11:in `_app_views_pro_cons_index_html_haml__4326360037922206214_70191428816880'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/responder.rb:238:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/responder.rb:165:in `to_html'
  responders (1.0.0) lib/responders/flash_responder.rb:104:in `to_html'
  actionpack (4.1.6) lib/action_controller/metal/responder.rb:158:in `respond'
  actionpack (4.1.6) lib/action_controller/metal/responder.rb:151:in `call'
  actionpack (4.1.6) lib/action_controller/metal/mime_responds.rb:400:in `respond_with'
  inherited_resources (1.4.1) lib/inherited_resources/actions.rb:7:in `index'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/c99e57c1176b7b71/variables" for 127.0.0.1 at 2014-10-22 18:11:25 +0300
  [1m[35mProCon Load (0.4ms)[0m  SELECT "pro_cons".* FROM "pro_cons"
PG::UndefinedTable: ERROR:  relation "pro_cons" does not exist
LINE 1: SELECT "pro_cons".* FROM "pro_cons"
                                 ^
: SELECT "pro_cons".* FROM "pro_cons"
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateProCons (20141022151004)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (22.2ms)[0m  [1mCREATE TABLE "pro_cons" ("id" serial primary key, "body" text, "user_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141022151004"]]
  [1m[36m (19.3ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 18:13:35 +0300
Processing by ProConsController#index as HTML
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mProCon Load (0.9ms)[0m  SELECT "pro_cons".* FROM "pro_cons"
  Rendered pro_cons/index.html.haml within layouts/application (10.5ms)
  Rendered application/_social_metadata.html.haml (62.9ms)
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (6.6ms)
  Rendered application/_search.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (3.9ms)
  Rendered application/_user_profile_options.html.haml (1.3ms)
  Rendered application/_user_dropdown.html.haml (22.0ms)
  Rendered application/_header.html.haml (209.2ms)
  Rendered application/_announcements.html.haml (2.2ms)
  Rendered application/_flash_messages.html.haml (1.7ms)
  Rendered application/_footer_links.html.haml (3.5ms)
  Rendered application/_footer.html.haml (11.9ms)
  Rendered application/_intercom_tracker.html.haml (1.4ms)
  Rendered application/_heap_analytics.html.haml (2.1ms)
Completed 200 OK in 3018ms (Views: 2542.8ms | ActiveRecord: 18.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 18:13:41 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (5.2ms)
Completed 200 OK in 98ms (Views: 67.9ms | ActiveRecord: 4.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 18:13:41 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (126.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (185.1ms)
Completed 200 OK in 205ms (Views: 190.3ms | ActiveRecord: 4.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:13:41 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (3.0ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 82ms (Views: 27.8ms | ActiveRecord: 8.1ms)


Started GET "/pro_cons/new" for 127.0.0.1 at 2014-10-22 18:13:45 +0300
Processing by ProConsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered pro_cons/_form.html.haml (59.8ms)
  Rendered pro_cons/new.html.haml within layouts/application (64.5ms)
  Rendered application/_social_metadata.html.haml (6.2ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (0.1ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (5.3ms)
  Rendered application/_header.html.haml (27.6ms)
  Rendered application/_announcements.html.haml (0.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (7.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1214ms (Views: 1199.3ms | ActiveRecord: 4.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 18:13:48 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (9.7ms)
Completed 200 OK in 31ms (Views: 16.7ms | ActiveRecord: 1.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 18:13:48 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (25.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (35.9ms)
Completed 200 OK in 51ms (Views: 39.1ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:13:48 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (10.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 86ms (Views: 0.9ms | ActiveRecord: 13.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:14:48 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 3.6ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:16:48 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 166ms (Views: 1.2ms | ActiveRecord: 12.9ms)


Started GET "/pro_cons/new" for 127.0.0.1 at 2014-10-22 18:18:02 +0300
Processing by ProConsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  Rendered pro_cons/_form.html.haml (8.7ms)
  Rendered pro_cons/new.html.haml within layouts/application (10.4ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (0.2ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (47.7ms)
  Rendered application/_announcements.html.haml (0.1ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (7.0ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1166ms (Views: 1097.2ms | ActiveRecord: 11.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 18:18:07 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 32ms (Views: 8.0ms | ActiveRecord: 3.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 18:18:07 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.1ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (2.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (102.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (122.3ms)
Completed 200 OK in 141ms (Views: 122.9ms | ActiveRecord: 5.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:18:07 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.2ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 70ms (Views: 1.2ms | ActiveRecord: 6.5ms)


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 18:18:13 +0300
Processing by ProConsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered pro_cons/index.html.haml within layouts/application (41.4ms)
Completed 500 Internal Server Error in 59ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `each' for nil:NilClass:
   () Users/teamco/Sites/loomio/app/views/pro_cons/index.html.haml:11:in `_app_views_pro_cons_index_html_haml__2044392986729330090_70250500905800'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/e75e14c4501310cc/variables" for 127.0.0.1 at 2014-10-22 18:18:14 +0300


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 18:18:16 +0300
Processing by ProConsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  Rendered pro_cons/index.html.haml within layouts/application (2.5ms)
Completed 500 Internal Server Error in 19ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `each' for nil:NilClass:
   () Users/teamco/Sites/loomio/app/views/pro_cons/index.html.haml:11:in `_app_views_pro_cons_index_html_haml__2044392986729330090_70250500905800'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/f4cd143dc28fc146/variables" for 127.0.0.1 at 2014-10-22 18:18:17 +0300


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 18:18:30 +0300
Processing by ProConsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mProCon Load (1.3ms)[0m  SELECT "pro_cons".* FROM "pro_cons"
  Rendered pro_cons/index.html.haml within layouts/application (3.7ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (10.5ms)
  Rendered application/_search.html.haml (0.1ms)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered application/_user_profile_options.html.haml (2.4ms)
  Rendered application/_user_dropdown.html.haml (6.0ms)
  Rendered application/_header.html.haml (86.9ms)
  Rendered application/_announcements.html.haml (0.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (18.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
Completed 200 OK in 1218ms (Views: 1152.3ms | ActiveRecord: 13.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 18:18:34 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.8ms)
Completed 200 OK in 69ms (Views: 35.3ms | ActiveRecord: 4.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 18:18:34 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (87.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (94.8ms)
Completed 200 OK in 123ms (Views: 97.4ms | ActiveRecord: 4.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:18:34 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 92ms (Views: 1.4ms | ActiveRecord: 7.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:19:35 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:21:35 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 173ms (Views: 1.2ms | ActiveRecord: 12.1ms)


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 18:21:39 +0300
Processing by ProConsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> index
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  Rendered pro_cons/index.html.haml within layouts/application (1.6ms)
Completed 500 Internal Server Error in 154ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `each' for nil:NilClass:
   () Users/teamco/Sites/loomio/app/views/pro_cons/index.html.haml:11:in `_app_views_pro_cons_index_html_haml__2044392986729330090_70250500905800'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/8b84428c12a577a9/variables" for 127.0.0.1 at 2014-10-22 18:21:40 +0300
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 15:21:40.103721' and ends_at > '2014-10-22 15:21:40.103721')
  [1m[36mDiscussion Load (31.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND (discussions.id NOT IN (SELECT discussion_id FROM motions WHERE id IS NOT NULL AND motions.closed_at IS NULL))  ORDER BY last_comment_at DESC LIMIT 10 OFFSET 0[0m


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 18:22:51 +0300
Processing by ProConsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
  [1m[35mProCon Load (0.5ms)[0m  SELECT "pro_cons".* FROM "pro_cons"
  Rendered pro_cons/index.html.haml within layouts/application (2.6ms)
  Rendered application/_social_metadata.html.haml (6.1ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (193.6ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (31.3ms)
  Rendered application/_header.html.haml (312.5ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 15:22:53.136181' and ends_at > '2014-10-22 15:22:53.136181')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (9.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1815ms (Views: 1670.7ms | ActiveRecord: 16.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 18:22:56 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.4ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (24.2ms)
Completed 200 OK in 391ms (Views: 252.0ms | ActiveRecord: 4.0ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 18:22:57 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (169.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (248.6ms)
Completed 200 OK in 349ms (Views: 329.4ms | ActiveRecord: 4.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:22:57 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 299ms (Views: 1.1ms | ActiveRecord: 5.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:23:58 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 280ms (Views: 1.3ms | ActiveRecord: 16.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:26:00 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 223ms (Views: 1.3ms | ActiveRecord: 14.0ms)


Started GET "/pro_cons/new" for 127.0.0.1 at 2014-10-22 18:28:20 +0300
Processing by ProConsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> new
  Rendered pro_cons/_form.html.haml (2.0ms)
  Rendered pro_cons/new.html.haml within layouts/application (23.2ms)
Completed 500 Internal Server Error in 193ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (4.1.6) lib/action_view/helpers/form_helper.rb:423:in `form_for'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___4352363204717182095_70250500505360'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/new.html.haml:3:in `_app_views_pro_cons_new_html_haml__1653392036200022381_70250500531120'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/ce36f5c2873b6e6d/variables" for 127.0.0.1 at 2014-10-22 18:28:22 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 15:28:21.979570' and ends_at > '2014-10-22 15:28:21.979570')


Started POST "/__better_errors/ce36f5c2873b6e6d/variables" for 127.0.0.1 at 2014-10-22 18:30:21 +0300


Started POST "/__better_errors/ce36f5c2873b6e6d/variables" for 127.0.0.1 at 2014-10-22 18:30:29 +0300


Started POST "/__better_errors/ce36f5c2873b6e6d/variables" for 127.0.0.1 at 2014-10-22 18:30:29 +0300


Started GET "/pro_cons/new" for 127.0.0.1 at 2014-10-22 18:30:43 +0300
Processing by ProConsController#new as HTML
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> new
  Rendered pro_cons/_form.html.haml (4.3ms)
  Rendered pro_cons/new.html.haml within layouts/application (6.8ms)
  Rendered application/_social_metadata.html.haml (7.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_search.html.haml (5.7ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered application/_user_profile_options.html.haml (1.5ms)
  Rendered application/_user_dropdown.html.haml (32.9ms)
  Rendered application/_header.html.haml (106.3ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 15:30:45.495694' and ends_at > '2014-10-22 15:30:45.495694')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (2.2ms)
  Rendered application/_footer.html.haml (11.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1595ms (Views: 1392.4ms | ActiveRecord: 19.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 18:30:48 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.4ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (5.0ms)
Completed 200 OK in 105ms (Views: 65.1ms | ActiveRecord: 3.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 18:30:49 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (18.2ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (11.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (144.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (175.5ms)
Completed 200 OK in 376ms (Views: 311.8ms | ActiveRecord: 32.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:30:49 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 107ms (Views: 1.1ms | ActiveRecord: 5.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:31:49 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 184ms (Views: 1.2ms | ActiveRecord: 12.0ms)


Started GET "/pro_cons/new" for 127.0.0.1 at 2014-10-22 18:32:32 +0300
Processing by ProConsController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> new
  Rendered pro_cons/_form.html.haml (12.8ms)
  Rendered pro_cons/new.html.haml within layouts/application (15.5ms)
  Rendered application/_social_metadata.html.haml (6.9ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (6.9ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (23.6ms)
  Rendered application/_header.html.haml (61.5ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 15:32:32.711618' and ends_at > '2014-10-22 15:32:32.711618')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
Completed 200 OK in 1565ms (Views: 1401.7ms | ActiveRecord: 8.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 18:32:36 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.5ms)
Completed 200 OK in 80ms (Views: 44.0ms | ActiveRecord: 4.1ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 18:32:36 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (103.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (152.9ms)
Completed 200 OK in 209ms (Views: 192.6ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:32:36 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 25ms (Views: 1.5ms | ActiveRecord: 3.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:33:36 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 385ms (Views: 1.4ms | ActiveRecord: 12.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 18:35:39 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 44ms (Views: 17.4ms | ActiveRecord: 3.8ms)
  [1m[36mActiveRecord::SchemaMigration Load (19.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateProCons (20141022151004)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (77.3ms)[0m  [1mDROP TABLE "pro_cons"[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20141022151004'
  [1m[36m (65.2ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (1.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateProCons (20141022151004)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (26.1ms)[0m  [1mCREATE TABLE "pro_cons" ("id" serial primary key, "body" text, "cons" boolean, "user_id" integer, "discussion_id" integer, "like_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141022151004"]]
  [1m[36m (17.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSmiles (20141022154007)
  [1m[35m (15.5ms)[0m  BEGIN
  [1m[36m (32.0ms)[0m  [1mCREATE TABLE "smiles" ("id" serial primary key, "user_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141022154007"]]
  [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.2ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (22.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mDiscussion Load (5.8ms)[0m  SELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSmiles (20141022154007)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (2.4ms)[0m  [1mDROP TABLE "smiles"[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20141022154007'
  [1m[36m (17.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateProCons (20141022151004)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (2.3ms)[0m  [1mDROP TABLE "pro_cons"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20141022151004'
  [1m[36m (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateProCons (20141022151004)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (7.3ms)[0m  [1mCREATE TABLE "pro_cons" ("id" serial primary key, "body" text, "cons" boolean, "discussion_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141022151004"]]
  [1m[36m (15.9ms)[0m  [1mCOMMIT[0m
Migrating to CreateSmiles (20141022154007)
  [1m[35m (15.3ms)[0m  BEGIN
  [1m[36m (3.8ms)[0m  [1mCREATE TABLE "smiles" ("id" serial primary key, "user_id" integer, "pro_cons_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141022154007"]]
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (6.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (8.9ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProCon Load (0.9ms)[0m  SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" ASC LIMIT 1
  [1m[36m (5.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mDiscussion Exists (0.8ms)[0m  SELECT  1 AS one FROM "discussions"  WHERE ("discussions"."key" = 'YPUgfENW' AND "discussions"."id" != 1) LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.1ms)[0m  [1mINSERT INTO "pro_cons" ("created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2014-10-22 16:04:26.249514"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:04:26.249514"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:04:26.269766"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:04:26.269766"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProCon Load (0.5ms)[0m  SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mDiscussion Exists (8.1ms)[0m  SELECT  1 AS one FROM "discussions"  WHERE ("discussions"."key" = 'YPUgfENW' AND "discussions"."id" != 1) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:05:40.018478"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:05:40.018478"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.6ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mDiscussion Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussions"  WHERE ("discussions"."key" = 'YPUgfENW' AND "discussions"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:05:55.781395"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:05:55.781395"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProCon Load (0.5ms)[0m  SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" ASC LIMIT 1
  [1m[36mProCon Load (0.5ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (7.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."key" = 'wbZrEWYv' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."email" = 'teamco@gmail.com' AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'vladimir' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.5ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (13.3ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:06:55.661709"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:06:55.661709"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.5ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35mProCon Load (0.6ms)[0m  SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1
PG::UndefinedColumn: ERROR:  column discussions.pro_con_id does not exist
LINE 1: SELECT  "discussions".* FROM "discussions"  WHERE "discussio...
                                                          ^
: SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."pro_con_id" = $1 LIMIT 1
  [1m[36mProCon Load (0.5ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1
  [1m[35mProCon Load (0.5ms)[0m  SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1
  [1m[36mProCon Load (0.6ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.2ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.1ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:08:32.015823"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:08:32.015823"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.6ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
PG::UndefinedColumn: ERROR:  column discussions.pro_con_id does not exist
LINE 1: SELECT  "discussions".* FROM "discussions"  WHERE "discussio...
                                                          ^
: SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."pro_con_id" = $1 LIMIT 1
PG::UndefinedColumn: ERROR:  column discussions.pro_con_id does not exist
LINE 1: SELECT  "discussions".* FROM "discussions"  WHERE "discussio...
                                                          ^
: SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."pro_con_id" = $1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.0ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.4ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:11:38.091923"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:11:38.091923"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.6ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
PG::UndefinedColumn: ERROR:  column discussions.pro_con_id does not exist
LINE 1: SELECT  "discussions".* FROM "discussions"  WHERE "discussio...
                                                          ^
: SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."pro_con_id" = $1 LIMIT 1
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.3ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (2.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:14:16.940888"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:14:16.940888"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.7ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mProCon Load (0.3ms)[0m  SELECT "pro_cons".* FROM "pro_cons"  WHERE "pro_cons"."discussion_id" = $1  [["discussion_id", 1]]
  [1m[36mProCon Load (0.4ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"  WHERE "pro_cons"."discussion_id" = $1  ORDER BY "pro_cons"."id" ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mProCon Load (0.4ms)[0m  SELECT "pro_cons".* FROM "pro_cons"  WHERE "pro_cons"."discussion_id" = $1  [["discussion_id", 1]]
  [1m[36m (6.8ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.1ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.1ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:18:35.344853"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:18:35.344853"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.6ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.5ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.1ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mProCon Load (0.6ms)[0m  SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:20:03.490083"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:20:03.490083"]]
  [1m[36m (1.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProCon Load (0.5ms)[0m  SELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1
  [1m[36m (3.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSmiles (20141022154007)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.9ms)[0m  [1mDROP TABLE "smiles"[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20141022154007'
  [1m[36m (17.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateProCons (20141022151004)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mDROP TABLE "pro_cons"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20141022151004'
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateProCons (20141022151004)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (7.7ms)[0m  [1mCREATE TABLE "pro_cons" ("id" serial primary key, "body" text, "cons" boolean, "discussion_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141022151004"]]
  [1m[36m (15.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateSmiles (20141022154007)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (40.5ms)[0m  [1mCREATE TABLE "smiles" ("id" serial primary key, "user_id" integer, "pro_con_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141022154007"]]
  [1m[36m (4.3ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.1ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.1ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (16.1ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:23:41.856661"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:23:41.856661"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.7ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:28:13.384841"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:28:13.384841"]]
  [1m[35m (11.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.7ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (2.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:34:02.335099"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:34:02.335099"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.6ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (2.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:48:51.172428"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:48:51.172428"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (3.0ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" INNER JOIN "discussions" ON "users"."id" = "discussions"."author_id" WHERE "discussions"."id" = $1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (2.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mDiscussion Load (3.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "discussions"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "test"], ["cons", "f"], ["created_at", "2014-10-22 16:53:02.105191"], ["discussion_id", 1], ["updated_at", "2014-10-22 16:53:02.105191"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProCon Load (0.6ms)[0m  [1mSELECT  "pro_cons".* FROM "pro_cons"   ORDER BY "pro_cons"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (34.3ms)[0m  [1mINSERT INTO "smiles" ("created_at", "pro_con_id", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2014-10-22 16:57:23.205077"], ["pro_con_id", 5], ["updated_at", "2014-10-22 16:57:23.205077"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSmile Load (0.4ms)[0m  [1mSELECT "smiles".* FROM "smiles"  WHERE "smiles"."pro_con_id" = $1[0m  [["pro_con_id", 5]]


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:12:08 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (24.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (2.0ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (1.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (17.2ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (17.2ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (20.0ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (3.1ms)
  Rendered groups/_title.html.haml (20.2ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (12.1ms)
  Rendered discussions/_privacy_icon.html.haml (2.9ms)
  Rendered discussions/_title.html.haml (25.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (20.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (55.8ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (1.2ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (9.6ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (8.6ms)
  Rendered motions/_motion.html.haml (174.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (12.9ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (1.0ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (11.3ms)
  Rendered base/_linked_avatar.html.haml (20.9ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (6.4ms)
  Rendered comments/_comment_limited.html.haml (71.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment_limited.html.haml (15.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (21.1ms)
  [1m[35mEvent Load (22.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.1ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.3ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (7.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (59.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.8ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.0ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (16.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.3ms)
  Rendered discussions/_activity.html.haml (327.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (4.6ms)
  Rendered discussions/_markdown_setting.html.haml (4.9ms)
  Rendered discussions/_add_comment.html.haml (109.9ms)
  Rendered discussions/show.html.haml within layouts/application (1198.7ms)
  Rendered application/_social_metadata.html.haml (24.0ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (5.4ms)
  Rendered application/_search.html.haml (495.2ms)
  Rendered base/_avatar.html.haml (3.8ms)
  Rendered application/_user_profile_options.html.haml (15.2ms)
  Rendered application/_user_dropdown.html.haml (24.8ms)
  Rendered application/_header.html.haml (653.8ms)
  [1m[36mAnnouncement Load (1.3ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:12:09.977432' and ends_at > '2014-10-22 17:12:09.977432')[0m
  Rendered application/_announcements.html.haml (5.9ms)
  Rendered application/_flash_messages.html.haml (2.1ms)
  Rendered application/_footer_links.html.haml (3.1ms)
  Rendered application/_footer.html.haml (13.6ms)
  Rendered application/_intercom_tracker.html.haml (1.4ms)
  Rendered application/_heap_analytics.html.haml (2.0ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (37.8ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.7ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 17:12:15.046532')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 17:12:15.046532"], ["updated_at", "2014-10-22 17:12:15.085242"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 5942ms (Views: 4447.1ms | ActiveRecord: 265.3ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:12:22 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.4ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (5.1ms)
Completed 200 OK in 169ms (Views: 61.9ms | ActiveRecord: 7.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:12:22 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (1.1ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (58.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (70.0ms)
Completed 200 OK in 102ms (Views: 87.2ms | ActiveRecord: 5.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:12:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (31.2ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (12.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 195ms (Views: 27.8ms | ActiveRecord: 45.0ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:13:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 4.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:14:03 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.9ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.8ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (10.0ms)
  [1m[35mMembership Load (0.7ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (7.5ms)
  Rendered discussions/_privacy_icon.html.haml (1.8ms)
  Rendered discussions/_title.html.haml (46.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.5ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.5ms)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.4ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (77.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.6ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.6ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  [1m[36mComment Load (1.6ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (46.9ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment_limited.html.haml (86.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (14.8ms)
  [1m[36mEvent Load (0.6ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (1.8ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (16.5ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.3ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (0.9ms)
  Rendered comments/_comment.html.haml (16.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.7ms)
  Rendered discussions/_activity.html.haml (144.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.2ms)
  Rendered discussions/show.html.haml within layouts/application (640.4ms)
  Rendered application/_social_metadata.html.haml (7.3ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (1.7ms)
  Rendered application/_user_dropdown.html.haml (4.6ms)
  Rendered application/_header.html.haml (74.3ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:14:04.305562' and ends_at > '2014-10-22 17:14:04.305562')
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.0ms)
  Rendered application/_footer.html.haml (8.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (31.2ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 17:14:06.740435')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 17:14:06.740435"], ["updated_at", "2014-10-22 17:14:06.758227"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 2466ms (Views: 2293.9ms | ActiveRecord: 110.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:14:09 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (17.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (16.7ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 108ms (Views: 60.1ms | ActiveRecord: 34.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:14:09 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (2.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (35.4ms)
Completed 200 OK in 65ms (Views: 40.8ms | ActiveRecord: 5.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:14:09 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 3.3ms)


Started GET "/pro_cons/new" for 127.0.0.1 at 2014-10-22 20:14:17 +0300
Processing by ProConsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
Completed 500 Internal Server Error in 77ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `user=' for #<ProCon:0x007fb4a85fec68>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:14:in `new'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/6113fa2a569cfdb0/variables" for 127.0.0.1 at 2014-10-22 20:14:18 +0300
  [1m[36mAnnouncement Load (0.3ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:14:17.572841' and ends_at > '2014-10-22 17:14:17.572841')[0m


Started POST "/__better_errors/6113fa2a569cfdb0/variables" for 127.0.0.1 at 2014-10-22 20:14:28 +0300


Started GET "/pro_cons/new" for 127.0.0.1 at 2014-10-22 20:15:52 +0300
Processing by ProConsController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
Completed 500 Internal Server Error in 11ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `user=' for #<ProCon:0x007fb4aabefe18>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:14:in `new'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/efe40b870734857a/variables" for 127.0.0.1 at 2014-10-22 20:15:53 +0300
  [1m[35mAnnouncement Load (3.1ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:15:52.679677' and ends_at > '2014-10-22 17:15:52.679677')


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:15:57 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.8ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.7ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (8.7ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.3ms)
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.6ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.5ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (50.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (31.1ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (15.9ms)
  [1m[35mEvent Load (0.5ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (20.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.5ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (17.0ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (16.7ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (19.8ms)
  Rendered discussions/_activity.html.haml (137.9ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.4ms)
  Rendered discussions/show.html.haml within layouts/application (357.3ms)
  Rendered application/_social_metadata.html.haml (6.1ms)
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (33.0ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:15:57.192413' and ends_at > '2014-10-22 17:15:57.192413')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.0ms)
  Rendered application/_footer.html.haml (7.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.4ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 17:15:58.682030')[0m  [["motion_id", 1]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 17:15:58.682030"], ["updated_at", "2014-10-22 17:15:58.698726"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1519ms (Views: 1435.0ms | ActiveRecord: 29.8ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:16:01 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.7ms)
Completed 200 OK in 21ms (Views: 7.9ms | ActiveRecord: 1.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:16:01 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (22.8ms)
  Rendered notifications/groups_tree_dropdown.html.haml (28.8ms)
Completed 200 OK in 43ms (Views: 32.0ms | ActiveRecord: 3.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:16:01 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.7ms | ActiveRecord: 3.4ms)


Started GET "/pro_cons" for 127.0.0.1 at 2014-10-22 20:16:04 +0300
Processing by ProConsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
  [1m[35mProCon Load (0.6ms)[0m  SELECT "pro_cons".* FROM "pro_cons"
  Rendered pro_cons/index.html.haml within layouts/application (6.4ms)
  Rendered application/_social_metadata.html.haml (5.4ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (5.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.5ms)
  Rendered application/_header.html.haml (33.8ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:16:04.159496' and ends_at > '2014-10-22 17:16:04.159496')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
Completed 200 OK in 1074ms (Views: 1058.8ms | ActiveRecord: 3.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:16:07 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.7ms)
Completed 200 OK in 21ms (Views: 7.2ms | ActiveRecord: 1.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:16:07 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (20.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (25.9ms)
Completed 200 OK in 41ms (Views: 28.0ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:16:07 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 173ms (Views: 0.8ms | ActiveRecord: 4.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:16:51 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (1.1ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.8ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.1ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (2.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.7ms)
  Rendered groups/_title.html.haml (8.8ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (10.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (190.4ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.5ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (11.1ms)
  [1m[36mMotion Load (0.7ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (24.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (5.1ms)
  [1m[35mVote Load (0.6ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (1.3ms)
  Rendered motions/_motion.html.haml (556.8ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.4ms)
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (40.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (14.5ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (5.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (14.1ms)
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (19.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.8ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.1ms)
  Rendered discussions/_activity.html.haml (162.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.8ms)
  Rendered discussions/show.html.haml within layouts/application (1305.8ms)
  Rendered application/_social_metadata.html.haml (7.4ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (6.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.4ms)
  Rendered application/_header.html.haml (40.8ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:16:51.802095' and ends_at > '2014-10-22 17:16:51.802095')
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.5ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 17:16:54.457790')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 17:16:54.457790"], ["updated_at", "2014-10-22 17:16:54.475664"]]
  [1m[35m (16.0ms)[0m  COMMIT
Completed 200 OK in 2703ms (Views: 2576.4ms | ActiveRecord: 62.6ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:16:56 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 68ms (Views: 42.3ms | ActiveRecord: 1.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:16:56 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (2.1ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.0ms)
  Rendered notifications/groups_tree_dropdown.html.haml (36.0ms)
Completed 200 OK in 53ms (Views: 37.4ms | ActiveRecord: 5.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:16:56 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 27ms (Views: 0.8ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:17:57 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.9ms | ActiveRecord: 4.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:19:57 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:20:18 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (1.0ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.7ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (3.8ms)
  [1m[36mMembership Load (0.7ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.7ms)
  Rendered discussions/_privacy_icon.html.haml (1.2ms)
  Rendered discussions/_title.html.haml (11.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.0ms)
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.5ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (44.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment_limited.html.haml (25.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.0ms)
  [1m[35mEvent Load (1.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.7ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.6ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (1.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (17.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (18.6ms)
  Rendered discussions/_activity.html.haml (135.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (16.2ms)
  Rendered discussions/show.html.haml within layouts/application (330.9ms)
  Rendered application/_social_metadata.html.haml (5.4ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (4.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.5ms)
  Rendered application/_header.html.haml (31.7ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:20:18.733772' and ends_at > '2014-10-22 17:20:18.733772')[0m
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.4ms)
  Rendered application/_footer.html.haml (10.1ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.5ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 17:20:20.278629')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-22 17:20:20.278629"], ["updated_at", "2014-10-22 17:20:20.294923"]]
  [1m[36m (16.0ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1592ms (Views: 1484.9ms | ActiveRecord: 46.4ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:20:22 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (2.6ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (6.4ms)
Completed 200 OK in 190ms (Views: 170.7ms | ActiveRecord: 4.0ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:20:23 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (129.5ms)
Completed 200 OK in 253ms (Views: 239.8ms | ActiveRecord: 3.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:20:23 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 34ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:21:23 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 192ms (Views: 0.6ms | ActiveRecord: 4.4ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:22:24 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.2ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.2ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.7ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (9.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.5ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.0ms)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.2ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.0ms)
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (48.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (25.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (14.7ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:22:24.171426' and ends_at > '2014-10-22 17:22:24.171426')[0m
  [1m[35mMotion Load (0.3ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.9ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  Rendered discussions/_form.html.haml (186.8ms)
  Rendered pro_cons/_new.html.haml (210.0ms)
  Rendered discussions/show.html.haml within layouts/application (448.9ms)
Completed 500 Internal Server Error in 511ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NameError - undefined local variable or method `discussion' for #<#<Class:0x007fb4af1f86f8>:0x007fb4ae761168>:
   () Users/teamco/Sites/loomio/app/views/discussions/_form.html.haml:3:in `_app_views_discussions__form_html_haml___1045138992286594233_70207004591440'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__1285118160775384144_70207004639860'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___2413708575144811521_70206967568940'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/c3687113a2bda591/variables" for 127.0.0.1 at 2014-10-22 20:22:25 +0300


Started POST "/__better_errors/c3687113a2bda591/variables" for 127.0.0.1 at 2014-10-22 20:23:09 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:23:57 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (1.0ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.7ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.4ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.3ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.4ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (44.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (1.7ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  [1m[35mComment Load (0.3ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (25.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (14.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (16.5ms)
  Rendered pro_cons/_form.html.haml (5.6ms)
  Rendered pro_cons/_new.html.haml (38.1ms)
  Rendered discussions/show.html.haml within layouts/application (194.1ms)
Completed 500 Internal Server Error in 308ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (4.1.6) lib/action_view/helpers/form_helper.rb:423:in `form_for'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml__2104069831126556806_70206950207320'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__1285118160775384144_70206947561100'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___2413708575144811521_70206967568940'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/14e02fcad0d9554e/variables" for 127.0.0.1 at 2014-10-22 20:23:58 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:23:57.720996' and ends_at > '2014-10-22 17:23:57.720996')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started POST "/__better_errors/14e02fcad0d9554e/variables" for 127.0.0.1 at 2014-10-22 20:24:12 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:25:30 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
Completed 500 Internal Server Error in 567ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `user=' for #<ProCon:0x007fb4ae4e6410>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/controllers/discussions_controller.rb:101:in `show'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/16ced8a0ba9ed38d/variables" for 127.0.0.1 at 2014-10-22 20:25:34 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:25:33.395282' and ends_at > '2014-10-22 17:25:33.395282')


Started POST "/__better_errors/16ced8a0ba9ed38d/variables" for 127.0.0.1 at 2014-10-22 20:25:42 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:25:55 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (2.4ms)
  Rendered groups/_title.html.haml (55.2ms)
  [1m[36mMembership Load (0.8ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.9ms)
  Rendered discussions/_privacy_icon.html.haml (44.8ms)
  Rendered discussions/_title.html.haml (195.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (1.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (56.7ms)
  [1m[35mMotion Load (1.7ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.4ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (145.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.8ms)
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (3.4ms)
  Rendered comments/_comment_limited.html.haml (48.3ms)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (18.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.9ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (18.4ms)
  Rendered pro_cons/_form.html.haml (63.4ms)
  Rendered pro_cons/_new.html.haml (90.9ms)
  Rendered discussions/show.html.haml within layouts/application (1555.5ms)
Completed 500 Internal Server Error in 2542ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `user' for #<ProCon:0x007fb4aecd2750>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:14:in `block in _app_views_pro_cons__form_html_haml__2104069831126556806_70206950207320'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:137:in `call'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:137:in `block (2 levels) in form_for_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:278:in `with_tabs'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:137:in `block in form_for_with_haml'
  actionview (4.1.6) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionview (4.1.6) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
  actionview (4.1.6) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:52:in `capture_with_haml'
  actionview (4.1.6) lib/action_view/helpers/form_helper.rb:434:in `form_for'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml__2104069831126556806_70206950207320'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__1285118160775384144_70206947561100'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___2413708575144811521_70206967568940'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/db8395fff25a070c/variables" for 127.0.0.1 at 2014-10-22 20:26:00 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:25:57.326727' and ends_at > '2014-10-22 17:25:57.326727')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.7ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started POST "/__better_errors/db8395fff25a070c/variables" for 127.0.0.1 at 2014-10-22 20:26:03 +0300


Started POST "/__better_errors/db8395fff25a070c/variables" for 127.0.0.1 at 2014-10-22 20:26:05 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:27:07 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (12.0ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.6ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (11.9ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (18.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.5ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (89.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (9.2ms)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment_limited.html.haml (30.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (16.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.3ms)
  Rendered pro_cons/_form.html.haml (14.2ms)
  Rendered pro_cons/_new.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (457.8ms)
Completed 500 Internal Server Error in 1158ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `duser' for #<ProCon:0x007fb4af620848>:
  activemodel (4.1.6) lib/active_model/attribute_methods.rb:435:in `method_missing'
  activerecord (4.1.6) lib/active_record/attribute_methods.rb:211:in `method_missing'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:14:in `block in _app_views_pro_cons__form_html_haml__2104069831126556806_70207003436400'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:137:in `call'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:137:in `block (2 levels) in form_for_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:278:in `with_tabs'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:137:in `block in form_for_with_haml'
  actionview (4.1.6) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionview (4.1.6) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
  actionview (4.1.6) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:52:in `capture_with_haml'
  actionview (4.1.6) lib/action_view/helpers/form_helper.rb:434:in `form_for'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml__2104069831126556806_70207003436400'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__1285118160775384144_70206947561100'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___2413708575144811521_70206967568940'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/aa2a80ced15669d2/variables" for 127.0.0.1 at 2014-10-22 20:27:11 +0300
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:27:09.912003' and ends_at > '2014-10-22 17:27:09.912003')[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (1.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:27:26 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (17.1ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (8.8ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (21.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (11.1ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.9ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (3.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (1.0ms)
  Rendered motions/_motion.html.haml (67.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (2.2ms)
  Rendered comments/_comment_limited.html.haml (27.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (15.7ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (16.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (7.5ms)
  Rendered pro_cons/_new.html.haml (9.1ms)
  [1m[36mEvent Load (0.7ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.2ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (10.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (30.4ms)
  Rendered base/_avatar.html.haml (2.2ms)
  Rendered base/_linked_avatar.html.haml (11.0ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (22.9ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (20.2ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (8.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (21.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.0ms)
  Rendered discussions/_activity.html.haml (209.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (17.1ms)
  Rendered discussions/show.html.haml within layouts/application (651.7ms)
  Rendered application/_social_metadata.html.haml (7.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (7.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.4ms)
  Rendered application/_user_dropdown.html.haml (4.3ms)
  Rendered application/_header.html.haml (44.1ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:27:27.024395' and ends_at > '2014-10-22 17:27:27.024395')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.5ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (28.0ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 17:27:29.104850')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 17:27:29.104850"], ["updated_at", "2014-10-22 17:27:29.129662"]]
  [1m[35m (0.7ms)[0m  COMMIT
Completed 200 OK in 2151ms (Views: 1986.2ms | ActiveRecord: 54.3ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:27:32 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 76ms (Views: 50.5ms | ActiveRecord: 4.1ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:27:32 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (34.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (63.8ms)
Completed 200 OK in 79ms (Views: 67.5ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:27:32 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 28ms (Views: 1.2ms | ActiveRecord: 3.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:28:33 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-22 20:29:35 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.7ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (3.3ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.8ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.2ms)
  Rendered discussions/_title.html.haml (10.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.7ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (78.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (1.2ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (25.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (16.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (16.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (9.9ms)
  Rendered pro_cons/_new.html.haml (11.6ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.3ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.0ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.5ms)
  Rendered discussions/_activity.html.haml (134.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.6ms)
  Rendered discussions/show.html.haml within layouts/application (696.3ms)
  Rendered application/_social_metadata.html.haml (6.2ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_user_dropdown.html.haml (4.6ms)
  Rendered application/_header.html.haml (34.4ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-22 17:29:35.059212' and ends_at > '2014-10-22 17:29:35.059212')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.5ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (15.9ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-22 17:29:37.247700')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-22 17:29:37.247700"], ["updated_at", "2014-10-22 17:29:37.264953"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 2222ms (Views: 2114.9ms | ActiveRecord: 42.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-22 20:29:39 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 72ms (Views: 58.4ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-22 20:29:39 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (13.2ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (28.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (61.4ms)
Completed 200 OK in 82ms (Views: 53.9ms | ActiveRecord: 15.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:29:39 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (2.8ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 4.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:30:39 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.1ms)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 2.8ms)
  [1m[35m (6.8ms)[0m  ROLLBACK


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 20:32:40 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 22:24:25 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 22:26:15 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 51ms (Views: 0.7ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 22:28:24 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-22 22:31:25 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 37ms (Views: 0.9ms | ActiveRecord: 3.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:15:53 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (18.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (13.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (18.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (24.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (21.7ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (3.0ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (1.4ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (3.6ms)
  Rendered groups/_title.html.haml (16.8ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (11.3ms)
  Rendered discussions/_privacy_icon.html.haml (5.7ms)
  Rendered discussions/_title.html.haml (24.3ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (1.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (51.2ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (4.1ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (10.9ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (8.2ms)
  Rendered motions/_motion.html.haml (196.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (22.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (1.1ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (3.2ms)
  Rendered base/_linked_avatar.html.haml (13.0ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.8ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (5.4ms)
  Rendered comments/_comment_limited.html.haml (63.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (17.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (54.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (63.6ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (71.7ms)
  Rendered pro_cons/_new.html.haml (97.0ms)
  [1m[36mEvent Load (1.7ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.7ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.8ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (2.3ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (12.5ms)
  Rendered base/_avatar.html.haml (1.0ms)
  Rendered base/_linked_avatar.html.haml (9.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (68.6ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (13.5ms)
  Rendered comments/_comment_likes.html.haml (2.4ms)
  Rendered comments/_comment.html.haml (36.2ms)
  Rendered discussions/_discussion_item.html.haml (3.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (2.4ms)
  Rendered comments/_comment.html.haml (30.1ms)
  Rendered discussions/_discussion_item.html.haml (3.6ms)
  Rendered discussions/_discussion_item.html.haml (16.7ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.5ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (38.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (9.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (45.3ms)
  Rendered discussions/_activity.html.haml (445.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (5.3ms)
  Rendered discussions/_markdown_setting.html.haml (6.1ms)
  Rendered discussions/_add_comment.html.haml (83.2ms)
  Rendered discussions/show.html.haml within layouts/application (1456.2ms)
  Rendered application/_social_metadata.html.haml (46.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (5.9ms)
  Rendered application/_search.html.haml (156.5ms)
  Rendered base/_avatar.html.haml (3.3ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (9.6ms)
  Rendered application/_header.html.haml (221.6ms)
  [1m[35mAnnouncement Load (0.6ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:15:54.004287' and ends_at > '2014-10-23 12:15:54.004287')
  Rendered application/_announcements.html.haml (3.8ms)
  Rendered application/_flash_messages.html.haml (2.9ms)
  Rendered application/_footer_links.html.haml (4.6ms)
  Rendered application/_footer.html.haml (22.7ms)
  Rendered application/_intercom_tracker.html.haml (2.2ms)
  Rendered application/_heap_analytics.html.haml (1.9ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (17.8ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:15:58.906011')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.6ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:15:58.906011"], ["updated_at", "2014-10-23 12:15:58.944195"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 5620ms (Views: 4307.5ms | ActiveRecord: 223.0ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:16:03 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (2.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (6.5ms)
Completed 200 OK in 77ms (Views: 18.8ms | ActiveRecord: 8.1ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:16:03 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (43.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (56.3ms)
Completed 200 OK in 75ms (Views: 61.1ms | ActiveRecord: 4.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:16:03 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.1ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.9ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 59ms (Views: 28.5ms | ActiveRecord: 4.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:17:03 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 5.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:19:03 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 3.7ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:19:50 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.7ms)
  Rendered groups/_title.html.haml (4.9ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (19.4ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.5ms)
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.7ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.6ms)
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (55.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (26.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.1ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (14.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (16.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (8.9ms)
  Rendered pro_cons/_new.html.haml (13.1ms)
  [1m[36mEvent Load (0.6ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (28.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.2ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (19.7ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.1ms)
  Rendered discussions/_activity.html.haml (166.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (481.1ms)
  Rendered application/_social_metadata.html.haml (5.2ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (4.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (34.0ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:19:50.235799' and ends_at > '2014-10-23 12:19:50.235799')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.6ms)
  Rendered application/_footer.html.haml (9.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (21.4ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.7ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:19:52.097505')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:19:52.097505"], ["updated_at", "2014-10-23 12:19:52.119419"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 1900ms (Views: 1779.5ms | ActiveRecord: 51.7ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:19:54 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 80ms (Views: 61.5ms | ActiveRecord: 1.6ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:19:54 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (18.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (33.6ms)
Completed 200 OK in 51ms (Views: 36.2ms | ActiveRecord: 3.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:19:54 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.1ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 3.6ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:20:35 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (2.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (1.9ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.9ms)
  Rendered groups/_title.html.haml (5.4ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.5ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (20.1ms)
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.7ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (12.4ms)
  [1m[35mMotion Load (0.7ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (1.0ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.8ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (5.5ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (3.0ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (122.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.6ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (39.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (35.3ms)
  Rendered pro_cons/_new.html.haml (45.1ms)
  Rendered discussions/show.html.haml within layouts/application (393.3ms)
Completed 500 Internal Server Error in 489ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `model_name' for TrueClass:Class:
  actionpack (4.1.6) lib/action_controller/model_naming.rb:9:in `model_name_from_record_or_class'
  actionpack (4.1.6) lib/action_dispatch/routing/polymorphic_routes.rb:195:in `build_named_route_call'
  actionpack (4.1.6) lib/action_dispatch/routing/polymorphic_routes.rb:133:in `polymorphic_url'
  actionpack (4.1.6) lib/action_dispatch/routing/polymorphic_routes.rb:148:in `polymorphic_path'
  actionview (4.1.6) lib/action_view/routing_url_for.rb:89:in `url_for'
  actionview (4.1.6) lib/action_view/helpers/form_tag_helper.rb:695:in `block in html_options_for_form'
  actionview (4.1.6) lib/action_view/helpers/form_tag_helper.rb:691:in `tap'
  actionview (4.1.6) lib/action_view/helpers/form_tag_helper.rb:691:in `html_options_for_form'
  actionview (4.1.6) lib/action_view/helpers/form_tag_helper.rb:68:in `form_tag'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:121:in `form_tag_with_haml'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:18:in `form_tag_with_haml_xss'
  actionview (4.1.6) lib/action_view/helpers/form_helper.rb:437:in `form_for'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.5) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___1407573920625419352_70102015469460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__2163818960223602016_70102034792760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___233767400232693294_70101978672460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/3406cfec9c7ec28c/variables" for 127.0.0.1 at 2014-10-23 15:20:37 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:20:35.791333' and ends_at > '2014-10-23 12:20:35.791333')[0m
  [1m[35mMotion Load (0.4ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mDiscussion Load (1.1ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:21:04 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.8ms)
  Rendered groups/_title.html.haml (5.2ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.9ms)
  Rendered discussions/_privacy_icon.html.haml (0.8ms)
  Rendered discussions/_title.html.haml (8.7ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.8ms)
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.5ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.8ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (46.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (25.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (9.8ms)
  Rendered pro_cons/_new.html.haml (11.4ms)
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.7ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.0ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (18.6ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (18.7ms)
  Rendered discussions/_discussion_item.html.haml (2.0ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered base/_avatar.html.haml (1.0ms)
  Rendered base/_linked_avatar.html.haml (8.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.1ms)
  Rendered discussions/_activity.html.haml (146.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (16.4ms)
  Rendered discussions/show.html.haml within layouts/application (350.9ms)
  Rendered application/_social_metadata.html.haml (5.4ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.9ms)
  Rendered application/_header.html.haml (43.1ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:21:04.122211' and ends_at > '2014-10-23 12:21:04.122211')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.6ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:21:05.659141')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:21:05.659141"], ["updated_at", "2014-10-23 12:21:05.675517"]]
  [1m[35m (1.0ms)[0m  COMMIT
Completed 200 OK in 1584ms (Views: 1461.8ms | ActiveRecord: 45.0ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:21:09 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (10.4ms)
Completed 200 OK in 47ms (Views: 32.5ms | ActiveRecord: 1.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:21:09 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (13.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.2ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (31.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (213.9ms)
Completed 200 OK in 439ms (Views: 410.6ms | ActiveRecord: 18.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:21:10 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 38ms (Views: 0.8ms | ActiveRecord: 3.5ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:21:32 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (5.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (1.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.3ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.0ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.8ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (8.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.5ms)
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.6ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.0ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (43.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (7.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (1.0ms)
  Rendered base/_linked_avatar.html.haml (10.0ms)
  [1m[35mComment Load (1.8ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.8ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (34.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (8.7ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (19.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (16.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (11.2ms)
  Rendered pro_cons/_new.html.haml (14.5ms)
  [1m[36mEvent Load (0.6ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (10.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (27.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (8.9ms)
  Rendered comments/_comment_likes.html.haml (1.8ms)
  Rendered comments/_comment.html.haml (20.9ms)
  Rendered discussions/_discussion_item.html.haml (3.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.3ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (24.0ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (3.5ms)
  Rendered comments/_comment.html.haml (20.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (20.6ms)
  Rendered discussions/_activity.html.haml (172.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.6ms)
  Rendered discussions/show.html.haml within layouts/application (384.0ms)
  Rendered application/_social_metadata.html.haml (8.3ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (6.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.1ms)
  Rendered application/_header.html.haml (36.0ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:21:32.197846' and ends_at > '2014-10-23 12:21:32.197846')
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:21:33.827958')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:21:33.827958"], ["updated_at", "2014-10-23 12:21:33.845624"]]
  [1m[35m (0.7ms)[0m  COMMIT
Completed 200 OK in 1673ms (Views: 1561.4ms | ActiveRecord: 43.4ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:21:37 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.9ms)
Completed 200 OK in 23ms (Views: 7.6ms | ActiveRecord: 1.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:21:37 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (23.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (40.8ms)
Completed 200 OK in 59ms (Views: 44.5ms | ActiveRecord: 4.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:21:37 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (2.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 34ms (Views: 0.9ms | ActiveRecord: 4.6ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:21:57 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (3.7ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.2ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.5ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.2ms)
  [1m[35mMotion Load (0.5ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.7ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (44.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (1.0ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (2.3ms)
  Rendered comments/_comment_limited.html.haml (26.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (31.1ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (40.1ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:21:57.470979' and ends_at > '2014-10-23 12:21:57.470979')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  Rendered pro_cons/_form.html.haml (59.0ms)
  Rendered pro_cons/_new.html.haml (60.3ms)
  Rendered discussions/show.html.haml within layouts/application (238.4ms)
Completed 500 Internal Server Error in 291ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `action' for #<DiscussionsController:0x007f83c54b5d20>:
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___1407573920625419352_70102009211760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__2163818960223602016_70102034792760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___233767400232693294_70101978672460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/880f8f664ba6de49/variables" for 127.0.0.1 at 2014-10-23 15:21:58 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:22:16 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.7ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.2ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (10.2ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.9ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (48.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.6ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (1.6ms)
  Rendered base/_linked_avatar.html.haml (18.5ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (46.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (9.8ms)
  Rendered pro_cons/_new.html.haml (11.4ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.9ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.7ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (21.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.8ms)
  Rendered comments/_comment.html.haml (19.2ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (8.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered discussions/_activity.html.haml (147.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.9ms)
  Rendered discussions/show.html.haml within layouts/application (362.3ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_search.html.haml (4.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (32.4ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:22:16.982323' and ends_at > '2014-10-23 12:22:16.982323')[0m
  Rendered application/_announcements.html.haml (1.5ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.2ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.2ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:22:18.508847')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:22:18.508847"], ["updated_at", "2014-10-23 12:22:18.524707"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1557ms (Views: 1467.9ms | ActiveRecord: 26.6ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:22:22 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (13.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (5.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.5ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 42ms (Views: 8.5ms | ActiveRecord: 19.3ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:22:22 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (1.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (74.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (81.8ms)
Completed 200 OK in 120ms (Views: 85.5ms | ActiveRecord: 7.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:22:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (8.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 175ms (Views: 0.9ms | ActiveRecord: 10.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:22:52 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (2.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (3.7ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (4.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (8.2ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.1ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.7ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.5ms)
  Rendered motions/_motion.html.haml (43.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (25.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.5ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.9ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (8.9ms)
  Rendered pro_cons/_new.html.haml (10.4ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.8ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.0ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.9ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (9.7ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (21.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.0ms)
  Rendered discussions/_activity.html.haml (139.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (17.0ms)
  Rendered discussions/show.html.haml within layouts/application (319.7ms)
  Rendered application/_social_metadata.html.haml (7.1ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (32.2ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:22:52.735729' and ends_at > '2014-10-23 12:22:52.735729')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.1ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:22:54.242469')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:22:54.242469"], ["updated_at", "2014-10-23 12:22:54.259093"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1544ms (Views: 1453.2ms | ActiveRecord: 26.4ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:22:58 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.3ms)
Completed 200 OK in 21ms (Views: 7.8ms | ActiveRecord: 1.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:22:58 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (17.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (23.2ms)
Completed 200 OK in 41ms (Views: 27.6ms | ActiveRecord: 4.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:22:58 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 34ms (Views: 0.8ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:23:58 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:25:29 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (5.2ms)
  [1m[35mMembership Load (0.9ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.8ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.0ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (44.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (8.5ms)
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment_limited.html.haml (27.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (14.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (14.8ms)
  Rendered pro_cons/_form.html.haml (5.5ms)
  Rendered pro_cons/_new.html.haml (7.0ms)
  Rendered discussions/show.html.haml within layouts/application (162.2ms)
Completed 500 Internal Server Error in 243ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - wrong number of arguments (0 for 1..2):
   () Users/teamco/Sites/loomio/app/helpers/readable_unguessable_urls_helper.rb:18:in `block (2 levels) in <module:ReadableUnguessableUrlsHelper>'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___1407573920625419352_70102008297760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__2163818960223602016_70102034792760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___233767400232693294_70101978672460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:25:30 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:25:29.367360' and ends_at > '2014-10-23 12:25:29.367360')[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (1.2ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mDiscussion Load (0.8ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:25:47 +0300


Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:25:52 +0300


Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:25:59 +0300


Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:26:03 +0300


Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:26:08 +0300


Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:26:10 +0300


Started POST "/__better_errors/baa9a8b825eb851d/variables" for 127.0.0.1 at 2014-10-23 15:26:13 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:26:36 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.7ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.1ms)
  Rendered discussions/_title.html.haml (10.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (14.6ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.9ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (45.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (1.2ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  [1m[35mComment Load (0.3ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (26.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.4ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (18.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (15.1ms)
  Rendered pro_cons/_form.html.haml (4.7ms)
  Rendered pro_cons/_new.html.haml (7.9ms)
  Rendered discussions/show.html.haml within layouts/application (186.3ms)
Completed 500 Internal Server Error in 272ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - wrong number of arguments (0 for 1..2):
   () Users/teamco/Sites/loomio/app/helpers/readable_unguessable_urls_helper.rb:18:in `block (2 levels) in <module:ReadableUnguessableUrlsHelper>'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___1407573920625419352_70101970581760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__2163818960223602016_70101970480440'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___233767400232693294_70101978672460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/aba746afa169750e/variables" for 127.0.0.1 at 2014-10-23 15:26:37 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:26:36.818316' and ends_at > '2014-10-23 12:26:36.818316')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:27:24 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (4.5ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.0ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.7ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (7.6ms)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.0ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (40.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.6ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (22.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (14.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.7ms)
  Rendered pro_cons/_form.html.haml (4.9ms)
  Rendered pro_cons/_new.html.haml (7.8ms)
  Rendered discussions/show.html.haml within layouts/application (150.9ms)
Completed 500 Internal Server Error in 198ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - wrong number of arguments (0 for 1..2):
   () Users/teamco/Sites/loomio/app/helpers/readable_unguessable_urls_helper.rb:18:in `block (2 levels) in <module:ReadableUnguessableUrlsHelper>'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___1407573920625419352_70102035615480'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__2163818960223602016_70102035551940'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___233767400232693294_70101978672460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/065ebc642340d7ca/variables" for 127.0.0.1 at 2014-10-23 15:27:25 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:27:24.707545' and ends_at > '2014-10-23 12:27:24.707545')[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.8ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:27:40 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (3.7ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.4ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.2ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (7.6ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (40.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (25.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (8.3ms)
  Rendered pro_cons/_new.html.haml (9.8ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.7ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.6ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.2ms)
  Rendered discussions/_discussion_item.html.haml (1.8ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.0ms)
  Rendered discussions/_activity.html.haml (129.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.7ms)
  Rendered discussions/show.html.haml within layouts/application (302.4ms)
  Rendered application/_social_metadata.html.haml (7.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (31.7ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:27:40.446311' and ends_at > '2014-10-23 12:27:40.446311')
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.0ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (101.6ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:27:42.033358')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:27:42.033358"], ["updated_at", "2014-10-23 12:27:42.052475"]]
  [1m[35m (33.1ms)[0m  COMMIT
Completed 200 OK in 1657ms (Views: 1435.0ms | ActiveRecord: 156.9ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:27:44 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.5ms)
Completed 200 OK in 29ms (Views: 9.4ms | ActiveRecord: 1.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:27:44 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.7ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.8ms)
  Rendered notifications/groups_tree_dropdown.html.haml (27.9ms)
Completed 200 OK in 47ms (Views: 31.0ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:27:45 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 30ms (Views: 1.1ms | ActiveRecord: 3.4ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:28:34 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (5.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (3.9ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (1.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.2ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.9ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.4ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.3ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (3.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (3.6ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (45.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (24.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (2.1ms)
  Rendered comments/_comment_limited.html.haml (16.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (2.8ms)
  Rendered comments/_comment_limited.html.haml (16.8ms)
  Rendered pro_cons/_form.html.haml (5.1ms)
  Rendered pro_cons/_new.html.haml (6.3ms)
  Rendered discussions/show.html.haml within layouts/application (159.6ms)
Completed 500 Internal Server Error in 223ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - wrong number of arguments (0 for 1..2):
   () Users/teamco/Sites/loomio/app/helpers/readable_unguessable_urls_helper.rb:18:in `block (2 levels) in <module:ReadableUnguessableUrlsHelper>'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___1407573920625419352_70102032674760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__2163818960223602016_70102035551940'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___233767400232693294_70101978672460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/288dd8f926624e52/variables" for 127.0.0.1 at 2014-10-23 15:28:35 +0300
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:28:35.017089' and ends_at > '2014-10-23 12:28:35.017089')
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:32:03 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (6.1ms)
  [1m[35mMembership Load (1.8ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.0ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.1ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.4ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (61.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (2.1ms)
  Rendered comments/_comment_limited.html.haml (25.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.4ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (29.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (16.2ms)
  Rendered pro_cons/_form.html.haml (1.2ms)
  Rendered pro_cons/_new.html.haml (2.3ms)
  Rendered discussions/show.html.haml within layouts/application (209.1ms)
Completed 500 Internal Server Error in 267ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - wrong number of arguments (0 for 1..2):
   () Users/teamco/Sites/loomio/app/helpers/readable_unguessable_urls_helper.rb:18:in `block (2 levels) in <module:ReadableUnguessableUrlsHelper>'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_form.html.haml:1:in `_app_views_pro_cons__form_html_haml___1407573920625419352_70102032674760'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/pro_cons/_new.html.haml:3:in `_app_views_pro_cons__new_html_haml__2163818960223602016_70102035551940'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `block in render_with_haml'
  haml (4.0.5) lib/haml/helpers.rb:89:in `non_haml'
  haml (4.0.5) lib/haml/helpers/action_view_mods.rb:10:in `render_with_haml'
   () Users/teamco/Sites/loomio/app/views/discussions/show.html.haml:73:in `_app_views_discussions_show_html_haml___233767400232693294_70101978672460'
  actionview (4.1.6) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.6) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.6) lib/action_view/template.rb:143:in `render'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/a468d04d9858cc79/variables" for 127.0.0.1 at 2014-10-23 15:32:04 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:32:03.833162' and ends_at > '2014-10-23 12:32:03.833162')[0m
  [1m[35mMotion Load (0.3ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC  [["discussion_id", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mDiscussion Load (0.8ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (15.0ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (5.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:34:10 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (3.8ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.1ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.5ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.5ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (44.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  [1m[35mComment Load (0.3ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment_limited.html.haml (24.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (17.2ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (16.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (9.2ms)
  Rendered pro_cons/_new.html.haml (10.7ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (19.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (19.0ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (20.5ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (18.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.1ms)
  Rendered discussions/_activity.html.haml (143.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.9ms)
  Rendered discussions/show.html.haml within layouts/application (328.3ms)
  Rendered application/_social_metadata.html.haml (5.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.7ms)
  Rendered application/_header.html.haml (32.2ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:34:10.395156' and ends_at > '2014-10-23 12:34:10.395156')
  Rendered application/_announcements.html.haml (1.7ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (10.5ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.9ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:34:11.953318')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:34:11.953318"], ["updated_at", "2014-10-23 12:34:11.971564"]]
  [1m[35m (1.9ms)[0m  COMMIT
Completed 200 OK in 1597ms (Views: 1489.8ms | ActiveRecord: 42.8ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:34:15 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 144ms (Views: 12.5ms | ActiveRecord: 2.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:34:15 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (15.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (123.8ms)
  Rendered notifications/groups_tree_dropdown.html.haml (141.4ms)
Completed 200 OK in 207ms (Views: 176.2ms | ActiveRecord: 17.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:34:15 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (19.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (2.1ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 66ms (Views: 0.8ms | ActiveRecord: 23.2ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:35:01 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"test", "cons"=>"tre"}, "commit"=>"Save"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:35:01.449710' and ends_at > '2014-10-23 12:35:01.449710')[0m
Completed 500 Internal Server Error in 26ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NameError - undefined local variable or method `build_discussion' for #<ProConsController:0x007f83cb1fc498>:
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:51:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/d5269ae56c9b9455/variables" for 127.0.0.1 at 2014-10-23 15:35:02 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:36:53 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (11.2ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.4ms)
  Rendered discussions/_privacy_icon.html.haml (1.2ms)
  Rendered discussions/_title.html.haml (9.5ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (16.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (75.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (4.3ms)
  Rendered comments/_comment_limited.html.haml (32.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (16.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (16.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (12.4ms)
  Rendered pro_cons/_new.html.haml (13.7ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (21.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.4ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.1ms)
  Rendered discussions/_activity.html.haml (196.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (16.0ms)
  Rendered discussions/show.html.haml within layouts/application (477.7ms)
  Rendered application/_social_metadata.html.haml (5.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (6.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (32.7ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:36:55.842210' and ends_at > '2014-10-23 12:36:55.842210')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.1ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:36:57.825521')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:36:57.825521"], ["updated_at", "2014-10-23 12:36:57.849434"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 2101ms (Views: 1580.4ms | ActiveRecord: 55.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:37:00 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (7.5ms)
Completed 200 OK in 113ms (Views: 15.7ms | ActiveRecord: 19.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:37:01 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (4.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (2.2ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (78.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (88.6ms)
Completed 200 OK in 130ms (Views: 93.4ms | ActiveRecord: 8.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:37:01 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 30ms (Views: 1.2ms | ActiveRecord: 3.1ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:37:03 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"test", "cons"=>"tre"}, "commit"=>"Save"}
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
  Rendered application/display_error.html.haml within layouts/application (3.3ms)
  Rendered application/_social_metadata.html.haml (5.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (32.8ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:37:03.967145' and ends_at > '2014-10-23 12:37:03.967145')
  Rendered application/_announcements.html.haml (1.2ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1353ms (Views: 1332.3ms | ActiveRecord: 2.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:37:08 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.1ms)
Completed 200 OK in 26ms (Views: 1.1ms | ActiveRecord: 2.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:37:08 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (55.5ms)
  Rendered notifications/groups_tree_dropdown.html.haml (63.3ms)
Completed 200 OK in 80ms (Views: 66.6ms | ActiveRecord: 3.1ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:37:08 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.7ms)
Completed 200 OK in 20ms (Views: 7.0ms | ActiveRecord: 1.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:38:08 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 3.1ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:38:49 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:38:50.866757' and ends_at > '2014-10-23 12:38:50.866757')[0m
Completed 500 Internal Server Error in 369ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `request_uri' for #<ActionDispatch::Request:0x007f83c637fc70>:
   () Users/teamco/Sites/loomio/app/controllers/discussions_controller.rb:103:in `show'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/3e6f1a4ae84e2f58/variables" for 127.0.0.1 at 2014-10-23 15:38:51 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:38:53 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:38:53.974426' and ends_at > '2014-10-23 12:38:53.974426')
Completed 500 Internal Server Error in 49ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `request_uri' for #<ActionDispatch::Request:0x007f83cbd9bba0>:
   () Users/teamco/Sites/loomio/app/controllers/discussions_controller.rb:103:in `show'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/c39a37f4271a0522/variables" for 127.0.0.1 at 2014-10-23 15:38:54 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:38:58 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mAnnouncement Load (0.9ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:38:58.328535' and ends_at > '2014-10-23 12:38:58.328535')[0m
Completed 500 Internal Server Error in 45ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `request_uri' for #<ActionDispatch::Request:0x007f83c5011260>:
   () Users/teamco/Sites/loomio/app/controllers/discussions_controller.rb:103:in `show'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/17ed50ab8ed2941f/variables" for 127.0.0.1 at 2014-10-23 15:38:58 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:39:10 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:39:10.958540' and ends_at > '2014-10-23 12:39:10.958540')
Completed 500 Internal Server Error in 44ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `request_uri' for #<ActionDispatch::Request:0x007f83c5777450>:
   () Users/teamco/Sites/loomio/app/controllers/discussions_controller.rb:103:in `show'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/00e570cebc03ae6f/variables" for 127.0.0.1 at 2014-10-23 15:39:11 +0300


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:40:19 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (1.2ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (12.0ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.8ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (10.8ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (21.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.5ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (100.3ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (8.7ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (2.2ms)
  Rendered comments/_comment_limited.html.haml (36.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment_limited.html.haml (17.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (16.9ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (13.2ms)
  Rendered pro_cons/_new.html.haml (18.6ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.7ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.7ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (36.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (22.0ms)
  Rendered discussions/_discussion_item.html.haml (2.6ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (20.3ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (2.8ms)
  Rendered base/_linked_avatar.html.haml (12.2ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (26.5ms)
  Rendered base/_avatar.html.haml (1.1ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (20.0ms)
  Rendered discussions/_activity.html.haml (239.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.9ms)
  Rendered discussions/_add_comment.html.haml (17.0ms)
  Rendered discussions/show.html.haml within layouts/application (658.0ms)
  Rendered application/_social_metadata.html.haml (6.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (6.4ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (5.1ms)
  Rendered application/_header.html.haml (39.5ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:40:21.484698' and ends_at > '2014-10-23 12:40:21.484698')
  Rendered application/_announcements.html.haml (1.5ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.7ms)
  Rendered application/_footer.html.haml (9.4ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.4ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (15.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:40:24.441802')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:40:24.441802"], ["updated_at", "2014-10-23 12:40:24.468134"]]
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 3115ms (Views: 2434.7ms | ActiveRecord: 79.3ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:40:28 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 37ms (Views: 9.8ms | ActiveRecord: 3.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:40:28 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (54.9ms)
  Rendered notifications/groups_tree_dropdown.html.haml (62.2ms)
Completed 200 OK in 84ms (Views: 68.9ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:40:28 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (20.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 62ms (Views: 1.1ms | ActiveRecord: 23.2ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:40:34 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"test", "cons"=>"123"}, "commit"=>"Save"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
  Rendered application/display_error.html.haml within layouts/application (0.2ms)
  Rendered application/_social_metadata.html.haml (7.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (34.1ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:40:34.815211' and ends_at > '2014-10-23 12:40:34.815211')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.9ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1195ms (Views: 1175.8ms | ActiveRecord: 2.2ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:40:38 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (8.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (1.1ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 66ms (Views: 39.1ms | ActiveRecord: 9.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:40:39 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (16.8ms)
  Rendered notifications/groups_tree_dropdown.html.haml (41.8ms)
Completed 200 OK in 80ms (Views: 54.0ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:40:39 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (19.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 234ms (Views: 0.8ms | ActiveRecord: 22.2ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:41:39 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 3.0ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:42:14 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.8ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.4ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (12.9ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.6ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (46.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (21.2ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.8ms)
  Rendered motions/_motion.html.haml (78.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (10.7ms)
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment_limited.html.haml (45.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (11.8ms)
  Rendered pro_cons/_new.html.haml (16.8ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (22.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.0ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.8ms)
  Rendered discussions/_activity.html.haml (194.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (16.0ms)
  Rendered discussions/show.html.haml within layouts/application (607.7ms)
  Rendered application/_social_metadata.html.haml (5.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.6ms)
  Rendered application/_search.html.haml (5.6ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (37.6ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:42:17.209611' and ends_at > '2014-10-23 12:42:17.209611')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (8.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.5ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.6ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:42:19.494209')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:42:19.494209"], ["updated_at", "2014-10-23 12:42:19.519112"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 2383ms (Views: 1848.9ms | ActiveRecord: 70.9ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:42:23 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (3.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (5.8ms)
Completed 200 OK in 62ms (Views: 27.0ms | ActiveRecord: 6.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:42:24 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 61ms (Views: 1.1ms | ActiveRecord: 2.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:42:24 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (25.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (44.9ms)
Completed 200 OK in 64ms (Views: 49.4ms | ActiveRecord: 3.2ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:42:26 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (4.2ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.6ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.9ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.7ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (45.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (2.5ms)
  Rendered comments/_comment_limited.html.haml (29.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment_limited.html.haml (18.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (16.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (5.2ms)
  Rendered pro_cons/_new.html.haml (6.4ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (22.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.8ms)
  Rendered discussions/_discussion_item.html.haml (3.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (10.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (22.5ms)
  Rendered discussions/_discussion_item.html.haml (2.8ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.8ms)
  Rendered discussions/_activity.html.haml (153.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.8ms)
  Rendered discussions/show.html.haml within layouts/application (342.8ms)
  Rendered application/_social_metadata.html.haml (5.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (6.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (4.8ms)
  Rendered application/_header.html.haml (39.2ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:42:26.445027' and ends_at > '2014-10-23 12:42:26.445027')[0m
  Rendered application/_announcements.html.haml (1.6ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (26.7ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.2ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:42:28.081280')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:42:28.081280"], ["updated_at", "2014-10-23 12:42:28.102341"]]
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1672ms (Views: 1579.7ms | ActiveRecord: 24.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:42:31 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (7.6ms)
Completed 200 OK in 99ms (Views: 59.5ms | ActiveRecord: 1.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:42:32 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.8ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (96.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (155.1ms)
Completed 200 OK in 262ms (Views: 236.3ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:42:32 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 131ms (Views: 34.1ms | ActiveRecord: 3.6ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:42:57 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdf", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
  Rendered application/display_error.html.haml within layouts/application (0.3ms)
  Rendered application/_social_metadata.html.haml (7.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (34.6ms)
  Rendered base/_avatar.html.haml (1.4ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (7.1ms)
  Rendered application/_header.html.haml (70.9ms)
  [1m[35mAnnouncement Load (1.0ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:42:57.493169' and ends_at > '2014-10-23 12:42:57.493169')
  Rendered application/_announcements.html.haml (3.0ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.6ms)
  Rendered application/_footer.html.haml (16.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1390ms (Views: 1369.5ms | ActiveRecord: 2.8ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:43:02 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (88.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (10.4ms)
Completed 200 OK in 256ms (Views: 47.9ms | ActiveRecord: 89.9ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:43:03 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (11.1ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (32.6ms)
  Rendered notifications/groups_tree_dropdown.html.haml (51.7ms)
Completed 200 OK in 104ms (Views: 78.6ms | ActiveRecord: 14.0ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:43:03 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 3.4ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:44:03 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 274ms (Views: 1.7ms | ActiveRecord: 13.7ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:44:19 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.4ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (22.5ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (10.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (18.9ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.4ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (5.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (111.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.5ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (8.9ms)
  [1m[35mComment Load (0.3ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment_limited.html.haml (31.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (17.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (16.0ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (13.5ms)
  Rendered pro_cons/_new.html.haml (18.7ms)
  [1m[36mEvent Load (0.8ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (23.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.4ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (29.4ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (1.1ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered comments/_comment_likes.html.haml (2.1ms)
  Rendered comments/_comment.html.haml (21.6ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered discussions/_discussion_item.html.haml (63.7ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (22.5ms)
  Rendered discussions/_activity.html.haml (341.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (16.9ms)
  Rendered discussions/show.html.haml within layouts/application (790.8ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_search.html.haml (6.5ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.6ms)
  Rendered application/_user_dropdown.html.haml (7.1ms)
  Rendered application/_header.html.haml (692.0ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:44:20.826466' and ends_at > '2014-10-23 12:44:20.826466')
  Rendered application/_announcements.html.haml (1.5ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (16.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.0ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:44:24.023312')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:44:24.023312"], ["updated_at", "2014-10-23 12:44:24.047682"]]
  [1m[35m (1.3ms)[0m  COMMIT
Completed 200 OK in 3351ms (Views: 2737.3ms | ActiveRecord: 74.6ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:44:27 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.1ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (12.5ms)
Completed 200 OK in 104ms (Views: 42.4ms | ActiveRecord: 5.7ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:44:28 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (17.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (67.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (75.8ms)
Completed 200 OK in 134ms (Views: 98.9ms | ActiveRecord: 19.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:44:28 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (22.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 103ms (Views: 1.2ms | ActiveRecord: 24.2ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:44:31 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdf", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 /d/YPUgfENW/title
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 500 Internal Server Error in 19ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

AbstractController::DoubleRenderError - Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".:
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:15:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:9:in `block in <class:ProConsController>'
  activesupport (4.1.6) lib/active_support/rescuable.rb:112:in `instance_exec'
  activesupport (4.1.6) lib/active_support/rescuable.rb:112:in `block in handler_for_rescue'
  activesupport (4.1.6) lib/active_support/rescuable.rb:80:in `call'
  activesupport (4.1.6) lib/active_support/rescuable.rb:80:in `rescue_with_handler'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:15:in `rescue_with_handler'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:32:in `rescue in process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/3f84558239c92606/variables" for 127.0.0.1 at 2014-10-23 15:44:32 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:44:31.855603' and ends_at > '2014-10-23 12:44:31.855603')[0m


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:45:37 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdf", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 /d/YPUgfENW/title
Completed 500 Internal Server Error in 160ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ArgumentError - 'false' is not an ActiveModel-compatible object. It must implement :to_partial_path.:
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:436:in `partial_path'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:345:in `setup'
  actionview (4.1.6) lib/action_view/renderer/partial_renderer.rb:262:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:21:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:47:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/4828377cb4ff4e38/variables" for 127.0.0.1 at 2014-10-23 15:45:40 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:45:39.953256' and ends_at > '2014-10-23 12:45:39.953256')


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:46:18 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdf", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 /d/YPUgfENW/title
Completed 500 Internal Server Error in 102ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ActionView::MissingTemplate - Missing template pro_cons/create, group_base/create, base/create, application/create with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :arb, :haml]}. Searched in:
  * "/Users/teamco/Sites/loomio/app/views"
  * "/Users/teamco/.rvm/gems/ruby-2.1.3/bundler/gems/activeadmin-35084ca71a48/app/views"
  * "/Users/teamco/.rvm/gems/ruby-2.1.3/gems/kaminari-0.16.1/app/views"
  * "/Users/teamco/.rvm/gems/ruby-2.1.3/gems/devise-3.2.4/app/views"
:
  actionview (4.1.6) lib/action_view/path_set.rb:46:in `find'
  actionview (4.1.6) lib/action_view/lookup_context.rb:124:in `find'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:41:in `determine_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:47:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/bdd18ce6ae7ebc36/variables" for 127.0.0.1 at 2014-10-23 15:46:20 +0300
  [1m[36mAnnouncement Load (0.6ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:46:19.914519' and ends_at > '2014-10-23 12:46:19.914519')[0m


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:46:24 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (11.7ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.2ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (10.4ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (15.9ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.2ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.1ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (1.2ms)
  Rendered motions/_motion.html.haml (78.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.4ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.8ms)
  Rendered comments/_comment_limited.html.haml (30.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (16.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (17.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (13.9ms)
  Rendered pro_cons/_new.html.haml (18.5ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.6ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (4.1ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (12.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (40.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.9ms)
  Rendered discussions/_discussion_item.html.haml (3.2ms)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (24.6ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (16.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (19.5ms)
  Rendered discussions/_activity.html.haml (453.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered discussions/_markdown_setting.html.haml (1.6ms)
  Rendered discussions/_add_comment.html.haml (505.1ms)
  Rendered discussions/show.html.haml within layouts/application (1445.2ms)
  Rendered application/_social_metadata.html.haml (11.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.2ms)
  Rendered application/_search.html.haml (6.3ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.8ms)
  Rendered application/_header.html.haml (41.1ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:46:24.263190' and ends_at > '2014-10-23 12:46:24.263190')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (11.1ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.4ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:46:27.461906')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:46:27.461906"], ["updated_at", "2014-10-23 12:46:27.485803"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 3276ms (Views: 2762.5ms | ActiveRecord: 74.4ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:46:27 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (4.6ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.0ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.7ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.6ms)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.1ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (44.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment_limited.html.haml (24.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (15.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment_limited.html.haml (16.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (5.3ms)
  Rendered pro_cons/_new.html.haml (6.6ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (21.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.8ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (3.2ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (69.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.7ms)
  Rendered discussions/_activity.html.haml (194.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (14.5ms)
  Rendered discussions/show.html.haml within layouts/application (371.7ms)
  Rendered application/_social_metadata.html.haml (5.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.3ms)
  Rendered application/_search.html.haml (5.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (36.4ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:46:27.560403' and ends_at > '2014-10-23 12:46:27.560403')[0m
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (8.8ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.7ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:46:29.133686')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:46:29.133686"], ["updated_at", "2014-10-23 12:46:29.150534"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1605ms (Views: 1521.2ms | ActiveRecord: 24.1ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:46:32 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (22.8ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (5.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (509.8ms)
  Rendered notifications/groups_tree_dropdown.html.haml (539.5ms)
Completed 200 OK in 586ms (Views: 543.4ms | ActiveRecord: 30.5ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:46:33 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.1ms)
Completed 200 OK in 66ms (Views: 8.7ms | ActiveRecord: 3.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:46:33 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 33ms (Views: 1.2ms | ActiveRecord: 3.0ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:46:40 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdf", "cons"=>"34"}, "commit"=>"Save"}
  [1m[35mUser Load (1.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 /d/YPUgfENW/title
Completed 500 Internal Server Error in 25ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ActionView::MissingTemplate - Missing template pro_cons/create, group_base/create, base/create, application/create with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :arb, :haml]}. Searched in:
  * "/Users/teamco/Sites/loomio/app/views"
  * "/Users/teamco/.rvm/gems/ruby-2.1.3/bundler/gems/activeadmin-35084ca71a48/app/views"
  * "/Users/teamco/.rvm/gems/ruby-2.1.3/gems/kaminari-0.16.1/app/views"
  * "/Users/teamco/.rvm/gems/ruby-2.1.3/gems/devise-3.2.4/app/views"
:
  actionview (4.1.6) lib/action_view/path_set.rb:46:in `find'
  actionview (4.1.6) lib/action_view/lookup_context.rb:124:in `find'
  actionview (4.1.6) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:41:in `determine_template'
  actionview (4.1.6) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.6) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.6) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.6) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.6) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:47:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/9e3308f28a5e8a92/variables" for 127.0.0.1 at 2014-10-23 15:46:41 +0300
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:46:41.032428' and ends_at > '2014-10-23 12:46:41.032428')


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:47:58 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.9ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.4ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.4ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (12.9ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (6.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (11.4ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (17.1ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.8ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (1.0ms)
  Rendered motions/_motion.html.haml (78.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (16.2ms)
  [1m[35mComment Load (0.3ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (12.6ms)
  Rendered comments/_comment_limited.html.haml (94.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (17.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (16.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (15.4ms)
  Rendered pro_cons/_new.html.haml (52.2ms)
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (19.9ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (6.2ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (9.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (4.0ms)
  Rendered comments/_comment.html.haml (36.3ms)
  Rendered base/_avatar.html.haml (1.7ms)
  Rendered base/_linked_avatar.html.haml (28.5ms)
  Rendered comments/_comment_likes.html.haml (2.8ms)
  Rendered comments/_comment.html.haml (53.0ms)
  Rendered discussions/_discussion_item.html.haml (2.7ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (23.5ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (10.8ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (24.1ms)
  Rendered discussions/_activity.html.haml (758.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered discussions/_markdown_setting.html.haml (1.0ms)
  Rendered discussions/_add_comment.html.haml (27.5ms)
  Rendered discussions/show.html.haml within layouts/application (1557.7ms)
  Rendered application/_social_metadata.html.haml (5.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (6.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (4.4ms)
  Rendered application/_header.html.haml (36.4ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:48:00.432037' and ends_at > '2014-10-23 12:48:00.432037')
  Rendered application/_announcements.html.haml (1.9ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.5ms)
  Rendered application/_footer.html.haml (10.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.5ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:48:03.910791')  [["motion_id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:48:03.910791"], ["updated_at", "2014-10-23 12:48:03.936269"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 3596ms (Views: 2995.3ms | ActiveRecord: 90.8ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:48:07 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.6ms)
Completed 200 OK in 91ms (Views: 21.2ms | ActiveRecord: 4.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:48:07 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (35.7ms)
  Rendered notifications/groups_tree_dropdown.html.haml (42.8ms)
Completed 200 OK in 62ms (Views: 47.2ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:48:07 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 32ms (Views: 1.2ms | ActiveRecord: 3.0ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:48:09 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdf", "cons"=>"34"}, "commit"=>"Save"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 /d/YPUgfENW/title
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 500 Internal Server Error in 16ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

AbstractController::DoubleRenderError - Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".:
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:15:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:48:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/7abdb531942c34f0/variables" for 127.0.0.1 at 2014-10-23 15:48:10 +0300
  [1m[36mAnnouncement Load (17.3ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:48:09.894452' and ends_at > '2014-10-23 12:48:09.894452')[0m


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:49:37 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.4ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.5ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (11.8ms)
  [1m[35mMembership Load (0.5ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (6.3ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (11.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (22.3ms)
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.5ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.8ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (97.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.8ms)
  Rendered base/_linked_avatar.html.haml (9.9ms)
  [1m[36mComment Load (0.3ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (2.0ms)
  Rendered comments/_comment_limited.html.haml (32.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.5ms)
  Rendered comments/_comment_likes.html.haml (2.2ms)
  Rendered comments/_comment_limited.html.haml (18.5ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.8ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment_limited.html.haml (19.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (13.5ms)
  Rendered pro_cons/_new.html.haml (18.5ms)
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (5.0ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.5ms)
  Rendered comments/_comment.html.haml (23.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (8.3ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.8ms)
  Rendered discussions/_discussion_item.html.haml (2.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.1ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered discussions/_activity.html.haml (195.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (1.0ms)
  Rendered discussions/_add_comment.html.haml (30.2ms)
  Rendered discussions/show.html.haml within layouts/application (625.5ms)
  Rendered application/_social_metadata.html.haml (9.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (6.0ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.9ms)
  Rendered application/_header.html.haml (38.0ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:49:39.626385' and ends_at > '2014-10-23 12:49:39.626385')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  Rendered application/_footer_links.html.haml (1.7ms)
  Rendered application/_footer.html.haml (9.2ms)
  Rendered application/_intercom_tracker.html.haml (0.5ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (16.1ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:49:42.421536')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:49:42.421536"], ["updated_at", "2014-10-23 12:49:42.445278"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 2944ms (Views: 2076.5ms | ActiveRecord: 69.5ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:49:45 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.4ms)
Completed 200 OK in 199ms (Views: 30.6ms | ActiveRecord: 6.1ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:49:45 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (4.8ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (190.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (199.1ms)
Completed 200 OK in 239ms (Views: 207.0ms | ActiveRecord: 8.5ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:49:46 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (1.7ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 34ms (Views: 1.4ms | ActiveRecord: 4.4ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:49:48 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdf", "cons"=>"34"}, "commit"=>"Save"}
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 /d/YPUgfENW/title
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 302 Found in 15ms (ActiveRecord: 1.4ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:49:49 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (3.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.7ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.6ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (4.3ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (5.5ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (9.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.3ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (9.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (3.8ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (52.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.5ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (4.1ms)
  Rendered base/_linked_avatar.html.haml (13.6ms)
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (1.8ms)
  Rendered comments/_comment_limited.html.haml (38.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (19.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (9.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (18.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (7.7ms)
  Rendered pro_cons/_new.html.haml (9.1ms)
  [1m[35mEvent Load (0.5ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.8ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.1ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (20.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (20.1ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.6ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.4ms)
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (18.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (19.7ms)
  Rendered discussions/_activity.html.haml (151.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (15.7ms)
  Rendered discussions/show.html.haml within layouts/application (384.8ms)
  Rendered application/_social_metadata.html.haml (5.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_search.html.haml (4.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_user_dropdown.html.haml (3.8ms)
  Rendered application/_header.html.haml (32.2ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:49:49.090952' and ends_at > '2014-10-23 12:49:49.090952')[0m
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.2ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.3ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.2ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:49:50.955254')[0m  [["motion_id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:49:50.955254"], ["updated_at", "2014-10-23 12:49:50.972626"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 1914ms (Views: 1635.7ms | ActiveRecord: 27.1ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:49:54 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.2ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.0ms)
Completed 200 OK in 38ms (Views: 16.6ms | ActiveRecord: 1.4ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:49:54 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (31.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (36.7ms)
Completed 200 OK in 53ms (Views: 40.3ms | ActiveRecord: 2.9ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:49:54 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 2.9ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:50:45 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"efgeer", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 500 Internal Server Error in 194ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

AbstractController::DoubleRenderError - Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".:
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:15:in `render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
   () Users/teamco/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:40:in `render'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:9:in `block in <class:ProConsController>'
  activesupport (4.1.6) lib/active_support/rescuable.rb:112:in `instance_exec'
  activesupport (4.1.6) lib/active_support/rescuable.rb:112:in `block in handler_for_rescue'
  activesupport (4.1.6) lib/active_support/rescuable.rb:80:in `call'
  activesupport (4.1.6) lib/active_support/rescuable.rb:80:in `rescue_with_handler'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:15:in `rescue_with_handler'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:32:in `rescue in process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/7063bda0a0ea51f0/variables" for 127.0.0.1 at 2014-10-23 15:50:46 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:50:46.358723' and ends_at > '2014-10-23 12:50:46.358723')


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:51:07 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 /d/YPUgfENW/title
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.6ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (11.2ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.2ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (9.2ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (15.5ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (76.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.6ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.7ms)
  [1m[35mComment Load (0.3ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.6ms)
  Rendered comments/_comment_limited.html.haml (28.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (2.1ms)
  Rendered comments/_comment_limited.html.haml (17.1ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (14.3ms)
  Rendered pro_cons/_new.html.haml (15.7ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.8ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.4ms)
  Rendered comments/_comment.html.haml (23.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.2ms)
  Rendered discussions/_discussion_item.html.haml (2.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (19.9ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.5ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.8ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.9ms)
  Rendered discussions/_activity.html.haml (392.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.8ms)
  Rendered discussions/show.html.haml within layouts/application (674.2ms)
  Rendered application/_social_metadata.html.haml (5.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (5.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (1.1ms)
  Rendered application/_user_dropdown.html.haml (5.0ms)
  Rendered application/_header.html.haml (34.9ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:51:08.830736' and ends_at > '2014-10-23 12:51:08.830736')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.2ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.3ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:51:11.114721')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:51:11.114721"], ["updated_at", "2014-10-23 12:51:11.139310"]]
  [1m[35m (1.1ms)[0m  COMMIT
Completed 200 OK in 2381ms (Views: 1927.0ms | ActiveRecord: 56.0ms)

ActionController::RoutingError (No route matches [GET] "/jquery.atwho/jquery.caret.map"):
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:10:in `require'
  bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
  bin/spring:16:in `require'
  bin/spring:16:in `<top (required)>'
  bin/rails:3:in `load'
  bin/rails:3:in `<main>'




Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:51:15 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.2ms)
Completed 200 OK in 35ms (Views: 7.9ms | ActiveRecord: 3.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:51:15 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.8ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (36.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (50.7ms)
Completed 200 OK in 81ms (Views: 63.9ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:51:15 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 38ms (Views: 2.3ms | ActiveRecord: 5.1ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:51:20 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"efgeer", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
  Rendered application/display_error.html.haml within layouts/application (0.3ms)
  Rendered application/_social_metadata.html.haml (7.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (4.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (4.7ms)
  Rendered application/_header.html.haml (34.4ms)
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:51:20.758789' and ends_at > '2014-10-23 12:51:20.758789')[0m
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.9ms)
  Rendered application/_footer.html.haml (9.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
Completed 200 OK in 1248ms (Views: 1226.5ms | ActiveRecord: 2.5ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:51:22 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.0ms)
Completed 200 OK in 23ms (Views: 8.6ms | ActiveRecord: 1.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:51:22 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (3.4ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 30ms (Views: 0.9ms | ActiveRecord: 5.0ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:51:22 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (3.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.7ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (20.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (26.8ms)
Completed 200 OK in 59ms (Views: 32.5ms | ActiveRecord: 5.5ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:52:17 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"efgeer", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
Completed 500 Internal Server Error in 201ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NoMethodError - undefined method `id' for nil:NilClass:
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:46:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/8ef2cfdabdbbcd0c/variables" for 127.0.0.1 at 2014-10-23 15:52:19 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:52:19.322889' and ends_at > '2014-10-23 12:52:19.322889')


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:54:56 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"efgeer", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
Completed 500 Internal Server Error in 136ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

TypeError - no implicit conversion of Symbol into Integer:
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:46:in `[]'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:46:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/205fb41af25cc8da/variables" for 127.0.0.1 at 2014-10-23 15:54:58 +0300
  [1m[36mAnnouncement Load (0.4ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:54:58.430349' and ends_at > '2014-10-23 12:54:58.430349')[0m


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:55:36 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"efgeer", "cons"=>"sdfsdf"}, "commit"=>"Save"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 "/d/YPUgfENW/title"
Completed 500 Internal Server Error in 129ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

TypeError - no implicit conversion of Symbol into Integer:
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:46:in `[]'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:46:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/925fe318a214a8b8/variables" for 127.0.0.1 at 2014-10-23 15:55:37 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:55:37.579955' and ends_at > '2014-10-23 12:55:37.579955')


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:56:02 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.7ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 {:url=>"/d/YPUgfENW/title", :discussion=>#<Discussion id: 1, group_id: 1, author_id: 1, created_at: "2014-10-22 09:09:18", updated_at: "2014-10-22 13:16:52", title: "title", last_comment_at: "2014-10-22 13:16:52", description: "", uses_markdown: false, total_views: 81, is_deleted: false, comments_count: 5, items_count: 10, archived_at: nil, private: true, key: "YPUgfENW", iframe_src: nil, last_activity_at: "2014-10-22 13:16:52", motions_count: 1>}
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.4ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (12.4ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.9ms)
  Rendered discussions/_privacy_icon.html.haml (1.2ms)
  Rendered discussions/_title.html.haml (10.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (17.1ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.2ms)
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.4ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (76.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.4ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.9ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment_limited.html.haml (28.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (16.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.2ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment_limited.html.haml (17.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (17.1ms)
  Rendered pro_cons/_new.html.haml (20.4ms)
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (5.1ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (23.5ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.1ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered discussions/_discussion_item.html.haml (2.3ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (19.2ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (18.3ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (18.3ms)
  Rendered discussions/_activity.html.haml (172.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (16.5ms)
  Rendered discussions/show.html.haml within layouts/application (470.7ms)
  Rendered application/_social_metadata.html.haml (5.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (5.7ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.4ms)
  Rendered application/_user_dropdown.html.haml (5.0ms)
  Rendered application/_header.html.haml (34.0ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:56:02.226778' and ends_at > '2014-10-23 12:56:02.226778')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (7.7ms)
  Rendered application/_intercom_tracker.html.haml (0.1ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:56:04.334610')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:56:04.334610"], ["updated_at", "2014-10-23 12:56:04.359195"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 2149ms (Views: 1812.6ms | ActiveRecord: 47.9ms)
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ActionDispatch::Cookies::CookieOverflow - ActionDispatch::Cookies::CookieOverflow:
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:529:in `[]='
  actionpack (4.1.6) lib/action_dispatch/middleware/session/cookie_store.rb:110:in `set_cookie'
  rack (1.5.2) lib/rack/session/abstract/id.rb:350:in `commit_session'
  rack (1.5.2) lib/rack/session/abstract/id.rb:226:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/473520efa2e51e3e/variables" for 127.0.0.1 at 2014-10-23 15:56:04 +0300
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  ORDER BY "motions"."closed_at" DESC[0m  [["discussion_id", 1]]


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:56:24 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[35mDiscussion Load (0.6ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 {:url=>"/d/YPUgfENW/title", :discussion=>1}
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1  [["discussion_id", 1]]
  [1m[36mMotionReader Load (0.5ms)[0m  [1mSELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mDiscussionReader Load (0.6ms)[0m  [1mSELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1[0m
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.5ms)
  Rendered groups/_title.html.haml (13.9ms)
  [1m[35mMembership Load (0.6ms)[0m  SELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1
  Rendered discussions/_options.html.haml (7.1ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (13.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.4ms)[0m  SELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (237.4ms)
  [1m[36mMotion Load (0.3ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  Rendered motions/_vote_row.html.haml (4.3ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  Rendered motions/_vote_row.html.haml (2.3ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.7ms)
  Rendered motions/_motion.html.haml (107.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)  [["discussion_id", 1]]
  [1m[36mComment Load (0.9ms)[0m  [1mSELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)[0m
  [1m[35mDiscussion Load (0.8ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered base/_avatar.html.haml (0.9ms)
  Rendered base/_linked_avatar.html.haml (8.8ms)
  [1m[36mComment Load (0.4ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  Rendered comments/_comment_likes.html.haml (2.0ms)
  Rendered comments/_comment_limited.html.haml (31.8ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment_limited.html.haml (18.8ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (12.8ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment_limited.html.haml (22.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered pro_cons/_form.html.haml (13.3ms)
  Rendered pro_cons/_new.html.haml (15.9ms)
  [1m[35mEvent Load (0.5ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mMotion Load (0.5ms)[0m  SELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)
  [1m[36mComment Load (0.6ms)[0m  [1mSELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mAttachment Load (3.0ms)[0m  [1mSELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mVote Load (0.6ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (5.6ms)
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (2.8ms)
  Rendered comments/_comment.html.haml (31.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (9.3ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (30.2ms)
  Rendered discussions/_discussion_item.html.haml (2.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.3ms)
  Rendered comments/_comment.html.haml (18.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (8.7ms)
  Rendered comments/_comment_likes.html.haml (3.7ms)
  Rendered comments/_comment.html.haml (25.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (10.1ms)
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment.html.haml (23.3ms)
  Rendered discussions/_activity.html.haml (234.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered discussions/_markdown_setting.html.haml (0.8ms)
  Rendered discussions/_add_comment.html.haml (17.7ms)
  Rendered discussions/show.html.haml within layouts/application (821.9ms)
  Rendered application/_social_metadata.html.haml (5.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_search.html.haml (6.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered application/_user_profile_options.html.haml (1.0ms)
  Rendered application/_user_dropdown.html.haml (5.2ms)
  Rendered application/_header.html.haml (41.4ms)
  [1m[36mAnnouncement Load (0.5ms)[0m  [1mSELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:56:26.265948' and ends_at > '2014-10-23 12:56:26.265948')[0m
  Rendered application/_announcements.html.haml (2.0ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.3ms)
  Rendered application/_footer.html.haml (9.3ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.2ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDiscussion Load (0.4ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mDiscussionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:56:28.757817')[0m  [["motion_id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMotionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1  [["last_read_at", "2014-10-23 12:56:28.757817"], ["updated_at", "2014-10-23 12:56:28.798178"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 2625ms (Views: 2078.1ms | ActiveRecord: 72.2ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:56:31 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[35mUser Load (2.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  [1m[35mNotification Load (0.3ms)[0m  SELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)[0m  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (3.8ms)
Completed 200 OK in 38ms (Views: 9.9ms | ActiveRecord: 4.8ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:56:31 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  [1m[36mGroup Load (0.6ms)[0m  [1mSELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)[0m
  [1m[35mGroup Load (0.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (82.2ms)
  Rendered notifications/groups_tree_dropdown.html.haml (105.7ms)
Completed 200 OK in 124ms (Views: 109.1ms | ActiveRecord: 2.8ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:56:32 +0300
Processing by InboxController#size as */*
  [1m[35mUser Load (3.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position[0m  [["user_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)[0m
  Rendered text template (0.0ms)
Completed 200 OK in 102ms (Views: 1.8ms | ActiveRecord: 5.8ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:56:37 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"sdfsdfs", "cons"=>"df"}, "commit"=>"Save"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1[0m  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 {:url=>"/d/YPUgfENW/title", :discussion=>1}
  [1m[35mDiscussion Load (1.0ms)[0m  SELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "discussions"."id" = $2 LIMIT 1  [["user_id", 1], ["id", 1]]
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 #<Discussion id: 1, group_id: 1, author_id: 1, created_at: "2014-10-22 09:09:18", updated_at: "2014-10-22 13:16:52", title: "title", last_comment_at: "2014-10-22 13:16:52", description: "", uses_markdown: false, total_views: 83, is_deleted: false, comments_count: 5, items_count: 10, archived_at: nil, private: true, key: "YPUgfENW", iframe_src: nil, last_activity_at: "2014-10-22 13:16:52", motions_count: 1>
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 302 Found in 23ms (ActiveRecord: 2.5ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 15:56:37 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (1.9ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 {:url=>"/d/YPUgfENW/title", :discussion=>1}
  [1m[36mMotion Load (0.4ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.5ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.6ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.4ms)
  Rendered groups/_title.html.haml (4.0ms)
  [1m[36mMembership Load (0.6ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (4.5ms)
  Rendered discussions/_privacy_icon.html.haml (1.0ms)
  Rendered discussions/_title.html.haml (8.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.4ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (8.6ms)
  [1m[35mMotion Load (0.4ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.4ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.4ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.1ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.6ms)
  Rendered motions/_motion.html.haml (46.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (1.7ms)
  Rendered comments/_comment_limited.html.haml (24.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.9ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.6ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (7.3ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (16.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (5.3ms)
  Rendered pro_cons/_new.html.haml (6.7ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.5ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (0.7ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (3.3ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (19.5ms)
  Rendered base/_avatar.html.haml (0.7ms)
  Rendered base/_linked_avatar.html.haml (7.0ms)
  Rendered comments/_comment_likes.html.haml (1.2ms)
  Rendered comments/_comment.html.haml (17.7ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.6ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.2ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (0.9ms)
  Rendered comments/_comment.html.haml (16.7ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.4ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.3ms)
  Rendered discussions/_activity.html.haml (140.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.6ms)
  Rendered discussions/show.html.haml within layouts/application (322.9ms)
  Rendered application/_social_metadata.html.haml (6.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (10.9ms)
  Rendered application/_search.html.haml (4.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (1.7ms)
  Rendered application/_user_dropdown.html.haml (6.0ms)
  Rendered application/_header.html.haml (43.6ms)
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:56:37.735102' and ends_at > '2014-10-23 12:56:37.735102')
  Rendered application/_announcements.html.haml (1.4ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.1ms)
  Rendered application/_footer.html.haml (9.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.4ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 12:56:39.374367')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.4ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 12:56:39.374367"], ["updated_at", "2014-10-23 12:56:39.389024"]]
  [1m[35m (0.9ms)[0m  COMMIT
Completed 200 OK in 1667ms (Views: 1580.7ms | ActiveRecord: 26.5ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 15:56:41 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.2ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (1.8ms)
Completed 200 OK in 24ms (Views: 8.2ms | ActiveRecord: 1.2ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 15:56:41 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (0.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.3ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (19.3ms)
  Rendered notifications/groups_tree_dropdown.html.haml (27.1ms)
Completed 200 OK in 43ms (Views: 30.6ms | ActiveRecord: 2.7ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:56:42 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (1.6ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 4.3ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 15:57:42 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 161ms (Views: 1.1ms | ActiveRecord: 12.4ms)


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:58:12 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"demo", "cons"=>"false"}, "commit"=>"Save"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 {:url=>"/d/YPUgfENW/title", :discussion=>1}
  [1m[36mDiscussion Load (0.9ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "discussions"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35mAnnouncement Load (0.6ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:58:13.564777' and ends_at > '2014-10-23 12:58:13.564777')
Completed 500 Internal Server Error in 170ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

NameError - undefined local variable or method `d' for #<ProConsController:0x007f83ca99e760>:
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:48:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/046b2111298aeb10/variables" for 127.0.0.1 at 2014-10-23 15:58:13 +0300


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 15:58:34 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"demo", "cons"=>"false"}, "commit"=>"Save"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 {:url=>"/d/YPUgfENW/title", :discussion=>1}
  [1m[36mDiscussion Load (0.9ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "discussions"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (29.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 186ms
** [Airbrake] Notice was not sent due to configuration:         
  Environment Monitored? false         
  API key set? false

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.1.6) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.1.6) lib/active_record/attribute_assignment.rb:24:in `assign_attributes'
  activerecord (4.1.6) lib/active_record/core.rb:455:in `init_attributes'
  activerecord (4.1.6) lib/active_record/core.rb:198:in `initialize'
  activerecord (4.1.6) lib/active_record/inheritance.rb:30:in `new'
  activerecord (4.1.6) lib/active_record/inheritance.rb:30:in `new'
  activerecord (4.1.6) lib/active_record/reflection.rb:239:in `build_association'
  activerecord (4.1.6) lib/active_record/associations/association.rb:247:in `build_record'
  activerecord (4.1.6) lib/active_record/associations/collection_association.rb:460:in `block in _create_record'
  activerecord (4.1.6) lib/active_record/associations/collection_association.rb:168:in `block in transaction'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
  activerecord (4.1.6) lib/active_record/transactions.rb:208:in `transaction'
  activerecord (4.1.6) lib/active_record/associations/collection_association.rb:167:in `transaction'
  activerecord (4.1.6) lib/active_record/associations/collection_association.rb:459:in `_create_record'
  activerecord (4.1.6) lib/active_record/associations/collection_association.rb:137:in `create'
  activerecord (4.1.6) lib/active_record/associations/collection_proxy.rb:285:in `create'
   () Users/teamco/Sites/loomio/app/controllers/pro_cons_controller.rb:48:in `create'
  actionpack (4.1.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:282:in `block (2 levels) in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/core_ext/time/zones.rb:47:in `use_zone'
   () Users/teamco/Sites/loomio/app/controllers/application_controller.rb:97:in `user_time_zone'
  activesupport (4.1.6) lib/active_support/callbacks.rb:424:in `block in make_lambda'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:281:in `block in halting_and_conditional'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.6) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.6) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.6) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.6) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.6) lib/action_dispatch/routing/route_set.rb:678:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-browserid (0.0.1) lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/middleware/base_oauth.rb:41:in `call'
  omnicontacts (0.3.4) lib/omnicontacts/builder.rb:27:in `call'
  http_accept_language (2.0.2) lib/http_accept_language/middleware.rb:13:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.6) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  airbrake (4.1.0) lib/airbrake/rails/middleware.rb:13:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.6) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (4.1.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.6) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (4.1.0) lib/airbrake/user_informer.rb:12:in `call'
  railties (4.1.6) lib/rails/engine.rb:514:in `call'
  railties (4.1.6) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.2) lib/thin/connection.rb:84:in `catch'
  thin (1.6.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.2) lib/thin/connection.rb:53:in `process'
  thin (1.6.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.2) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.1.6) lib/rails/commands/server.rb:69:in `start'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:81:in `block in server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `tap'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:76:in `server'
  railties (4.1.6) lib/rails/commands/commands_tasks.rb:40:in `run_command!'
  railties (4.1.6) lib/rails/commands.rb:17:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/rails:10:in `require'
   () Users/teamco/Sites/loomio/bin/rails:10:in `<top (required)>'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `load'
  spring (1.1.3) lib/spring/client/rails.rb:27:in `call'
  spring (1.1.3) lib/spring/client/command.rb:7:in `call'
  spring (1.1.3) lib/spring/client.rb:26:in `run'
  spring (1.1.3) bin/spring:48:in `<top (required)>'
  spring (1.1.3) lib/spring/binstub.rb:11:in `load'
  spring (1.1.3) lib/spring/binstub.rb:11:in `<top (required)>'
   () Users/teamco/Sites/loomio/bin/spring:16:in `require'
   () Users/teamco/Sites/loomio/bin/spring:16:in `<top (required)>'
   () rails:3:in `load'
   () rails:3:in `<main>'



Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:58:35 +0300
  [1m[35mAnnouncement Load (0.4ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 12:58:35.511476' and ends_at > '2014-10-23 12:58:35.511476')


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:39 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:42 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:43 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:45 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:47 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:51 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:53 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:55 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:57 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 15:59:59 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 16:00:02 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 16:00:03 +0300


Started POST "/__better_errors/589df1720187b37e/variables" for 127.0.0.1 at 2014-10-23 16:00:05 +0300


Started POST "/pro_cons" for 127.0.0.1 at 2014-10-23 16:04:40 +0300
Processing by ProConsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L8hunaO6eF6AQgwzTVl863trJnF9NI505ShCpapScbI=", "pro_con"=>{"body"=>"demo", "cons"=>"false"}, "commit"=>"Save"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> create
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 {:url=>"/d/YPUgfENW/title", :discussion=>1}
  [1m[36mDiscussion Load (1.1ms)[0m  [1mSELECT  "discussions".* FROM "discussions" INNER JOIN "groups" ON "discussions"."group_id" = "groups"."id" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "discussions"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (46.6ms)[0m  [1mINSERT INTO "pro_cons" ("body", "cons", "created_at", "discussion_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["body", "demo"], ["cons", "f"], ["created_at", "2014-10-23 13:04:41.691041"], ["discussion_id", 1], ["updated_at", "2014-10-23 13:04:41.691041"]]
  [1m[35m (2.7ms)[0m  COMMIT
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 2 #<Discussion id: 1, group_id: 1, author_id: 1, created_at: "2014-10-22 09:09:18", updated_at: "2014-10-22 13:16:52", title: "title", last_comment_at: "2014-10-22 13:16:52", description: "", uses_markdown: false, total_views: 84, is_deleted: false, comments_count: 5, items_count: 10, archived_at: nil, private: true, key: "YPUgfENW", iframe_src: nil, last_activity_at: "2014-10-22 13:16:52", motions_count: 1>
Redirected to http://localhost:3000/d/YPUgfENW/title
Completed 302 Found in 505ms (ActiveRecord: 66.9ms)


Started GET "/d/YPUgfENW/title" for 127.0.0.1 at 2014-10-23 16:04:41 +0300
Processing by DiscussionsController#show as HTML
  Parameters: {"id"=>"YPUgfENW", "slug"=>"title"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "announcements".id FROM "announcements" INNER JOIN "announcement_dismissals" ON "announcements"."id" = "announcement_dismissals"."announcement_id" WHERE "announcement_dismissals"."user_id" = $1  [["user_id", 1]]
>>>>>>>>>>>>>>>> we_dont_serve_images_here_google_bot
>>>>>>>>>>>>>>>> load_resource_by_key
  [1m[36mDiscussion Load (0.6ms)[0m  [1mSELECT  "discussions".* FROM "discussions"  WHERE "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND "discussions"."key" = 'YPUgfENW' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND (memberships.admin = 't' AND memberships.is_suspended = 'f')  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.4ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
>>>>>>>>>>>>>>>> show
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 1 {:url=>"/d/YPUgfENW/title", :discussion=>1}
  [1m[36mMotion Load (0.2ms)[0m  [1mSELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 LIMIT 1[0m  [["discussion_id", 1]]
  [1m[35mMotionReader Load (0.4ms)[0m  SELECT  "motion_readers".* FROM "motion_readers"  WHERE "motion_readers"."user_id" = 1 AND "motion_readers"."motion_id" = 1  ORDER BY "motion_readers"."id" ASC LIMIT 1
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT DISTINCT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mDiscussionReader Load (0.5ms)[0m  SELECT  "discussion_readers".* FROM "discussion_readers"  WHERE "discussion_readers"."user_id" = 1 AND "discussion_readers"."discussion_id" = 1  ORDER BY "discussion_readers"."id" ASC LIMIT 1
>>>>>>>>>>>>>>>> assign_meta_data
  Rendered groups/_privacy_dropdown.html.haml (0.6ms)
  Rendered groups/_title.html.haml (23.4ms)
  [1m[36mMembership Load (0.5ms)[0m  [1mSELECT "memberships".* FROM "memberships"  WHERE "memberships"."user_id" = 1 AND "memberships"."group_id" = 1[0m
  Rendered discussions/_options.html.haml (5.0ms)
  Rendered discussions/_privacy_icon.html.haml (0.9ms)
  Rendered discussions/_title.html.haml (10.2ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.3ms)[0m  [1mSELECT  "versions".* FROM "versions"  WHERE "versions"."item_id" = $1 AND "versions"."item_type" = $2  ORDER BY "versions"."created_at" DESC, "versions"."id" DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Discussion"]]
  Rendered discussions/_discussion_context.html.haml (40.0ms)
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (motions.closed_at IS NULL)  ORDER BY motions.closed_at ASC LIMIT 1  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["group_id", 1]]
  [1m[35mVote Exists (0.3ms)[0m  SELECT  1 AS one FROM "votes" LEFT OUTER JOIN "votes" "previous_votes_votes" ON "previous_votes_votes"."id" = "votes"."previous_vote_id" LEFT OUTER JOIN "users" ON "users"."id" = "votes"."user_id" WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 LIMIT 1  [["motion_id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT  "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."user_id" = 1 AND "votes"."age" = 0  ORDER BY "votes"."id" ASC LIMIT 1[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  Rendered motions/_vote_row.html.haml (4.5ms)
  [1m[35mVote Load (0.3ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0  [["motion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)
  Rendered motions/_vote_row.html.haml (2.0ms)
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1[0m  [["motion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "memberships" ON "users"."id" = "memberships"."user_id" WHERE "memberships"."group_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["group_id", 1]]
  Rendered motions/_motion_pie_javascript.html.haml (0.9ms)
  Rendered motions/_motion.html.haml (111.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "motions"  WHERE "motions"."discussion_id" = $1 AND (closed_at IS NOT NULL)[0m  [["discussion_id", 1]]
  [1m[35mComment Load (0.3ms)[0m  SELECT  "comments".* FROM "comments"  WHERE "comments"."discussion_id" = $1 AND (comment_votes_count>0)  ORDER BY comment_votes_count desc LIMIT 3  [["discussion_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2)
  [1m[36mDiscussion Load (0.5ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered base/_linked_avatar.html.haml (8.0ms)
  [1m[35mComment Load (0.5ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."user_id" = $1  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (5, 3, 2, 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  Rendered comments/_comment_likes.html.haml (2.0ms)
  Rendered comments/_comment_limited.html.haml (29.9ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.8ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.4ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.7ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment_limited.html.haml (15.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered pro_cons/_form.html.haml (8.4ms)
  Rendered pro_cons/_new.html.haml (23.7ms)
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."discussion_id" = $1  ORDER BY "events"."created_at" ASC LIMIT 50 OFFSET 0[0m  [["discussion_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)
  [1m[36mMotion Load (0.6ms)[0m  [1mSELECT "motions".* FROM "motions"  WHERE "motions"."id" IN (1)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments"  WHERE "comments"."id" IN (1, 2, 3, 4, 5)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)[0m
  [1m[35mAttachment Load (1.2ms)[0m  SELECT "attachments".* FROM "attachments"  WHERE "attachments"."comment_id" IN (2, 3, 4, 1, 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "discussions".* FROM "discussions"  WHERE "discussions"."id" IN (1)[0m
  [1m[35mVote Load (0.6ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1, 2, 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users"  WHERE "users"."id" IN (1, 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered discussions/_discussion_item.html.haml (4.4ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "groups".* FROM "groups"  WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (20.6ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (7.2ms)
  Rendered comments/_comment_likes.html.haml (1.0ms)
  Rendered comments/_comment.html.haml (17.4ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered base/_avatar.html.haml (0.5ms)
  Rendered base/_linked_avatar.html.haml (6.5ms)
  Rendered comments/_comment_likes.html.haml (1.1ms)
  Rendered comments/_comment.html.haml (18.0ms)
  Rendered discussions/_discussion_item.html.haml (2.2ms)
  Rendered discussions/_discussion_item.html.haml (1.9ms)
  Rendered base/_avatar.html.haml (0.3ms)
  Rendered base/_linked_avatar.html.haml (6.3ms)
  Rendered comments/_comment_likes.html.haml (0.9ms)
  Rendered comments/_comment.html.haml (15.9ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered base/_linked_avatar.html.haml (6.2ms)
  Rendered comments/_comment_likes.html.haml (1.9ms)
  Rendered comments/_comment.html.haml (17.9ms)
  Rendered discussions/_activity.html.haml (195.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "events"  WHERE "events"."discussion_id" = $1[0m  [["discussion_id", 1]]
  Rendered base/_avatar.html.haml (0.6ms)
  Rendered discussions/_markdown_setting.html.haml (0.7ms)
  Rendered discussions/_add_comment.html.haml (15.5ms)
  Rendered discussions/show.html.haml within layouts/application (653.1ms)
  Rendered application/_social_metadata.html.haml (5.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."payment_plan" = 'manual_subscription'  [["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."can_start_group" = 'f'[0m  [["user_id", 1]]
  Rendered application/_user_profile_options.html.haml (0.9ms)
  Rendered application/_search.html.haml (6.0ms)
  Rendered base/_avatar.html.haml (0.4ms)
  Rendered application/_user_profile_options.html.haml (0.8ms)
  Rendered application/_user_dropdown.html.haml (3.6ms)
  Rendered application/_header.html.haml (34.3ms)
  [1m[35mAnnouncement Load (0.5ms)[0m  SELECT "announcements".* FROM "announcements"  WHERE (starts_at <= '2014-10-23 13:04:42.453783' and ends_at > '2014-10-23 13:04:42.453783')
  Rendered application/_announcements.html.haml (1.3ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  Rendered application/_footer_links.html.haml (1.2ms)
  Rendered application/_footer.html.haml (8.6ms)
  Rendered application/_intercom_tracker.html.haml (0.2ms)
  Rendered application/_heap_analytics.html.haml (0.1ms)
>>>>>>>>>>>>>>>> mark_as_read
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDiscussion Load (0.3ms)[0m  SELECT  "discussions".* FROM "discussions"  WHERE "discussions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (16.3ms)[0m  [1mUPDATE "discussions" SET "total_views" = COALESCE("total_views", 0) + 1 WHERE "discussions"."id" = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mDiscussionReader Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "discussion_readers"  WHERE ("discussion_readers"."user_id" = 1 AND "discussion_readers"."id" != 1 AND "discussion_readers"."discussion_id" = 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mMotion Load (0.3ms)[0m  SELECT  "motions".* FROM "motions"  WHERE "motions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1mSELECT "votes".* FROM "votes"  WHERE "votes"."motion_id" = $1 AND "votes"."age" = 0[0m  [["motion_id", 1]]
  [1m[35mVote Load (0.5ms)[0m  SELECT "votes".* FROM "votes"  WHERE "votes"."id" IN (1)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"  WHERE "users"."id" IN (2, 1)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "votes"  WHERE "votes"."motion_id" = $1 AND (created_at <= '2014-10-23 13:04:44.534807')  [["motion_id", 1]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMotionReader Exists (0.5ms)[0m  SELECT  1 AS one FROM "motion_readers"  WHERE ("motion_readers"."user_id" = 1 AND "motion_readers"."id" != 1 AND "motion_readers"."motion_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "motion_readers" SET "last_read_at" = $1, "updated_at" = $2 WHERE "motion_readers"."id" = 1[0m  [["last_read_at", "2014-10-23 13:04:44.534807"], ["updated_at", "2014-10-23 13:04:44.558122"]]
  [1m[35m (1.3ms)[0m  COMMIT
Completed 200 OK in 2533ms (Views: 1763.3ms | ActiveRecord: 62.9ms)


Started GET "/notifications/dropdown_items" for 127.0.0.1 at 2014-10-23 16:04:46 +0300
Processing by NotificationsController#dropdown_items as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1mSELECT  "notifications".* FROM "notifications"  WHERE "notifications"."user_id" = $1  ORDER BY created_at DESC LIMIT 10[0m  [["user_id", 1]]
  Rendered collection (0.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications"  WHERE "notifications"."user_id" = $1 AND (viewed_at IS NULL)  [["user_id", 1]]
  Rendered notifications/dropdown_items.html.haml (2.3ms)
Completed 200 OK in 85ms (Views: 55.5ms | ActiveRecord: 3.5ms)


Started GET "/notifications/groups_tree_dropdown" for 127.0.0.1 at 2014-10-23 16:04:46 +0300
Processing by NotificationsController#groups_tree_dropdown as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL  [["user_id", 1]]
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND "groups"."parent_id" IS NULL  ORDER BY "groups"."name" ASC[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.6ms)[0m  SELECT "groups".* FROM "groups"  WHERE "groups"."parent_id" IN (1)
  [1m[36mGroup Load (0.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (parent_id not in (1))[0m  [["user_id", 1]]
  [1m[35mGroup Load (0.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND 1=0  ORDER BY "groups"."name" ASC  [["user_id", 1]]
  Rendered application/_groups_tree.html.haml (33.1ms)
  Rendered notifications/groups_tree_dropdown.html.haml (45.2ms)
Completed 200 OK in 65ms (Views: 48.5ms | ActiveRecord: 4.1ms)


Started GET "/inbox/size" for 127.0.0.1 at 2014-10-23 16:04:47 +0300
Processing by InboxController#size as */*
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 1  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mGroup Load (0.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL AND (memberships.inbox_position is not null)  ORDER BY memberships.inbox_position  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT "groups".id FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "groups"."archived_at" IS NULL AND "memberships"."user_id" = $1 AND "memberships"."is_suspended" = 'f' AND "memberships"."archived_at" IS NULL[0m  [["user_id", 1]]
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "discussions" INNER JOIN "groups" ON "groups"."id" = "discussions"."group_id" LEFT OUTER JOIN discussion_readers dv ON dv.discussion_id = discussions.id AND dv.user_id = 1 LEFT OUTER JOIN memberships m ON discussions.group_id = m.group_id AND m.user_id = 1 WHERE (groups.archived_at IS NULL) AND "discussions"."archived_at" IS NULL AND "discussions"."is_deleted" = 'f' AND (((discussions.private = 'f') OR
                                (discussions.group_id IN (1)) OR
                                (groups.parent_members_can_see_discussions = TRUE AND groups.parent_id IN (1)))) AND (discussions.group_id in (1)) AND ((dv.last_read_at < discussions.last_activity_at) OR dv.last_read_at IS NULL) AND (discussions.last_activity_at > m.created_at)
  Rendered text template (0.0ms)
Completed 200 OK in 35ms (Views: 1.1ms | ActiveRecord: 3.4ms)
